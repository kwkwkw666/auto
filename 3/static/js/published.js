function _eC(t,e,n){window.Sentry&&mottorLogError(t,{tags:{function_name:"_eC"}});var i="";if(void 0!==n&&n.trace&&1==getCookie("show_me_debug")){for(var a="trace"+999999999*Math.random(),i='<div style="margin-top:10px;"><a style="color: #0af;padding: 10px 0 0;" onclick="var el=document.getElementById(\''+a+"'); if(el){el.style.display=('none'==el.style.display)?'block':'none';}\">Подробнее &raquo;</a></div><div id=\""+a+'" style="margin-top:10px;display: none;"><ul>',o=0;o<n.trace.length;o++)i+="<li>"+n.trace[o]+"</li>";i+="</ul></div>"}a=$("<span/>").text(t.message).html();$('<div id="locked_screen" style="overflow:auto"><div class="wnd" style="text-align:left;margin:60px auto;"><div class="header">Ошибка'+(0<t.code?" #"+t.code:"")+'!</div><div style="font-size:16px;margin:30px 0 0;padding: 20px;background: rgba(0,0,0,.05);border-radius: 3px;">'+a+"</div>"+i+(0<e?'<div style="color:#ccc;margin-top:10px;font-size:10px;">(catcher '+e+")</div>":"")+'<div class="btn_wrap"><div class="btn-m btn-default btn-ghost" onclick="window.location.reload();">Перезагрузить страницу</div></div></div></div>').appendTo($("body")),setTimeout(function(){throw t},0)}function each(t,e){var n,i=0,a=t.length;if(void 0===a){for(n in t)if(!1===e.call(t[n],n,t[n]))break}else for(var o=t[0];i<a&&!1!==e.call(o,i,o);o=t[++i]);return t}function getWindowSize(){return{width:window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight}}window.getCookie=function(t){for(var e,n=document.cookie.split(";"),i=n.length,a=0;a<i;a++)if(0<(e=n[a].indexOf("="))){var o=n[a].substr(0,e),r=n[a].substr(e+1);if((o=o.trim())==t)return r=unescape(r.trim())}},window.setCookie=function(t,e,n,i){var a="";n&&((o=new Date).setTime(o.getTime()+24*n*60*60*1e3),a="; expires="+o.toGMTString());var o="";"test"===getEnvironment()||(r=window.location.hostname)&&(o="; domain=."+r);var r="";i&&"https:"===window.location.protocol&&(r="; secure"),document.cookie=t+"="+escape(e)+a+"; path=/"+o+r},window.detectBrowsers=function(t){window.browser={opera_mobile:/opera mini|opera mobi/i.test(t),android:/android/i.test(t),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(t),msie:/msie/i.test(t)&&!/opera/i.test(t),msie8:/msie 8/i.test(t)&&!/opera/i.test(t)}},detectBrowsers(navigator.userAgent.toLowerCase()),window.isIos=function(t){return/iP(hone|od|ad)/.test(t||navigator.platform)},window.getIosVersion=function(t,e){if(t=t||navigator.platform,e=e||navigator.appVersion,!isIos(t))return!1;e=e.match(/OS (\d+)_(\d+)_?(\d+)?/);return null!==e&&[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]},window.insertJavaScript=function(t,e,n){var i;null===ge(e)?((i=document.createElement("script")).type="text/javascript",i.src=t,i.id=e,i.defer=!0,"function"==typeof n&&(i.onload=n),document.head.appendChild(i)):"function"==typeof n&&n()},window.insertCss=function(t,e,n){var i;null===ge(e)?((i=document.createElement("link")).rel="stylesheet",i.type="text/css",i.href=t,i.id=e,"function"==typeof n&&(i.onload=n),document.head.appendChild(i)):"function"==typeof n&&n()},window.rnd_seed=(new Date).getTime(),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var n=0,i=this.length;n<i;++n)t.call(e,this[n],n,this)}),Date.prototype.toISOString||(Date.prototype.toISOString=function(){function t(t){return t<10?"0"+t:t}return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+t(this.getUTCMilliseconds())+"Z"}),window.trim=function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")},window.ge=function(t){return"string"==typeof t||"number"==typeof t?document.getElementById(t):t},window.geByTag=function(t,e){return(e||document).getElementsByTagName(t)},window.geByTag1=function(t,e){return(e=e||document).querySelector&&e.querySelector(t)||geByTag(t,e)[0]},window.geByClass=function(t,e,n){if(e=e||document,n=n||"*",!browser.msie8&&e.querySelectorAll&&"*"!=n)return e.querySelectorAll(n+"."+t);var i=[];if(e.getElementsByClassName){var a=e.getElementsByClassName(t);if("*"!=n){n=n.toUpperCase();for(var o=0,r=a.length;o<r;++o)a[o].tagName.toUpperCase()==n&&i.push(a[o]);o=r=null}else i=Array.prototype.slice.call(a);a=null}else{for(var s=geByTag(n,e),d=new RegExp("(^|\\s)"+t+"(\\s|$)"),o=0,r=s.length;o<r;++o)d.test(s[o].className)&&i.push(s[o]);s=d=o=r=0}return i},window.geByClass1=function(t,e,n){return e=e||document,n=n||"*",!browser.msie8&&e.querySelector&&e.querySelector(n+"."+t)||geByClass(t,e,n)[0]},window.ce=function(t,e,n){t=document.createElement(t);return e&&extend(t,e),n&&setStyle(t,n),t},window.re=function(t){return(t=ge(t))&&t.parentNode&&t.parentNode.removeChild(t),t},window.se=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild},window.rs=function(n,t){return each(t,function(t,e){n=n.replace(new RegExp("%"+t+"%","g"),e)}),n},window.insertBefore=function(t,e){t.parentNode.insertBefore(e,t)},window.insertAfter=function(t,e){t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)},window.domEL=function(t,e){for(e=e?"previousSibling":"nextSibling";t&&!t.tagName;)t=t[e];return t},window.domNS=function(t){return domEL((t||{}).nextSibling)},window.domPS=function(t){return domEL((t||{}).previousSibling,1)},window.domFC=function(t){return domEL((t||{}).firstChild)},window.domLC=function(t){return domEL((t||{}).lastChild,1)},window.domPN=function(t){return(t||{}).parentNode},window.show=function(t){if(1<arguments.length){for(var e=0;e<arguments.length;++e)show(arguments[e]);e=null}else{var n,i,a;(t="string"==typeof t?ge(t):t)&&t.style&&"none"==getStyle(t,"display")&&(n=t.olddisplay,i="block",a=t.tagName.toLowerCase(),t.style.display=n||"",i=hasClass(t,"inline")?"inline":"tr"!=a||browser.msie()?"table"!=a||browser.msie()?"block":"table":"table-row",t.style.display=t.olddisplay=i,n=i=a=null)}},window.hide=function(t){if(1<arguments.length){for(var e=0;e<arguments.length;++e)hide(arguments[e]);e=null}else{var n;(t="string"==typeof t?ge(t):t)&&t.style&&("none"!=(n=getStyle(t,"display"))&&(t.olddisplay=n,t.style.display="none"),n=null)}},window.convertKebabCaseToCamelCase=function(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},window.isVisible=function(t){return!(!(t=ge(t))||!t.style)&&"none"!=getStyle(t,"display")},window.toggle=function(t,e){((e=null==e?!isVisible(t):e)?show:hide)(t)},window.isFunction=function(t){return"[object Function]"===Object.prototype.toString.call(t)},window.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},window.intval=function(t){return!0===t?1:parseInt(t)||0},window.floatval=function(t){return!0===t?1:parseFloat(t)||0},window.extend=function(){var t,e=arguments,n=e[0]||{},i=1,a=e.length,o=!1;for("boolean"==typeof n&&(o=n,n=e[1]||{},i=2),"object"==typeof n||isFunction(n)||(n={});i<a;++i)if(null!=(t=e[i]))for(var r in t){var s=n[r],d=t[r];n!==d&&(o&&d&&"object"==typeof d&&!d.nodeType?n[r]=extend(o,s||(null!=d.length?[]:{}),d):void 0!==d&&(n[r]=d))}return n},window.hasClass=function(t,e){return(t=ge(t))&&new RegExp("(\\s|^)"+e+"(\\s|$)").test(t.className)},window.addClass=function(t,e){if(isArray(t)){for(var n in t)addClass(t[n],e);n=null}else(t="string"==typeof t?ge(t):t).className||(t.className=""),hasClass(t,e)||(t.className=(t.className?t.className+" ":"")+e)},window.removeClass=function(t,e){if(isArray(t)){for(var n in t)removeClass(t[n],e);n=null}else(t="string"==typeof t?ge(t):t)&&(t.className=trim((t.className||"").replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," ")))},window.toggleClass=function(t,e,n){return void 0===n&&(n=!hasClass(t,e)),window[n?"addClass":"removeClass"](t,e)},window.getClassList=function(t){return t.className.split(/\s+/)},window.getClosestOrSameElement=function(t,e){return hasClass(t,e)?t:closest(t,e)},window.closest=function(t,e){if(!t)return null;for(var n=t,i=0;;){if(!n.parentNode)return null;if(!(n=n.parentNode)||"body"===n.nodeName.toLowerCase()||100<++i){n=null;break}if(hasClass(n,e))break}return i=null,n},window.getStyle=function(n,t,e){if(n=ge(n),isArray(t)){var i={};return each(t,function(t,e){i[e]=getStyle(n,e)}),i}if(void 0===e&&(e=!0),!e&&"opacity"==t&&browser.msie)return(r=n.style.filter)?0<=r.indexOf("opacity=")?parseFloat(r.match(/opacity=([^)]*)/)[1])/100+"":"1":"";if(!e&&n.style&&(n.style[t]||"height"==t))return n.style[t];var a=document.defaultView||window;if(a.getComputedStyle){t=t.replace(/([A-Z])/g,"-$1").toLowerCase();var o=a.getComputedStyle(n,null);o&&(s=o.getPropertyValue(t))}else if(n.currentStyle){if("opacity"==t&&browser.msie)return(r=n.currentStyle.filter)&&0<=r.indexOf("opacity=")?parseFloat(r.match(/opacity=([^)]*)/)[1])/100+"":"1";var r,a=convertKebabCaseToCamelCase(t),s=n.currentStyle[t]||n.currentStyle[a];!/^\d+(px)?$/i.test(s="auto"==s?0:s)&&/^\d/.test(s)&&(r=(o=n.style).left,a=n.runtimeStyle.left,n.runtimeStyle.left=n.currentStyle.left,o.left=s||0,s=o.pixelLeft+"px",o.left=r,n.runtimeStyle.left=a)}return!e||"width"!=t&&"height"!=t||(t=getSize(n,!0)[{width:0,height:1}[t]],s=(intval(s)?Math.max(floatval(s),t):t)+"px"),s},window.setStyle=function(n,t,e){var i;if(n=ge(n),n)return"object"==typeof t?each(t,function(t,e){setStyle(n,t,e)}):void("opacity"==t?(browser.msie&&((e+"").length?n.style.filter=1!==e?"alpha(opacity="+100*e+")":"":n.style.cssText=n.style.cssText.replace(/filter\s*:[^;]*/gi,""),n.style.zoom=1),n.style.opacity=e):((i="number"==typeof e)&&/height|width/i.test(t)&&(e=Math.abs(e)),n.style[t]=i&&!/z-?index|font-?weight|opacity|zoom|line-?height/i.test(t)?e+"px":e))},window.getElementAttributes=function(t){var e={};if(null==t||null==t.attributes)return e;for(var n=t.attributes.length,i=0;i<n;i++){var a=t.attributes[i];e[a.nodeName]=a.nodeValue}return e},window.attr=function(e,t,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&2!==e.nodeType){if(void 0===n){if(void 0===e.getAttribute)throw"elem has no getAttribute";return e.getAttribute(t)}if(null!==n){try{e.setAttribute(t,n+"")}catch(t){try{e.name=n+""}catch(t){}}return n}e.removeAttribute(t)}},window.replaceAll=function(t,e,n){return t.replace(new RegExp(escapeRegExp(e),"g"),n)},window.escapeRegExp=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")};var escapeHtmlEntityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function rnd(){return window.rnd_seed=(9301*window.rnd_seed+49297)%233280,window.rnd_seed/233280}function irand(t,e){return Math.floor(rand(t,e))}function cwarn(){var t;window.dbgMode&&window.console&&(t=Array.prototype.slice.call(arguments),console.warn.apply(window,t))}function extendClass(t,e){t.prototype=new e,t.prototype.constructor=t}function htmlentities(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function htmlspecialchars(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function htmlspecialchars_decode(t,e){var n=0,i=0,a=!1;void 0===e&&(e=2),t=t.toString().replace(/&lt;/g,"<").replace(/&gt;/g,">");var o={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};if(0===e&&(a=!0),"number"!=typeof e){for(e=[].concat(e),i=0;i<e.length;i++)0===o[e[i]]?a=!0:o[e[i]]&&(n|=o[e[i]]);e=n}return e&o.ENT_HTML_QUOTE_SINGLE&&(t=t.replace(/&#0*39;/g,"'")),t=(t=!a?t.replace(/&quot;/g,'"'):t).replace(/&amp;/g,"&")}function setcookie(t,e,n,i,a,o){document.cookie=t+"="+escape(e)+(n?"; expires="+new Date(n):"")+(i?"; path="+i:"")+(a?"; domain="+a:"")+(o?"; secure":"")}function generateUUID(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==t?e:7&e|8).toString(16)})}function fileUploaded(t){isset(t.type)&&FE.run("file_uploaded_"+t.type,t)}function fileUploadFail(t){isset(t.type)&&FE.run("file_upload_fail_"+t.type,t)}function makeBtnDisabled(t,e){return void 0===$(t).data("clicked")&&(e=e||"Загружается...",$(t).val(e).text(e).addClass("disabled").data("clicked",!0),!0)}function toggleDropdown(t){$(".dropdown_part:visible").hide();var e=$(t).closest(".inp_wrap"),t=e.children(".dropdown_part");t.css({width:e.width()}),t.removeClass("dropped_down dropped_up"),e.offset().top+e.outerHeight()+t.outerHeight()<$(window).height()?(t.css({top:e.outerHeight()-1}),t.addClass("dropped_down")):(t.css({top:-t.outerHeight()}),t.addClass("dropped_up")),t.show()}function setStateCookie(t,e){"function"==typeof $.cookie&&($.removeCookie(t),$.cookie(t,e,{expires:360,path:"/"}))}function ColorLuminance(t,e){(t=String(t).replace(/[^0-9a-f]/gi,"")).length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=e||0;for(var n,i="#",a=0;a<3;a++)n=parseInt(t.substr(2*a,2),16),i+=("00"+(n=Math.round(Math.min(Math.max(0,n+n*e),255)).toString(16))).substr(n.length);return i}function convertToHex(t){var e,n={hex:null,opacity:1};return/(^#?[0-9A-F]{6}$)|(^#?[0-9A-F]{3}$)/i.test(t)?n.hex="#"+t.replace("#",""):(e=t.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(.+)\)$/))?(n.hex="#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2),n.opacity=parseFloat(e[4])):"transparent"==t?n.opacity=0:null!=(t=rgb2hex(t))&&(n.hex=t),null!=n.opacity&&!isNaN(n.opacity)||(n.opacity=1),n}function hex2rgb(t){t=parseInt(-1<t.indexOf("#")?t.substring(1):t,16);return[t>>16,(65280&t)>>8,255&t]}function rgba2parts(t){var e,n="#ffffff",i=1;return null!=t&&((e=t.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(.+)\)$/))?(n="#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2),null!=(i=parseFloat(e[4]))&&!isNaN(i)||(i=1)):"transparent"==t?i=0:null!=(t=rgb2hex(t))&&(n=t)),{color:n,opacity:i}}function showCloudPaymentsWidget(t){t=JSON.parse(t);(new cp.CloudPayments).charge(t,function(e){ajaxLoad({fullUrl:window.lpmBaseUrl+"payment_acceptance/cloud_payments_success/",data:{payment_id:e.data.payment_id,signature:e.data.signature},onSuccess:function(t){t.res&&1===parseInt(t.res)&&e.data.success_url&&(window.location.href=e.data.success_url)}})},function(t,e){ajaxLoad({fullUrl:window.lpmBaseUrl+"payment_acceptance/cloud_payments_fail/",data:{reason:t||"",payment_id:e.data.payment_id,signature:e.data.signature}})})}function jAlert(t,e){e=$.extend({id:"jAlert",html:!0,showCloseBtn:!1,width:!1,okText:!1,btnCls:"ibtn-blue",btnWidth:100,onOk:function(){},headerText:!1,hideOnBlackoutClick:!1,alertClass:"",mobileAdapt:!1},e);var n=$("#"+e.id);if(n.length){if(n.attr("class",n.attr("class").replace(/^custom-/g,"")),e.alertClass.length)for(var i=e.alertClass.split(/\s+/g),a=0,o=i.length;a<o;a++)n.addClass("custom-"+i[a]);!1!==e.headerText?n.find(".iblk_header").show().find(".h5-fake").text(e.headerText):n.find(".iblk_header").hide(),n.find(".wind-btn-apply").text(e.okText||"OK").attr("class","btn wind-btn-apply "+e.btnCls).css("width",e.btnWidth),n.find("#jAlertBody")[!0===e.html?"html":"text"](t),n.wind("setApplyFunc",function(){e.onOk()}),e.onCancel&&"function"==typeof e.onCancel&&(n.wind("setCancelFunc",e.onCancel),n.wind("setCloseFunc",e.onCancel)),e.hideOnBlackoutClick&&n.on("click",function(){return!1}),!1!==e.width&&n.css({width:e.width}),e.mobileAdapt&&quizMobileView.adaptWind(n),n.wind("show")}n=null}function jConfirm(t,e,n){e=$.extend({width:500,html:!0,okText:"OK",cancelText:"Отмена",btnWidth:94,okClass:"btn-success",cancelClass:"",onOk:function(){},onCancel:function(){},headerText:!1,showClose:!0},e),(n=!0===n?$("#"+e.id):$("#jConfirm")).length&&(!1!==e.headerText?n.find(".iblk_header").show().find(".h5-fake").text(e.headerText):n.find(".iblk_header").hide(),!0===e.html?n.find("#jConfirmBody").html(t):n.find("#jConfirmBody").text(t),n.find("#jConfirmOk").attr("class","ant-btn ant-btn-primary wind-btn-apply "+e.okClass).text(e.okText).css("min-width",e.btnOkWidth||e.btnWidth),n.find("#jConfirmCancel").attr("class","ant-btn ant-btn-secondary wind-btn-cancel ml1 "+e.cancelClass).text(e.cancelText).css("min-width",e.btnCancelWidth||e.btnWidth),n.find(".wind-close")[e.showClose?"show":"hide"](),n.css({width:e.width}),n.wind("setApplyFunc",e.onOk),n.wind("setCancelFunc",e.onCancel),e.onClose&&"function"==typeof e.onClose?n.wind("setCloseFunc",e.onClose):n.wind("setCloseFunc",e.onCancel),n.wind("show"),e.onShow&&"function"==typeof e.onShow&&e.onShow()),n=null}function showDoneBox(t,e){t=$('<div class="pp_mes_wrap"><div class="pp_mes">'+t+"</div></div>");e=$.extend({width:380,top:"40%",fadeIn:100,showTime:2e3,fadeOut:500,cls:"",el:t},e),t.css({width:e.width,"margin-left":-1*Math.round(e.width/2),top:e.top,opacity:0}),e.cls.length&&t.addClass(e.cls),t.appendTo($("body")),t.animate({opacity:1},e.fadeIn,function(){setTimeout(function(){e.el.animate({opacity:0},e.fadeOut,function(){$(this).remove()})},e.showTime)}),t=null}function goTo(t){window.location.href=window.baseUrl+t}function getUrl(){return window.location.href.replace(window.baseUrl,"")}function if_var_val(t,e,n){for(var i in e)if(t==i)return e[i=null];return i=null,n||!1}function plural(t,e,n,i){if(t<0&&(t*=-1),void 0===i)return 1==t?e:n;var a=t%10,o=t%100;return 1==t||1==a&&11!=o?(a=o=null,e):1<a&&a<5&&12!=o&&13!=o&&14!=o?(a=o=null,n):(a=o=null,i)}function strtr(t,e){for(var n in e)t=t.replace(new RegExp(n,"g"),e[n]);return n=null,t}function formatFileSize(t,e){if(0==t)return"0 байт";var n=(e=void 0===e?0:e)+1||3,e=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,e)).toFixed(n))+" "+["байт","KB","MB","GB","TB","PB","EB","ZB","YB"][e]}function reachYaGoal(t){if(isset(window.Ya)&&t){var e,n;if(isset(Ya.Metrika2))e=Ya.Metrika2.counters();else{if(!isset(Ya.Metrika))return void slackErrorDump(new Error("Error #4911"));e=Ya.Metrika.counters()}for(n in e)e.hasOwnProperty(n)&&(window["yaCounter"+e[n].id]?(window.hasTagWebvisor20?ym(e[n].id,"reachGoal",t):window["yaCounter"+e[n].id].reachGoal(t),consoleDbg("reachGoal "+t)):consoleDbg("notFound yaCounter"+e[n].id));e=n=null}}function reachGoalByAttr(t,e){reachYaGoal(t.attr(e))}function createLayerForBgImage(t,e){var n=t.children(".quiz-form__layer-for-bg-image");return n.length||(n=$('<div class="quiz-form__layer-for-bg-image"></div>')).appendTo(t).css("background-image","url("+e+")"),n}function updateQuizCssClasses(e,t,n,i,a,o){e.removeClass("quiz-form--v1"),e.removeClass("quiz-form--bg-img");var r=["light","dark"];r.forEach(function(t){e.removeClass("quiz-form--"+t)}),n?(e.addClass("quiz-form"),0<o&&e.addClass("quiz-form--v1"),0<=r.indexOf(i)&&e.addClass("quiz-form--"+i),"img"===i&&a&&(createLayerForBgImage(t,a),e.addClass("quiz-form--bg-img"))):e.removeClass("quiz-form")}function popoverForm(t){try{var e,n,i,a=$(t),o=a.closest(".blk"),r=a.closest(".blk_form_wrap"),s=$("#formPopover");s.children(".wind-body").children("form").hide(),r.hasClass("is_popover")&&(e=r.children("form.user_form"),a=r.hasClass("quiz-form"),e.length?e.appendTo(s).addClass("is_popover"):e=s.children("form[id=frm"+o.attr("id")+"]"),!e.length||(i=getIosVersion())&&11===i[0]&&i[1]<3&&(n=0,s.wind("setCloseFunc",function(){$("body").removeClass("ios-11-fix"),$(window).scrollTop(n)}),n=$(window).scrollTop(),$("body").addClass("ios-11-fix").css("top",-n)),updateQuizCssClasses(s,e,a,r.data("quiz-bg-type")||"",r.data("quiz-bg-url")||"",r.data("quiz-version")||0),a?(s.parent().css("overflow-y","auto"),quizMobileView.toQuizView(e)):s.parent().removeAttr("style"),1===(i=s.find(".user_form_regulation")).data("is-regulation-enabled")&&i.addClass("hidden"),e.length&&(reachGoalByAttr(e,"goal-popover"),s.children().hide(),e.show(),s.wind("show"),a&&(quizMobileView.getSmartHeader().recalcHeaderHeight(),quizWebHandler.adaptQuizContent(quizWebHandler.quizForm(e)),quizWebHandler.initAutoNextQuiz(e,r.data("quiz-version")||0))))}catch(t){consoleDbg(t)}return FE.run("popoverFormOpen"),!1}function initSlick(t){var e=t.children(".slider:first"),n=t.closest(".blk_box_slider");if(e.children(".slide").removeClass("hidden-slide"),e.hasClass("slick-initialized"))return e.slick("unslick"),void e.slick(adapterManager.slickOpt[n.attr("id")]);var i=t.children(".settings-slick:first"),t={touchMove:!1,infinite:!0,speed:parseInt(i.attr("slide-aspeed"))||300,dots:1===parseInt(i.attr("slide-circle")),customPaging:function(){return"<p>&nbsp;</p>"},arrows:1===parseInt(i.attr("slide-arrow")),nextArrow:'<div class="next-slide"><div></div></div>',prevArrow:'<div class="prev-slide"><div></div></div>',slidesToShow:1};1===parseInt(i.attr("slide-auto"))&&1!=i.attr("in-af")&&(t.autoplay=!0,t.autoplaySpeed=1e3*parseFloat(i.attr("slide-pspeed"))||2e3),"crossfade"==i.attr("slide-anim")&&(t.fade=!0,t.cssEase="linear"),e.slick(t),window.animManager.onScroll(),window.adapterManager.slickOpt[n.attr("id")]=t}function hideSectionPopup(t){var e=$("#popup_list > #"+t),n=e.hasClass("blk-section--ms-popup");if(/\?af_popup/i.test(window.location.href))return!1;e.removeClass("open"),window._isEditor||(e.find(".blk.blk_video .video.autoplay iframe, .blk_video.video--play iframe").each(function(){window.stopAutoPlayVideo($(this))}),window.userVideo.stopVideosInPopup(t)),reInitVideoIFrame(e);e=$("body");e.css("margin-right",0).removeClass("open_popup"),n&&e.removeClass("open-popup-ms"),$("body>.navbar>.navbar-inner").css("padding-right",0),FE.run("sectionPopup_hide")}function clickButtonLink(t,e,n){insertJavaScript(t,e,function(){var t=$(n);t.attr("href")&&("_blank"==t.attr("target")?window.open(t.attr("href")):window.location.href=t.attr("href"))})}function btnPopupWnd(t){var e=$(t).closest(".blk"),n=e.attr("id"),i=$("#btnPopupWnd"),t=i.attr("cur-blk"),e=e.find(".wnd_data:first");void 0!==t&&t==n||(t=parseInt(e.attr("wnd_width"))||600,"undefined"==typeof adapterManager||adapterManager.isPC()||(t=adapterManager.getSettings(adapterManager.type).window_popover_width),i.width(t),i.find(".wind-header h3, .wind-header .div_h3").text(e.find(".wnd_data_title").text()),i.find(".wind-body").html(e.find(".wnd_data_text").html()),i.attr("cur-blk",n),consoleDbg("btnPopupWnd: move content")),i.wind("show"),i=null,FE.run("popupWndOpen")}function showExpiredWind(t){$("#sessionExpired form#frmlogin").find("#frmlogin__magic").val(t),$("#sessionExpired").wind("show").find("#frmlogin__username").focus()}function ExpiredWindbeforeSend(){var t=$("#sessionExpired #frmlogin__password"),e=$("#sessionExpired #frmlogin__magic");t.val($.sha1($.sha1(t.val())+e.val()))}function truncate(t,e){return"string"!=typeof t||t.length<e?t:t.slice(0,e)}function arrayRemoveByName(t,e){var n=t.indexOf(e),e=!1;return-1!=n&&(t=t.splice(n,1),e=!0),n=null,e}function arrayInsertBeforeItem(t,e,n){var i=t.indexOf(e),e=!1;return-1!=i&&(t.splice(i,0,n),e=!0),i=null,e}function arrayInsertAfterItem(t,e,n){var i=t.indexOf(e),e=!1;return-1!=i&&(i==t.length-1?t.push(n):t.splice(i+1,0,n),e=!0),i=null,e}function arrayInsertItemUniq(t,e){-1==t.indexOf(e)&&t.push(e)}function arrayMoveItemBefore(t,e,n){return!(!arrayRemoveByName(t,e)||!arrayInsertBeforeItem(t,n,e))}function arrayMoveItemAfter(t,e,n){return!(!arrayRemoveByName(t,e)||!arrayInsertAfterItem(t,n,e))}function arraySubset(t,e,n){var i=t.indexOf(e),e=t.indexOf(n),n=[];return-1!=i&&-1!=e&&(e<i&&(i+=e,i-=e=i-e),n=t.slice(i,e+1)),i=e=null,n}function ajaxLoad(ops){var ajaxOptions={type:"POST",ops:ops,cache:!1,timeout:4e4,url:ops.fullUrl||window.baseUrl+ops.url,dataType:"json",data:ops.data||null,success:function(data){if(!this.ops.onBeforeSuccess||"function"!=typeof this.ops.onBeforeSuccess||this.ops.onBeforeSuccess(data,this.ops)){if(isset(data.error)&&("object"==typeof data.error.name?alert(data.error.name):alert(data.error)),data.html&&this.ops.block&&$(this.ops.block).html(data.html),isset(data.script))try{eval(data.script)}catch(ex){window.console&&window.dbgMode&&(console.log(ex),console.log("[_Ошибка JS_] "+ex.stack),alert("Смотри ошибку в консоли"))}this.ops.onSuccess&&"function"==typeof this.ops.onSuccess&&this.ops.onSuccess(data,this.ops),window.dbgMode&&console.log(data)}},error:function(t,e,n){onQueryAjaxError(t,e,n,{dataSerialized:ajaxOptions.data,url:ajaxOptions.url})}};return $.ajax(ajaxOptions)}function runRequestToAjaxAction(i){var a=i;a.url=window.baseUrl+i.url,a.dataType="json",a.success=function(t,e,n){if(i.onAlways&&"function"==typeof i.onAlways&&i.onAlways(),t.debug&&console.log("debug",t.debug),!t.error)return t.exception?(console.log("exception",t.exception),void alert("Wrong response from server #"+t.exception.code+". Watch info in console")):void(t.res&&1===parseInt(t.res)?i.onSuccess&&"function"==typeof i.onSuccess&&i.onSuccess(t.content):(console.log("unexpected",t),alert("Unexpected response from server #5810. Watch info in console")));alert("Ошибка №"+t.error.code+" "+t.error.message)},a.error=function(t,e,n){i.onAlways&&"function"==typeof i.onAlways&&i.onAlways(),onQueryAjaxError(t,e,n,{dataSerialized:a.data,url:a.url})},$.ajax(a)}function onQueryAjaxError(t,e,n,i){switch(i=i||{},window.console&&(i.isSuperman||window.dbgMode)&&console.log(e,n,t.status,t.responseText),e){case"timeout":alert("Ошибка! Нет связи с сервером. Проверьте подключение к интернету и попробуйте снова.");break;case"error":case"parsererror":mottorLogError("AJAX_ERROR_DEBUG #6563 Status: "+e+" Error: "+n,{response:t.responseText,dataSerialized:i.dataSerialized||!1,url:i.url}),i.isSuperman?alert("Извините, на сервере возникла ошибка!\n\nАдминистратор оповещен о проблеме и скоро всё исправит.\nПопробуйте снова через некоторое время."):alert("Извините, на сервере возникла ошибка!\n\nПожалуйста, напишите нам в тех-поддержку support@lpmotor.ru")}}function scrollTop(){return document.body.scrollTop||document.documentElement.scrollTop}function cancelEvent(t){if(!(t=t||window.e))return!1;for(;t.originalEvent;)t=t.originalEvent;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1}function getURLParam(t){return decodeURI((RegExp(t+"=(.+?)(&|$)").exec(location.search)||[,null])[1])}function getURLParam2(t){t=RegExp(t+"=(.+?)(&|$)").exec(location.search);return null!==t&&void 0!==t[1]?t[1]:null}function insertPixel(t){$(document).ready(function(){$("body").append($('<img src="'+t.replace("{order_id}",getURLParam("order_id"))+'" width="1" height="1" style="position: absolute;left:-9999px;"/>'))})}function stVisit(){var t=getCookie("LPmagCode"),e={ref:document.referrer};void 0===t?e.new=1:e.id=t,$.ajax({url:window.baseUrl+"stat/visit",data:e,cache:!1,success:function(t){var e,n=JSON.parse(t);if(console.log(n),void 0!==n.res)switch(n.res){case"0":console.log(n.mes);break;case"1":void 0!==n.id?stVisitPropagate(n.id):void 0!==(e=getCookie("_magCode"))&&stVisitPropagate(e)}}})}function stVisitPropagate(t){var e,n,i=["lpmotor.ru","lpmotor.org","bm360.ru","admin.lpmotor.ru"];for(n in i)(e=document.createElement("img")).className="mag_img",e.src=("https:"==document.location.protocol?"https:":"http:")+"/"+i[n]+"/stat/magcode.png?id="+t,e.onload=function(){this.parentNode.removeChild(this)},document.getElementsByTagName("body")[0].appendChild(e);e=n=i=null}function stLpcidPropagate(){var t=getCookie("_lpcid");if(void 0!==t){var e,n,i=document.getElementsByTagName("body")[0];for(e in window._lpcid_hosts)window._lpcid_hosts[e].replace(/^http(|s):\/\//,"")!=document.location.host&&((n=new Image).className="mag_img",n.onload=stVisImgRemove,n.src=window._lpcid_hosts[e]+"/stat/cid.gif?v="+t+"&t="+ +new Date,i.appendChild(n));e=n=i=null}}function stVisImgRemove(){this.parentNode&&this.parentNode.removeChild(this)}function stVisImgLoaded(){stLpcidPropagate(),this.parentNode&&this.parentNode.removeChild(this)}function stVis(t){void 0===t&&(t="landing");var e=new Image,n=getURLParam2("p");e.className="mag_img",e.onload=stVisImgLoaded,e.src=("https:"==document.location.protocol?"https:":"http:")+"//"+document.location.host+"/stat/vis.gif?type="+t+"&ref="+document.referrer+(null===n?"":"&p="+encodeURI(n))+"&t="+ +new Date,document.getElementsByTagName("body")[0].appendChild(e),e=null}function animInit(){}function createFrame(t,e){var n=document.createElement("iframe");n.className="mag_frame",n.src=t+"/tracer/frame/cid:"+e+"?_="+ +new Date,document.body.appendChild(n)}function gaSpread(t){console.log("gaSpread...");var e=getCookie("_ga_cid");if(void 0!==e)switch(console.log("gaSpread=",t),createFrame("//admin.lpmotor.ru",e),t){case"lpmotor":createFrame("//bm360.ru",e);break;case"bm360":createFrame("//lpmotor.ru",e)}}function analyticSendEvent(t,e){if(!window.carrotquest)return!1;if(void 0!==(e=void 0===e?{}:e).delay&&0<e.delay)return setTimeout(function(){analyticSendEvent(t,e)},e.delay),delete e.delay,!0;if(void 0!==e.check_cookie){var n=getCookie(e.check_cookie);if(void 0===n)return!1;if(void 0!==e.value_cookie&&e.value_cookie!=n)return!1}if(void 0!==e.once&&!0===e.once)try{var i=localStorage.getItem("analytic_event");if(void 0!==(i=null==i||void 0===i?{}:JSON.parse(i))[t])return!1;i[t]=1,localStorage.setItem("analytic_event",JSON.stringify(i))}catch(t){console.log(t)}carrotquest.track(t,e),dbgMode&&console.log("send event [",t,"] ",e)}function lockScreen(t,e){e=extend({show_animation:!1,show_timer:!1,show_btn_close:!1,delay_before:0,css_class:"",hide_bg:!1,v2:!1,v3:!1},e);var n={},i=$('<div class="locker" style="display: none"><div class="locker-background"></div><div class="locker-content"><div class="locker-btn-list"><div class="locker-close-btn"></div></div><div class="locker-animation"></div><div class="locker-text"></div><div class="locker-timer"></div></div></div>');e.v2&&(i=$('<div class="screen-lock"> <div class="screen-lock__loader-wrap"> <div class="screen-lock__loader"></div><div class="screen-lock__text"></div> </div> </div>'),e.bg&&i.find(".screen-lock__loader-wrap").css("background",e.bg)),e.v3&&(i=$('<div class="editor_lock_sceen" id="editor_loading_screen1" style="z-index: 999999; top:0;left:0; position: fixed; width: 100%; height: 100%; background: rgba(255,255,255,.9);">\n            <div class="editor_lock_sceen-info" style="width: 300px;position:absolute;top:50%;left:50%;margin: -37px 0 0 -150px;">\n                <svg style="margin-left: 100px;" width="100" height="21" viewBox="0 0 400 85" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M396.646 17.1597C395.021 15.0294 392.178 14.1772 388.523 14.1772H387.305C377.964 14.1772 362.532 19.2899 362.532 38.8886V82.3464C362.532 83.1985 363.344 84.0507 364.156 84.0507C367.405 84.0507 370.248 83.1985 371.872 81.9204C373.903 80.6422 375.121 78.5119 375.121 75.5295V38.8886C375.121 29.5153 383.244 26.959 387.305 26.959H398.27C399.488 26.959 400.301 26.1069 399.894 24.8287C399.488 20.9942 397.864 18.8639 396.646 17.1597Z" fill="#0B63F6"/>\n                    <path d="M65.3705 14.1772H64.5324C58.6658 14.1772 51.1231 15.8815 45.6755 21.4202C40.228 15.8815 32.2662 14.1772 26.8187 14.1772H25.5615C15.9236 14.1772 0 19.2899 0 38.8886V82.3464C0 83.1985 0.838082 84.0507 1.67617 84.0507C5.0285 84.0507 7.9618 83.1985 9.63796 81.9204C11.7332 80.6422 12.9903 78.5119 12.9903 75.5295V38.8886C12.9903 29.5153 21.3711 26.959 25.5615 26.959H25.9806C30.59 26.959 38.5518 29.5153 38.5518 38.8886V82.3464C38.5518 83.1985 39.3899 84.0507 40.228 84.0507C43.5803 84.0507 46.5136 83.1985 48.1898 81.9204C50.285 80.6422 51.5421 78.5119 51.5421 75.5295V38.8886C51.5421 29.5153 59.923 26.959 64.1134 26.959H64.5324C69.1419 26.959 77.1037 29.5153 77.1037 38.8886V82.3464C77.1037 83.1985 77.9418 84.0507 78.7798 84.0507C82.1322 84.0507 85.0655 83.1985 86.7416 81.9204C88.8368 80.6422 90.094 78.5119 90.094 75.5295V38.8886C90.9321 19.2899 75.4275 14.1772 65.3705 14.1772Z" fill="#0B63F6"/>\n                    <path d="M217.543 28.983C218.865 28.983 219.747 28.1549 219.747 26.9128C219.306 23.6004 218.425 21.5302 216.662 19.874C214.899 17.8038 211.814 16.5617 207.407 16.5617H202.56V2.07021C202.56 0.828085 201.678 0 200.356 0C196.831 0.414043 194.187 0.828085 192.424 2.07021C190.22 3.31234 188.898 5.7966 188.898 8.69489V16.9757H174.355C173.033 16.9757 172.152 17.8038 172.152 19.046C172.593 22.3583 173.474 24.0145 174.796 26.0847C176.559 28.1549 179.203 29.397 182.729 29.397H188.898V64.1766C188.898 70.3872 190.661 74.9417 193.746 78.6681C196.831 81.9804 201.238 83.6366 207.407 84.0506C217.103 84.0506 218.865 78.254 219.306 74.5277C219.306 73.2855 218.425 72.4574 217.103 72.4574H210.052C207.407 72.4574 205.645 71.6294 204.323 70.3872C203 69.1451 202.56 66.6609 202.56 63.3485V28.983H217.543Z" fill="#0B63F6"/>\n                    <path d="M270.342 28.983C271.58 28.983 272.405 28.1549 272.405 26.9128C271.993 23.6004 271.167 21.5302 269.517 19.874C267.867 17.8038 264.979 16.5617 260.853 16.5617H256.315V2.07021C256.315 0.828085 255.49 0 254.252 0C250.952 0.414043 248.476 0.828085 246.826 2.07021C244.763 3.31234 243.526 5.7966 243.526 8.69489V16.9757H229.911C228.673 16.9757 227.848 17.8038 227.848 19.046C228.261 22.3583 229.086 24.0145 230.324 26.0847C231.974 28.1549 234.449 29.397 237.75 29.397H243.526V64.1766C243.526 70.3872 245.176 74.9417 248.064 78.6681C250.952 81.9804 255.077 83.6366 260.853 84.0506C269.93 84.0506 271.58 78.254 271.993 74.5277C271.993 73.2855 271.167 72.4574 269.93 72.4574H263.329C260.853 72.4574 259.203 71.6294 257.965 70.3872C256.728 69.1451 256.315 66.6609 256.315 63.3485V28.983H270.342Z" fill="#0B63F6"/>\n                    <path d="M136.202 14.1772C117.308 14.1772 102.278 29.9414 102.278 49.114C102.278 68.2865 117.308 84.0507 136.202 84.0507C155.097 84.0507 170.126 68.2865 170.126 49.114C170.126 29.9414 155.097 14.1772 136.202 14.1772ZM136.202 71.695C124.608 71.695 115.161 61.4696 115.161 49.114C115.161 36.7583 124.608 26.5329 136.202 26.5329C147.797 26.5329 157.244 36.7583 157.244 49.114C157.244 61.4696 147.797 71.695 136.202 71.695Z" fill="#0B63F6"/>\n                    <path d="M315.443 14.1772C297.113 14.1772 282.532 29.9414 282.532 49.114C282.532 68.2865 297.113 84.0507 315.443 84.0507C333.774 84.0507 348.355 68.2865 348.355 49.114C348.355 29.9414 333.357 14.1772 315.443 14.1772ZM315.443 71.695C304.195 71.695 295.03 61.4696 295.03 49.114C295.03 36.7583 304.195 26.5329 315.443 26.5329C326.691 26.5329 335.857 36.7583 335.857 49.114C335.857 61.4696 326.691 71.695 315.443 71.695Z" fill="#0B63F6"/>\n                </svg>\n                <div style="border-radius: 2px; overflow: hidden; width: 300px; height: 4px; margin-top: 40px;">\n                    <div class="bar">\n                        <div class="progress"></div>\n                    </div>\n                </div>\n            </div>\n        </div>')),e.hide_bg&&i.find(".locker-background").hide(),0<e.css_class.length&&i.addClass(e.css_class);var a=generateUUID();return i.attr("id",a),i.find(".locker-close-btn:first").bind("click",function(){unlockScreen(a)}),void 0!==t&&0<t.length&&(e.v2?i.find(".screen-lock__text").text(t):(n["l-show-text"]=!0,i.find(".locker-content .locker-text:first").html(t))),!0===e.show_animation&&(n["l-show-animation"]=!0),!0===e.show_timer&&(n["l-show-timer"]=!0),!0===e.show_btn_close&&(n["l-show-btn-close"]=!0),0<Object.keys(n).length&&(n["l-show-content"]=!0,i.addClass(Object.keys(n).join(" "))),$("body").append(i),0<e.delay_before?(e=setTimeout(function(){i.show()},e.delay_before),i.attr("timeout_id",e)):i.show(),i.attr("id")}function unlockScreen(t){var e=$("");void 0!==(e=void 0!==t?$("#"+t):$("body").children(".locker:last")).attr("timeout_id")&&clearTimeout(e.attr("timeout_id")),e.remove()}function processingBlockInCells(t){"undefined"!=typeof adapterManager&&adapterManager.updateCells(t.closest(".blk_container")),(!0===window._isEditor||"undefined"!=typeof adapterManager&&adapterManager.isEditor())&&t.find(".blk_image_ext").each(function(){pages_editor.setZoomImgExt($(this).attr("id"),$(this).find("img:first"))}),t.find(".blk_image").each(function(){var t=$(this).find("img:first"),e=$(this).parent().width(),n=t.width(),i=t.height();e<=t.attr("prod_w")?(e=(e=e<2?2:e)>t.attr("real_w")?t.attr("real_w"):e,t.css({width:e,height:"auto"}),t.height()<2&&(e=Math.ceil(2*n/i),t.css({width:e}))):t.css({width:t.attr("prod_w"),height:"auto"}),t=null}),t.find(".blk_video").each(function(){var t=$(this).find("iframe:first"),e=$(this).parent().width();e<=parseInt(t.css("width"))?(e=(e=e<20?20:e)>t.attr("data-width")?t.attr("data-width"):e,t.css({width:e})):t.css({width:t.attr("data-width")}),t=null})}function reInitVideoIFrame(t){(t.hasClass("blk_video")?t:t.find(".blk_video")).each(function(){var t=$(this).find(".video iframe:first");t.attr("src",t.attr("src"))})}function toggleBtnLocker(t){var e=t.find(".btn-locker"),n=t.attr("disabled");void 0!==n&&!1!==n?(t.removeAttr("disabled"),e.hide()):(t.attr("disabled",!0),e.show())}function initFileFields(s,d,t){window.maxPostSize=t,window._isEditor?$(document).on("click",".user_form .userfiles_btn",function(t){return t.preventDefault(),!1}):($(".user_form .userfiles_input").on("click",function(){$(this).closest(".field_wrap").find(".userfiles_btn input[type=file]").click()}),$(".user_form .userfiles_clear").on("click",function(t){t.stopPropagation();var e=$(this).closest(".field_wrap").find(".userfiles_btn input[type=file]");confirm("Удалить загруженный вами файл?")&&(e.val(null).trigger("change",t),e=null)}),$(".user_form .userfiles_btn input[type=file]").on("change",function(t){var e,n=$(this),i=n.closest(".field_wrap"),a=i.find(".userfiles_selected_text"),o=i.find(".userfiles_btn");if(toggleBtnLocker(o),n.val()){var r="Файл выбран";if(this.files&&this.files[0]){if(0<d&&this.files.length>d)return n.val(null),i=n=null,alert("Можно выбрать не более "+d+" файл"+plural(d,"а","ов","ов")),toggleBtnLocker(o),!1;for(r=[],e=0;this.files.length>e;e++){if(0<s&&this.files[e].size>s)return n.val(null),i=n=null,alert("Вы можете загрузить файл размером не более "+formatFileSize(s)),toggleBtnLocker(o),!1;r.push(htmlspecialchars(this.files[e].name))}r=r.join(", ")}a.text(r).attr("title",r),i.addClass("userfiles_selected")}else a.text("").attr("title",""),a.removeAttr("style"),i.removeClass("userfiles_selected");i.find(".ui_error").hide(),toggleBtnLocker(o),i=n=o=null}))}function includeFiles(t){var i=[],a=[],e=[],n=0,o=0,r=0;function s(t){-1==e.indexOf(t.href)&&(e.push(t.href),e.length>=i.length&&FE.runAndClr("css_dynamically_loaded"),r++,d())}function d(){return r==o&&(FE.run("all_files_dynamically_loaded"),1)}function l(t){var e=document.createElement("script");document.head.appendChild(e),e.onload=function(){r++,++n==a.length?d():d()||l(a[n])},e.src=t}!function t(e){for(var n in e)"css"==n?isArray(e[n])?(o+=e[n].length,e[n].forEach(function(t){i.push(e[n])})):(o++,i.push(e[n])):"js"==n?isArray(e[n])?(o+=e[n].length,e[n].forEach(function(t){a.push(t)})):(o++,a.push(e[n])):"object"==typeof e[n]&&t(e[n])}(t),i.length&&i.forEach(function(t){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",t),e.onload=function(){s(e)},e.addEventListener&&e.addEventListener("load",function(){s(e)},!1),e.onreadystatechange=function(){var t=e.readyState;"loaded"!==t&&"complete"!==t||(e.onreadystatechange=null,s(e))},document.getElementsByTagName("head")[0].appendChild(e)}),a.length&&l(a[n]),d()}function initAnchors(){$(document).on("click","a[href*=#]",function(t){var e=$(this).attr("href"),n=e.match(/#(.*)$/i),i=!1,a=ge("fixed-sections"),a=null==a?0:a.offsetHeight;if(null!==n&&n[1]){n=$("#"+n[1]);if(n.length?($("html,body").stop().animate({scrollTop:n.offset().top-a},600),i=!0):(e=e.replace(new RegExp("^#","gi"),""),(e=$("a[name="+e+"]")).length&&($("html,body").stop().animate({scrollTop:e.offset().top-a},600),i=!0)),i)return t.preventDefault(),!1}})}function sendSlackMessage(t,e,n){window.$&&(e={text:e,username:n=void 0===n?"Browser Debug":n},(n=new XMLHttpRequest).open("POST",t,!0),n.send(JSON.stringify(e)))}function slackDebug(t){sendSlackMessage("https://hooks.slack.com/services/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",t)}function slackErrorDump(t,e){console.error(t);e={text:"[JS] "+t.toString(),username:e};slackDebug(JSON.stringify(e)),window.Sentry&&Sentry.captureException(t)}function mottorLogError(t,e){try{if(e="object"==typeof e?e:{},("string"==typeof t||t instanceof String)&&(e.url&&(t+=" URL: `"+e.url+"`"),e.dataSerialized&&(t+=" DATA: `"+e.dataSerialized+"`"),e.response&&(t+=" RESPONSE: `"+e.response+"`"),t=new Error(t)),window.Sentry){var n={};return e.tags&&"object"==typeof e.tags&&(n.tags=e.tags),e.extra&&"object"==typeof e.extra&&(n.extra=e.extra),e.level&&"string"==typeof e.level&&(n.level=e.level),void Sentry.captureException(t,n)}var i,n={text:"[JS] "+t.toString(),username:i=e.username?e.username:i};slackDebug(JSON.stringify(n))}catch(t){consoleDbg(t)}}function checkProtocolInUrl(t){return!!new RegExp("^http(s*)://").test(t)&&2===t.split("://").length}function inputUrlProcessing(t){return!(6<(t=t.trim()).length&&checkProtocolInUrl(t))&&3<t.length&&0==/^http/.test(t)?"https://"+t:t}function ucfirst(t){return t.charAt(0).toUpperCase()+t.substr(1,t.length-1)}function lcfirst(t){return t.charAt(0).toLowerCase()+t.substr(1,t.length-1)}function convertUnderScoreToCamelCase(t){return lcfirst(t=convertUnderScoreToStudlyCaps(t))}function convertDateFromDbToIsoFormat(t){return t.replace(" ","T")+".000Z"}function F_wind(t,e){this.ops=e,this.$el=$(t),this.params={},this.hidePrevWnd=!0,this.whiteBg=!1,this.closeOutside=!1,this.isShown=!1,this.$btnClose=this.$el.find("a.wind-close"),this.$btnApply=this.$el.find(".wind-btn-apply:first"),this.$btnCancel=this.$el.find(".wind-btn-cancel:first"),this.$el.on("click","a.wind-close, .wnd-hide",this,function(t){t.preventDefault(),t.data.clickBtnClose()}),this.$btnApply.click(this,function(t){t.preventDefault(),t.data.clickBtnApply()}),this.$btnCancel.click(this,function(t){t.preventDefault(),t.data.clickBtnCancel()}),this.applyFunc=function(){return!0}}function showWind(t,e){e=$.extend({},{width:500,title:"Заголовок",cont:""},"object"==typeof e&&e),e.w,e.title,e.cont}function shakeWnd(t){var e=(t=$(t)).css("position");t.css("position","relative"),t.animate({left:-10},50,function(){$(this).animate({left:10},100,function(){$(this).animate({left:0},50,function(){$(this).css("position",e),e=null})})})}function ModuleButtonUp(t){this.settings_arr=[],this.$btn_wrap=$("#button_up_wrap"),this.settings_arr=$.map(t,function(t,e){return[t]}),this.drawButton(),this.bindEvent()}window.escapeHtml=function(t){var e=typeof t;return"number"==e?t:(t="string"!=e?null==t?"":t.toString():t).replace(/[&<>"']/g,function(t){return escapeHtmlEntityMap[t]})},window.random=function(t){return Math.ceil(rnd()*t)},window.consoleDbg=function(t){window.dbgMode&&window.console&&console.log(t)},window.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},window.getRandomString=function(t,e){t=t||7;for(var n=(e=e||"qwertyuiopasdfghjklzxcvbnm0123456789").length,i="",a=0;a<t;a++){for(;;){var o=e[getRandomInt(0,n-1)];if(i.substr(-1,1)!=o)break}i+=o}return i},window.isset=function(t){return void 0!==t},window.clone=function(t){if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){for(var e=[],n=0,i=t.length;n<i;n++)e[n]=clone(t[n]);return e}if(t instanceof Object){var a,e={};for(a in t)t.hasOwnProperty(a)&&t[a]!==document&&(e[a]=clone(t[a]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")},window.initDropdown=function(){window.curDropDown=null;var t=$("html");t.click(function(){$(".dropdown_part:visible").hide()}),t.find(".dropdown_part").click(function(t){$(this).is(":visible")&&t.stopPropagation()}),t.find(".joined").click(function(t){$(this).closest(".sel_wrap").find(".dropdown_part").is(":visible")&&t.stopPropagation()})},FE.add("onready","initDropdown()"),window.jQuery&&(jQuery.fn.outerHTML=function(t){return t?this.before(t).remove():jQuery("<div></div>").append(this.eq(0).clone()).html()}),$("body").popover({trigger:"hover",selector:".has_popover",placement:"top",html:"true",delay:"100"}),$(document).on("click",".btn-smart",function(){var t;$(this).data("button")||(t=$(this).attr("data-loading"),$(this).button({loadingText:t||"Загрузка..."})),$(this).button("loading")}),window.rgb2hex=function(t){return(t=t&&t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):null},window.getUrlVars=function(){var t=window.location.href.slice(window.location.href.indexOf("?")+1);if(""==t||window.baseUrl==t)return t=null,{};for(var e,n={},i=t.split("&"),a=0;a<i.length;a++)n[(e=i[a].split("="))[0]]=e[1];return e=i=t=null,n},$(document).on("click",".wrap-for-formPopover",function(t){$("#formPopover").wind("hide")}),window.showSiteDemoWarning=function(){jAlert('<h2 class="fs22">Отправить заявку в режиме демонстрации невозможно</h2><div class="mt2 fs16">Прием заявок и оплат доступен только на опубликованном сайте.</div>',{id:"j_lead_alert",showCloseBtn:!0,btnCls:"btn",okText:"Понятно",width:470,btnWidth:"auto",hideOnBlackoutClick:!0,html:!0,alertClass:"site-demo-alert",mobileAdapt:!adapterManager.isPC(),onOk:function(){$("#wind_container").removeClass("j_alert")}})},window.number_format=function(t,e,n,i){t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var a=isFinite(+t)?+t:0,t=isFinite(+e)?Math.abs(e):0,e=void 0===i?" ":i,i=void 0===n?".":n,n="";return 3<(n=(t?function(t,e){e=Math.pow(10,e);return""+Math.round(t*e)/e}(a,t):""+Math.round(a)).split("."))[0].length&&(n[0]=n[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,e)),(n[1]||"").length<t&&(n[1]=n[1]||"",n[1]+=new Array(t-n[1].length+1).join("0")),n.join(i)},window.guid=function(){return uuid.v4().replace(/-/g,"")},window._lpcid_hosts=["http://lpmotor.ru","http://lpmotor.org","http://bm360.ru","https://admin.lpmotor.ru"],window.userHasTag=function(t){return void 0!==window.__user_tags&&void 0!==window.__user_tags[t]},window.userAddTag=function(n,t){void 0!==window.__user_tags&&void 0===window.__user_tags[n]&&window.$&&$.ajax({url:baseUrl+"tests/ajax/do:add_tag",data:{tag:n},dataType:"json",method:"post",_funcParams:{callback:t||!1},success:function(t){var e=!1;t.res&&1==t.res&&t.cnt&&0<t.cnt&&(window.__user_tags[n]=1,e=!0),"function"==typeof this._funcParams.callback&&this._funcParams.callback.apply(this,[e,t])}})},function(i){var a=$("#popup_list"),o={},r=null;function s(t){console.error("Error num: [#4481]. Не удалось получить всплывающую секцию. Сервер вернул: ",t)}function d(t){var e=o[t],n=e.hasClass("blk-section--ms-popup"),i=$("body"),a=i.width();i.addClass("open_popup"),n&&i.addClass("open-popup-ms");a=i.width()-a;i.css("margin-right",a),$("body>.navbar>.navbar-inner").css("padding-right",a),void 0!==window.module_geotarget&&window.module_geotarget.city.length&&e.find(".geotarget_module").text(window.module_geotarget.city).removeClass("hidden"),e.addClass("open"),e.hasClass("initSlick")||(e.find(".blk_box_slider_self").each(function(){initSlick($(this))}),e.addClass("initSlick")),e.hasClass("blk-section--ms-popup")&&e.find(".ms-popup-section__close").off("click").one("click",function(){hideSectionPopup(t)}),FE.run("show_section_popup",{section_id:t})}function l(t){try{var e=JSON.parse(t)}catch(t){return(new $.Deferred).reject(t)}return e.data||(new $.Deferred).reject(t)}i.stopAutoPlayVideo=function(t){t.attr("src",""),t.closest(".blk").removeClass("video--play")},i.playVideo=function(t,e){t.attr("src",t.attr("src-temp")),window.afItemsObserver&&afItemsObserver.blockVideoInAf(t)&&afItemsObserver.triggerStartedVideo(t,e),t.closest(".blk").addClass("video--play")},a.find(".blk_section").each(function(){o[$(this).attr("id")]=$(this)}),i.showSectionPopup=function(n){function t(){i._isEditor||($("#"+n).find(".blk.blk_video .video.autoplay iframe:first").each(function(){i.playVideo($(this),!0)}),window.userVideo.initVideosInPopup(n))}var e;isset(o[n])?(d(n),t()):(e=n,r=lockScreen("Секундочку...",{show_animation:!0}),$.get(i.baseUrl+"/"+window.siteId+"/api/popup",{popup_id:e},"JSON").then(l).then(function(t){var e,e=(e=t,t=n,e=$(e),a.append(e),o[t]=e);return e.find(".blk_yandex_map").each(function(){var t="init_ymap_"+$(this).attr("id");window[t]?window[t]():console.error("Функция "+t+" не была найдена в window. [#4502]")}),window.animManager.initAnimationForSectionPopup(e),window.adapterManager.initFotorama(),unlockScreen(r),r=null,quizWebHandler.initQuiz(e,!0),loadAsyncImages(),n},s).then(d).then(t)),FE.run("sectionPopupOpen")},i.registerPopup=function(t){var e=$("#"+t);e.length||console.error("Не найдена секция #"+t+". Ошибка [#4482]"),o[t]=e}}(window),function(a){"use strict";function i(t){var e=a(t).on(n,this.toggle);a("html").on(n,function(t){FE.run("hide_custom_dropdown",t,{$btn:e,$wrap:e.parent().removeClass("open")})})}var o=".custom-dropdown-btn",n="click.custom-dropdown.data-api";function r(t){a(o).each(function(){FE.run("hide_custom_dropdown",t,{$btn:a(this),$wrap:s(a(this)).removeClass("open")})})}function s(t){return t.parent()}i.prototype={constructor:i,toggle:function(t){var e,n,i=a(this);if(!i.is(".disabled, :disabled"))return n=(e=s(i)).hasClass("open"),r(t),n||(0 in document.documentElement,FE.run("show_custom_dropdown",t,{$btn:i,$wrap:e.toggleClass("open")})),i.focus(),!1},keydown:function(t){var e,n,i;if(/(38|40|27)/.test(t.keyCode)&&(e=a(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")))return!(i=(n=s(e)).hasClass("open"))||i&&27==t.keyCode?(27==t.which&&n.find(o).focus(),e.click()):void 0}};var t=a.fn.customDropdown;a.fn.customDropdown=function(n){return this.each(function(){var t=a(this),e=t.data("customDropdown");e||t.data("customDropdown",e=new i(this)),"string"==typeof n&&e[n].call(t)})},a.fn.customDropdown.Constructor=i,a.fn.customDropdown.noConflict=function(){return a.fn.customDropdown=t,this},a(document).on(n,r).on(n,".custom-dropdown-menu",function(t){t.stopPropagation()}).on(n,o,i.prototype.toggle).on("keydown.custom-dropdown.data-api",o,i.prototype.keydown)}(window.jQuery),$("#popup_list").on("click",function(t){var e=$("body"),t=$(t.target);if(e.hasClass("popup_choose"))return!0;if(e.hasClass("open-popup-ms")&&!(0!==t.closest(".blk-section--ms-popup").length)){e=$(".blk-section--ms-popup.open");if(e.length)return hideSectionPopup(e.attr("id")),!1}return t.hasClass("section_popup")?(hideSectionPopup(t.attr("id")),!1):void 0}),0<$("#gift-for-user").length&&setInterval(function(){var t,e=$("#gift-for-user img");0<e.length&&(t=e.attr("classes-animate"),e.addClass(t),setTimeout(function(){e.removeClass(t)},1e3))},3e3),window.sliderEditorExtend=function(t){t.prototype.reinitFotorama=function(e){var t=e.closest(".blk_section").hasClass("is_absolute"),n={};return t&&(n.height=e.closest(".blk.blk_slider").height()),setTimeout(function(){var t=e.data("fotorama");null!=t&&null!=t.activeIndex&&t.resize(n).show(t.activeIndex)}),e}},Math.radians=function(t){return t*Math.PI/180},Math.degrees=function(t){return 180*t/Math.PI},function(){var t=$(".widgets__all-sites");t.length&&t.on("click",function(){window.sessionStorage.clear("widgets/siteId")})}(),function(d){d.__lpmExtensions={isInited:!1,get:function(o,t){consoleDbg("Step:1 load scripts & html for extension modal by "+o);var e=1,r=t||d.siteId;d.dbgMode&&(e=(new Date).getTime());var s=lockScreen("Секундочку...",{show_animation:!0});return $.get(window.baseUrl+r+"/settings/ajax/frm:get_extension",{v:e,exName:o,includeMain:intval(0==intval(isset(d.__lpmExtensions)&&d.__lpmExtensions.isInited))}).then(function(t){return unlockScreen(s),consoleDbg("Step:2 scripts for extension modal is loaded"),e=JSON.parse(t),n=o,i=r,a=new $.Deferred,FE.add("__lpmExtensions/"+n+"/included",function(){consoleDbg("Step:4 scripts is included, include html"),d.__lpmExtensions.appendHtml(e.res.html),consoleDbg("Step:5 __lpmExtensions.run by "+n+" for "+i),$.when(d.__lpmExtensions.run(n,i)).then(function(t){consoleDbg("Step:15 extension is ready"),consoleDbg(t),a.resolve(t)})}),consoleDbg("Step:3 include scripts"),includeFiles(e.res),a;var e,n,i,a})}}}(window),window.sendSentryError=function(e,n){window.Sentry&&Sentry.withScope(function(t){null!=n&&t.setExtra("data",n),Sentry.captureException(new Error(e))})},window.formatMoney=function(t){"number"!=typeof t&&(t=parseFloat(t));var e=Math.round(t),n=t.toFixed(1),i=t.toFixed(2),t=parseFloat(n);return t!==parseFloat(i)?i:e!==t?n:e.toFixed(0)},window.convertUnderScoreToStudlyCaps=function(t){for(var e=(t=t.toLowerCase()).split("_"),n="",i=0;e.length>i;i++){var a=e[i];""!==a&&(n+=ucfirst(a))}return n},window.preloadSvgIconPack=function(){(new Image).src=window.mottorUiSvgSpritePath},window.getSvgIconPath=function(t){return null==t?"":window.mottorUiSvgSpritePath+"#"+t},window.isVueDataObject=function(t){return null!=t&&t.hasOwnProperty("__ob__")&&"Observer"===t.__ob__.constructor.name},window.getUserIdFromUrl=function(){var t=window.location.href.match(/user:(\d+)/);return null!==t?t[1]:0},window.getEnvironment=function(){return window.process&&process.env&&process.env.NODE_ENV?process.env.NODE_ENV:""},window.hideServiceNotification=function(t,e){userAddTag(t),$(e).closest(".service-notification").remove()},window.hasArrayProperty=function(t,e){return t.hasOwnProperty(e)&&Array.isArray(t[e])},function(){"use strict";var n,i=!1,a=!1,o=!1,r=0,s=null,d=null,l=null,c=null,u=null;function p(t){var e;l={w:$(this).get(0).naturalWidth,h:$(this).get(0).naturalHeight},s=n?(t=t.firstElementChild,(e=$('<div class="svg_wrap"><div class="svg_container"></div></div>')).find(".svg_container").append(t),e):$(this),r=a.width(),i.show(),$("html").addClass("wind_opened"),a.css("margin-right",a.width()-r),c={w:i.width()-40,h:i.height()-40},u={w:0,h:0,x:0,y:0},l.w>c.w&&l.h>c.h&&(l.h=c.w*l.h/l.w,l.w=c.w),l.w<=c.w&&l.h<=c.h?(u.w=l.w,u.h=l.h,u.x=Math.floor((c.w-l.w)/2)+20,u.y=Math.floor((c.h-l.h)/2)+20):l.w>c.w&&l.h<=c.h?(u.w=c.w,u.h=Math.floor(u.w*l.h/l.w),u.x=20,u.y=Math.floor((c.h-u.h)/2)+20):l.w<=c.w&&l.h>c.h&&(u.h=c.h,u.w=Math.floor(u.h*l.w/l.h),u.x=Math.floor((c.w-u.w)/2)+20,u.y=20),n&&(e=Math.min(c.w,c.h),u.w=e,u.h=e,u.x=Math.floor((c.w-e)/2)+20,u.y=Math.floor((c.h-e)/2)+20),s.appendTo(i).css({position:"absolute",display:"block",top:d.y,left:d.x,width:d.w,height:d.h}).animate({left:u.x,top:u.y,width:u.w,height:u.h},300)}function f(t){var e=t.split("/-/");if(1<e.length){var n=e[e.length-1],i=n.lastIndexOf(".");return e[0]+n.substring(i)}i=/\/f(.\w+)$/;return i.test(t)?t.replace(i,"$1"):t}function t(t){var e=t.find("img.has_enlarger:first, .svg_wrap.has_enlarger:first");(t=e).length&&(e=t.attr("src").split(".").pop(),n="svg"===e,a=a||$("body"),o=o||$(window),i||((i=$('<div id="image-enlarge-cont"></div>')).appendTo(a),i.click(function(){s&&s.animate({top:d.y,left:d.x,width:d.w,height:d.h},300,function(){i.hide(),$("html").removeClass("wind_opened"),a.css("margin-right",0),s.remove(),s=!1,i.empty()})})),e=t.offset(),d={w:t.width(),h:t.height(),x:e.left,y:e.top-scrollTop()},n?$.get(f(t.attr("src")),p):$(new Image).unbind("load").bind("load",p).attr("src",f(t.attr("src"))))}FE.add("onload",function(){adapterManager.isPC()&&!isIos()?$(".blk_image_ext .img-ext-magnifier").click(function(){return t($(this).closest(".img_container")),!1}):$(".blk_image_ext .img-container--enlarge").click(function(){return t($(this)),!1}),$(".blk_image .img-container--enlarge").click(function(){return t($(this)),!1})})}(),function(){"use strict";!function(){if(browser.android){var t,e=window.buildScriptsUrl+"web/user/fonts/"+"liberation_serif/LiberationSerif",n={Regular:{style:"normal",weight:400},Italic:{style:"italic",weight:400},Bold:{style:"normal",weight:700},BoldItalic:{style:"italic",weight:700}};for(t in n){var i=new FontFace("Times New Roman","url("+e+"-"+t+".ttf)",n[t]);document.fonts.add(i)}}}()}(),function(){"use strict";function t(){var n,t,i=this,a=0;null!=i&&null!=i.tagName&&("img"==i.tagName.toLowerCase()?t=i:(t=geByTag1("img",i),hasClass(i,"blk_image_data_wrap")&&(a=1)),(t=(n=$(t)).attr("data-src"))&&n.one("load",function(){var t=$(i);t.removeClass(o);var e=n.next("noscript");1===e.length&&e.remove(),1==a&&t.removeAttr("style").children(".img_container:first").removeAttr("style")}).attr("src",t).removeAttr("data-src"))}var o="async_img";window.loadAsyncImages=function(){$("."+o).each(t)},window._isEditor||FE.add("onload",loadAsyncImages)}(),function(t){var n,e,i,a,o,r,s,d,l,c,u,p,f,h=$("body"),m=$("#formPopover"),g=new(e=$('head meta[name="viewport"]'),i="",function(){this.setMobileView=function(){i=e.attr("content"),e.attr("content","width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=0")},this.rollbackView=function(){e.attr("content",i)}}),_=(d="mobile-view",l="preview-adapt",function(t){s=(r=t).is(".wind")?r:r.closest(".wind"),this.resetFormMinWidth=function(){a=r.css("minWidth"),r.css("minWidth",0)},this.rollbackFormMinWidth=function(){r.css("minWidth",a)},this.getElement$=function(){return t},this.adaptWind=function(){o=r.css("width"),r.css("width","100%"),r.addClass(d)},this.rollbackWind=function(){r.css("width",o),r.removeClass(d)},this.adaptInPreview=function(){s.addClass(l)},this.rollbackInPreview=function(){s.removeClass(l)}});function w(t){var e=t.step;if(t.quizHasDesignUpdate)return e.addClass("field--error-animation"),void setTimeout(function(){e.removeClass("field--error-animation")},700);e.hasClass("fname")||e.hasClass("fselect")||e.hasClass("femail")||e.hasClass("fphone")||(p=!(f=!0),"none"==(t=(u=e.find(".error_wrapper")).find(".ui_error")).css("display")&&t.css("display","flex"),quizMobileView.isMobile()?u.css("bottom",n.getElement$().find(".wind-footer").outerHeight()):(u.css("top",z.getVisiblePart()),p=1),u.addClass("floated-error").fadeIn(400,function(){setTimeout(function(){u.fadeOut(400,function(){u.removeClass("floated-error"),f=!1})},3500)}))}var v,b,y,k,C,x,M,S,E=new(c="quiz-validate-error",u=$(),f=p=!1,function(){this.subscribeOnEvent=function(){FE.add(c,w)},this.changePosition=function(t){p&&f&&u.css("top",t)},this.unsubscribe=function(){FE.clr(c)}}),T=(v=[],function(){this.toQuizView=function(t){n=new _(t),this.isMobile()&&(g.setMobileView(),h.addClass("quiz-mobile-view"),n.resetFormMinWidth(),this.isMobileInPreview()&&n.adaptInPreview()),E.subscribeOnEvent(),z.initialize(),A(m,P)},this.adaptWind=function(t){this.isMobile()&&((n=new _(t)).adaptWind(),g.setMobileView(),h.addClass("quiz-mobile-view"),A(t,I))},this.isMobile=function(){return browser.mobile||this.isMobileInPreview()},this.isMobileInPreview=function(){return adapterManager.isPreview()&&!adapterManager.isPC()},this.getSmartHeader=function(){return z}});function P(){quizMobileView.isMobile()&&(h.removeClass("quiz-mobile-view"),g.rollbackView(),n.rollbackFormMinWidth()),quizMobileView.isMobileInPreview()&&n.rollbackInPreview(),E.unsubscribe()}function I(){quizMobileView.isMobile()&&(h.removeClass("quiz-mobile-view"),g.rollbackView(),n.rollbackWind())}function A(t,e){-1===v.indexOf(t.attr("id"))&&(t.wind("setAfterCloseFunc",e),v.push(t.attr("id")))}function F(){k=$(this).scrollTop(),y<k?(0<C?(C-=k-y,b.css({top:-(M-C)})):C=0,x=k):((C+=y-k)>M&&(C=M),b.css({top:C<=M?-(M-C):0}),0==k?(x=0,b.removeClass("shadow")):M<x&&b.addClass("shadow")),E.changePosition(z.getVisiblePart()),y=k}var z=new(M=x=C=k=y=0,S=[],function(){this.initialize=function(){var t=n.getElement$(),e=t.attr("id");-1===S.indexOf(e)&&(b=t.find(".wind-header"),C=M=b.outerHeight()+4,t.find(".wind-body").on("scroll",F),S.push(e))},this.getVisiblePart=function(){return C},this.recalcHeaderHeight=function(){C=M=b.outerHeight()+4}});t.quizMobileView=new T}(window),window._wind_cnt=0,F_wind.prototype.toggle=function(){return this[this.isShown?"hide":"show"]()},F_wind.prototype.show=function(){var t,e,n,i;this.ops.showFunc(this)&&(window._wind_cnt<=0&&($("#wind_container").show(),window._wind_cnt<0&&(window._wind_cnt=0)),i=this.$el.attr("id"),this.$el.parent().hasClass("wind-wrap")?this.$wrap||(this.$wrap=this.$el.closest(".wind-wrap")):(this.$el.wrap('<div class="wind-wrap hidden'+(this.whiteBg?" wind-wrap-white":"")+(i?" wrap-for-"+i:"")+'"></div>'),this.$el.removeClass("hidden"),this.$wrap=this.$el.parent()),this.$wrap.css({"z-index":window._wind_cnt+1}),this.$wrap.removeClass("hidden"),this.isShown=!0,this.$el.trigger("show"),t=$("body").width(),e=null,$("html").addClass("wind_opened"),e=$("body").width()-t,$("body").css("margin-right",e),$("body>.navbar>.navbar-inner").css("padding-right",e),this.ops.afterShowFunc(this),!window.lpm_hints||(n=window.lpm_hints.getHintsManager())&&n.currentDisplayedHint&&((i=n.currentDisplayedHint)&&i.settings&&i.settings.name&&setTimeout(function(){n.offHint(n.currentDisplayedHint)},500)),this.$el.hasClass("wind--close-outside")&&(this.$wrap.on("click",this.clickOutside),this.closeOutside=!0),t=e=null,window._wind_cnt++)},F_wind.prototype.hide=function(){0<window._wind_cnt?window._wind_cnt--:window._wind_cnt=0,this.$wrap&&this.$wrap.addClass("hidden"),0==$("#wind_container > div:visible").length&&$("#wind_container").hide(),this.isShown=!1,this.$el.trigger("hide"),$("body").css("margin-right",0),$("body>.navbar>.navbar-inner").css("padding-right",0),$("html").removeClass("wind_opened"),this.closeOutside&&this.$wrap.off("click",this.clickOutside),this.ops.afterCloseFunc(this)},F_wind.prototype.setHidePrevWnd=function(t){this.hidePrevWnd=!!t},F_wind.prototype.setWhiteBg=function(t){this.whiteBg=!!t},F_wind.prototype.setApplyFunc=function(t){"function"==typeof t&&(this.ops.applyFunc=t)},F_wind.prototype.setCancelFunc=function(t){"function"==typeof t&&(this.ops.cancelFunc=t)},F_wind.prototype.setCloseFunc=function(t){this.ops.closeFunc="function"==typeof t?t:null},F_wind.prototype.setAfterCloseFunc=function(t){"function"==typeof t&&(this.ops.afterCloseFunc=t)},F_wind.prototype.setShowFunc=function(t){"function"==typeof t&&(this.ops.showFunc=t)},F_wind.prototype.setAfterShowFunc=function(t){"function"==typeof t&&(this.ops.afterShowFunc=t)},F_wind.prototype.setParams=function(t){this.params=t},F_wind.prototype.clickBtnApply=function(){!1!==this.ops.applyFunc(this)&&this.hide()},F_wind.prototype.clickBtnClose=function(){"function"==typeof this.ops.closeFunc?!1!==this.ops.closeFunc(this)&&this.hide():this.clickBtnCancel()},F_wind.prototype.clickOutside=function(t){if(0!==$(t.target).closest(".wind").length)return!0;$(this).children(".wind").wind("clickBtnClose")},F_wind.prototype.clickBtnCancel=function(){!1!==this.ops.cancelFunc(this)&&this.hide()},jQuery.fn.wind=function(t){var e=$(this),n=$.extend({},$.fn.wind.defaults,"object"==typeof t&&t),i=e.data("wind");return i||e.data("wind",i=new F_wind(this,n)),"string"==typeof t?arguments[1]?i[t](arguments[1]):i[t]():n.show&&i.show(),e=i=n=null,this},jQuery.fn.wind.defaults={show:!1,container:$("body > #wind_container"),applyFunc:function(){return!0},cancelFunc:function(){return!0},closeFunc:null,showFunc:function(){return!0},afterCloseFunc:function(){},afterShowFunc:function(){}},window.fotoramaVersion="4.6.4",function(o,ve,be,ye,d){"use strict";function ke(){}function Ce(t,e,n){return Math.max(isNaN(e)?-1/0:e,Math.min(isNaN(n)?1/0:n,t))}function xe(t){var e={};return Nn?e.transform="translate3d("+t+"px,0,0)":e.left=t,e}function Me(t){return{"transition-duration":t+"ms"}}function i(t,e){return isNaN(t)?e:t}function $e(t,e){return i(+String(t).replace(e||"px",""))}function Se(t,e){return i((/%$/.test(n=t)?$e(n,"%"):d)/100*e,$e(t));var n}function Ee(t){return(!isNaN($e(t))||!isNaN($e(t,"%")))&&t}function Te(t,e,n,i){return(t-(i||0))*(e+(n||0))}function r(t,e,n,i){var a,o,r=t.data();r&&(r.onEndFn=function(){a||(a=!0,clearTimeout(r.tT),n())},r.tProp=e,clearTimeout(r.tT),r.tT=setTimeout(function(){r.onEndFn()},1.5*i),(o=(t=t).data()).tEnd||(We(t[0],{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"}[l.prefixed("transition")],function(t){o.tProp&&t.propertyName.match(o.tProp)&&o.onEndFn()}),o.tEnd=!0))}function Pe(n,t){if(n.length){var e=n.data();Nn?(n.css(Me(0)),e.onEndFn=ke,clearTimeout(e.tT)):n.stop();t=Ie(t,function(){return t=n,Nn?+((e=t.css("transform")).match(/ma/)&&e.match(/-?\d+(?!d)/g)[e.match(/3d/)?12:4]):+t.css("left").replace("px","");var t,e});return n.css(xe(t)),t}}function Ie(){for(var t,e=0,n=arguments.length;e<n&&"number"!=typeof(t=e?arguments[e]():arguments[e]);e++);return t}function s(t,e){return Math.round(t+(e-t)/1.5)}function Ae(){return Ae.p=Ae.p||("https:"===be.protocol?"https://":"http://"),Ae.p}function Fe(t,e){return"string"!=typeof t?t:(n=t,(i=ve.createElement("a")).href=n,(t=i).host.match(/youtube\.com/)&&t.search?(a=t.search.split("v=")[1])&&(-1!==(o=a.indexOf("&"))&&(a=a.substring(0,o)),o="youtube"):t.host.match(/youtube\.com|youtu\.be/)?(a=t.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),o="youtube"):t.host.match(/vimeo\.com/)&&(o="vimeo",a=t.pathname.replace(/^\/(video\/)?/,"").replace(/\/.*/,"")),a&&o||!e||(a=t.href,o="custom"),!!a&&{id:a,type:o,s:t.search.replace(/^\?/,""),p:Ae()});var n,i,a,o}function ze(t,e,n,i){for(var a=0,o=t.length;a<o;a++){var r=t[a];if(r.i===n&&r.thumbsReady){var s={videoReady:!0};s[Wn]=s[Qn]=s[Yn]=!1,i.splice(a,1,ye.extend({},r,s,e));break}}}function Be(t){function c(t,e,n){var i=n.thumb&&n.img!==n.thumb,a=$e(n.width||t.attr("width")),t=$e(n.height||t.attr("height"));ye.extend(n,{width:a,height:t,thumbratio:Ue(n.thumbratio||$e(n.thumbwidth||e&&e.attr("width")||i||a)/$e(n.thumbheight||e&&e.attr("height")||i||t))})}var u=[];return t.children().each(function(){var t,e,n,i,a,o,r,s,d=ye(this),l=He(ye.extend(d.data(),{id:d.attr("id")}));if(d.is("a, img"))e=l,n=!0,i=(t=d).children("img").eq(0),a=t.attr("href"),o=t.attr("src"),r=i.attr("src"),s=e.video,(n=!!n&&Fe(a,!0===s))?a=!1:n=s,c(t,i,ye.extend(e,{video:n,img:e.img||a||o||r,thumb:e.thumb||r||o||a}));else{if(d.is(":empty"))return;c(d,null,ye.extend(l,{html:this,_html:d.html()}))}u.push(l)}),u}function De(t,e,n,i){return De.i||(De.i=1,De.ii=[!0]),i=i||De.i,void 0===De.ii[i]&&(De.ii[i]=!0),t()?e():De.ii[i]&&setTimeout(function(){De.ii[i]&&De(t,e,n,i)},n||100),De.i++}function Oe(t,e,n,i){var a,o,r,s,d,l,c,u=t.data(),p=u.measures;return!p||u.l&&u.l.W===p.width&&u.l.H===p.height&&u.l.r===p.ratio&&u.l.w===e.w&&u.l.h===e.h&&u.l.m===n&&u.l.p===i||(a=p.width,o=p.height,c=e.w/e.h,r=p.ratio>=c,s="scaledown"===n,d="contain"===n,l="cover"===n,c={x:Ee((c=((c=i)+"").split(/\s+/))[0])||g,y:Ee(c[1])||g},r&&(s||d)||!r&&l?o=(a=Ce(e.w,0,s?a:1/0))/p.ratio:(r&&l||!r&&(s||d))&&(a=(o=Ce(e.h,0,s?o:1/0))*p.ratio),t.css({width:a,height:o,left:Se(c.x,e.w-a),top:Se(c.y,e.h-o)}),u.l={W:p.width,H:p.height,r:p.ratio,w:e.w,h:e.h,m:n,p:i}),!0}function je(t,e,n){return e!==n&&(t<=e?"left":n<=t?"right":"left right")}function Ne(t,e,n,i){if(!n)return!1;if(!isNaN(t))return t-(i?0:1);for(var a,o=0,r=e.length;o<r;o++)if(e[o].id===t){a=o;break}return a}function Le(t,e){return'<div class="'+t+'">'+(e||"")+"</div>"}function Re(t){for(var e=t.length;e;){var n=Math.floor(Math.random()*e--),i=t[e];t[e]=t[n],t[n]=i}return t}function Ve(t){return"[object Array]"==Object.prototype.toString.call(t)&&ye.map(t,function(t){return ye.extend({},t)})}function qe(t,e,n){t.scrollLeft(e||0).scrollTop(n||0)}function He(t){if(t){var n={};return ye.each(t,function(t,e){n[t.toLowerCase()]=e}),n}}function Ue(t){if(t){var e=+t;return isNaN(e)?+(e=t.split("/"))[0]/+e[1]||d:e}}function We(t,e,n,i){e&&(t.addEventListener?t.addEventListener(e,n,!!i):t.attachEvent("on"+e,n))}function Ye(t){return{tabindex:-1*t+"",disabled:t}}function Qe(e,n){We(e,"keyup",function(t){e.getAttribute("disabled")||13==t.keyCode&&n.call(e,t)})}function Je(e,n){We(e,"focus",e.onfocusin=function(t){n.call(e,t)},!0)}function Ge(t,e){t.preventDefault?t.preventDefault():t.returnValue=!1,e&&t.stopPropagation&&t.stopPropagation()}function Ze(t){return t?">":"<"}function Ke(t,e){var n=t.data(),i=Math.round(e.pos),a=function(){n.sliding=!1,(e.onEnd||ke)()};void 0!==e.overPos&&e.overPos!==e.pos&&(i=e.overPos,a=function(){Ke(t,ye.extend({},e,{overPos:e.pos,time:Math.max(Un,e.time/2)}))});i=ye.extend(xe(i),e.width&&{width:e.width});n.sliding=!0,Nn?(t.css(ye.extend(Me(e.time),i)),10<e.time?r(t,"transform",a,e.time):a()):t.stop().animate(i,e.time,m,a)}function Xe(t,e,n,i,a,o){var r,s,d,l,c=void 0!==o;!c&&(a.push(arguments),Array.prototype.push.call(arguments,a.length),1<a.length)||(t=t||ye(t),e=e||ye(e),r=t[0],s=e[0],d="crossfade"===i.method,l=function(){var t;l.done||(l.done=!0,(t=(c||a.shift())&&a.shift())&&Xe.apply(this,t),(i.onEnd||ke)(!!t))},o=i.time/(o||1),n.removeClass(p+" "+u),t.stop().addClass(p),e.stop().addClass(u),d&&s&&t.fadeTo(0,0),t.fadeTo(d?o:0,1,d&&l),e.fadeTo(o,0,l),r&&d||s||l())}function _(t){var e=(t.touches||[])[0]||t;t._x=e.pageX,t._y=e.clientY,t._now=ye.now()}function tn(t,o){function e(t){return a=ye(t.target),g.checked=u=p=h=!1,s||g.flow||t.touches&&1<t.touches.length||1<t.which||w&&w.type!==t.type&&b||(u=o.select&&a.is(o.select,m))?u:(c="touchstart"===t.type,p=a.is("a, a *",m),l=g.control,f=g.noMove||g.noSwipe||l?16:g.snap?0:4,_(t),d=w=t,v=t.type.replace(/down|start/,"move").replace(/Down/,"Move"),(o.onStart||ke).call(m,t,{control:l,$target:a}),s=g.flow=!0,void(c&&!g.go||Ge(t)))}function n(t){if(t.touches&&1<t.touches.length||qn&&!t.isPrimary||v!==t.type||!s)return s&&r(),void(o.onTouchEnd||ke)();_(t);var e=Math.abs(t._x-d._x),n=Math.abs(t._y-d._y),i=e-n,a=(g.go||g.x||0<=i)&&!g.noSwipe,i=i<0;c&&!g.checked?(s=a)&&Ge(t):(Ge(t),(o.onMove||ke).call(m,t,{touch:c})),!h&&Math.sqrt(Math.pow(e,2)+Math.pow(n,2))>f&&(h=!0),g.checked=g.checked||a||i}function r(t){(o.onTouchEnd||ke)();var e=s;g.control=s=!1,e&&(g.flow=!1),!e||p&&!g.checked||(t&&Ge(t),b=!0,clearTimeout(y),y=setTimeout(function(){b=!1},1e3),(o.onEnd||ke).call(m,{moved:h,$target:a,control:l,touch:c,startEvent:d,aborted:!t||"MSPointerCancel"===t.type}))}function i(){g.flow&&setTimeout(function(){g.flow=!1},Hn)}var s,d,a,l,c,u,p,f,h,m=t[0],g={};return qn?(We(m,"MSPointerDown",e),We(ve,"MSPointerMove",n),We(ve,"MSPointerCancel",r),We(ve,"MSPointerUp",r)):(We(m,"touchstart",e),We(m,"touchmove",n),We(m,"touchend",r),We(ve,"touchstart",function(){g.flow||setTimeout(function(){g.flow=!0},10)}),We(ve,"touchend",i),We(ve,"touchcancel",i),On.on("scroll",i),t.on("mousedown",e),jn.on("mousemove",n).on("mouseup",r)),t.on("click","a",function(t){g.checked&&Ge(t)}),g}function en(_,w){function v(t,e){T=!0,n=b=t._x,a=t._now,C=[[a,n]],y=k=I.noMove||e?0:Pe(_,(w.getPos||ke)()),(w.onStart||ke).call(P,t)}var n,b,y,k,i,C,a,x,M,$,S,E,o,T,P=_[0],r=_.data(),I={};return I=ye.extend(tn(w.$wrap,ye.extend({},w,{onStart:function(t,e){M=I.min,$=I.max,S=I.snap,E=t.altKey,T=o=!1,e.control||r.sliding||v(t)},onMove:function(t,e){I.noSwipe||(T||v(t),b=t._x,C.push([t._now,b]),i=je(k=y-(n-b),M,$),k<=M?k=s(k,M):$<=k&&(k=s(k,$)),I.noMove||(_.css(xe(k)),o||(o=!0,e.touch||qn||_.addClass(A)),(w.onMove||ke).call(P,t,{pos:k,edge:i})))},onEnd:function(t){if(!I.noSwipe||!t.moved){T||v(t.startEvent,!0),t.touch||qn||_.removeClass(A);for(var e,n,i,a,o,r=(x=ye.now())-Hn,s=null,d=Un,l=w.friction,c=C.length-1;0<=c;c--){if(e=C[c][0],n=Math.abs(e-r),null===s||n<i)s=e,a=C[c][1];else if(s===r||i<n)break;i=n}var u=Ce(k,M,$),p=a-b,f=0<=p,h=x-s,m=Hn<h,g=!m&&k!==y&&u===k;S&&(u=Ce(Math[g?f?"floor":"ceil":"round"](k/S)*S,M,$),M=$=u),g&&(S||u===k)&&(p=-p/h,d*=Ce(Math.abs(p),w.timeLow,w.timeHigh),h=Math.round(k+p*d/l),S||(u=h),(!f&&$<h||f&&h<M)&&(f=f?M:$,o=Ce((u=!S?f:u)+.03*(o=h-f),f-50,f+50),d=Math.abs((k-o)/(p/l)))),d*=E?10:1,(w.onEnd||ke).call(P,ye.extend(t,{moved:t.moved||m&&S,pos:k,newPos:u,overPos:o,time:d}))}}})),I)}function nn(t,s){var d,l,c,t=t[0],u={prevent:{}};return We(t,f,function(t){var e=t.wheelDeltaY||-1*t.deltaY||0,n=t.wheelDeltaX||-1*t.deltaX||0,i=Math.abs(n)&&!Math.abs(e),a=Ze(n<0),o=l===a,r=ye.now(),e=r-c<Hn;l=a,c=r,i&&u.ok&&(!u.prevent[a]||d)&&(Ge(t,!0),d&&o&&e||(s.shift&&(d=!0,clearTimeout(u.t),u.t=setTimeout(function(){d=!1},h)),(s.onEnd||ke)(t,s.shift?a:n)))}),u}function an(){ye.each(ye.Fotorama.instances,function(t,e){e.index=t})}var on="fotorama",rn="fullscreen",sn=on+"__wrap",dn=sn+"--video",ln=sn+"--no-controls",cn=sn+"--only-active",un=on+"__stage",pn=un+"__frame",fn=on+"__grab",hn=on+"__arr",mn=hn+"--disabled",gn=on+"__nav",_n=gn+"--dots",wn=gn+"--thumbs",vn=gn+"__frame",u=(c=on+"__fade")+"-front",p=c+"-rear",bn="fotorama__shadows",yn=on+"__active",kn=on+"__select",Cn=on+"--fullscreen",xn=on+"__error",Mn=on+"__loading",$n=on+"__loaded",A=on+"__grabbing",Sn=on+"__img",En=on+"__thumb",Tn=(a=on+"__video")+"-play",Pn='" tabindex="0" role="button';if(!(c=ye&&ye.fn.jquery.split("."))||c[0]<1||1==c[0]&&c[1]<8)throw"Fotorama requires jQuery 1.8 or later and will not run without it.";var l=function(c,o){function r(t,e){return typeof t===e}function s(t,e){for(var n in t){n=t[n];if(!~(""+n).indexOf("-")&&d[n]!==o)return"pfx"!=e||n}return!1}function i(t,e,n){var i=t.charAt(0).toUpperCase()+t.slice(1),a=(t+" "+f.join(i+" ")+i).split(" ");return r(e,"string")||void 0===e?s(a,e):function(t,e,n){for(var i in t){var a=e[t[i]];if(a!==o)return!1===n?t[i]:r(a,"function")?a.bind(n||e):a}return!1}(a=(t+" "+h.join(i+" ")+i).split(" "),e,n)}var t,e,a={},u=c.documentElement,p="modernizr",d=c.createElement(p).style,n=" -webkit- -moz- -o- -ms- ".split(" "),l="Webkit Moz O ms",f=l.split(" "),h=l.toLowerCase().split(" "),m={},g=[],_=g.slice,w={}.hasOwnProperty,v=void 0===w||void 0===w.call?function(t,e){return e in t&&void 0===t.constructor.prototype[e]}:function(t,e){return w.call(t,e)};for(e in Function.prototype.bind||(Function.prototype.bind=function(n){var i=this;if("function"!=typeof i)throw new TypeError;var a=_.call(arguments,1),o=function(){if(this instanceof o){var t=function(){};t.prototype=i.prototype;var e=new t,t=i.apply(e,a.concat(_.call(arguments)));return Object(t)===t?t:e}return i.apply(n,a.concat(_.call(arguments)))};return o}),m.csstransforms3d=function(){return!!i("perspective")},m)v(m,e)&&(t=e.toLowerCase(),a[t]=m[e](),g.push((a[t]?"":"no-")+t));return a.addTest=function(t,e){if("object"==typeof t)for(var n in t)v(t,n)&&a.addTest(n,t[n]);else{if(t=t.toLowerCase(),a[t]!==o)return a;e="function"==typeof e?e():e,"undefined"!=typeof enableClasses&&enableClasses&&(u.className+=" "+(e?"":"no-")+t),a[t]=e}return a},d.cssText="",0,a._version="2.6.2",a._prefixes=n,a._domPrefixes=h,a._cssomPrefixes=f,a.testProp=function(t){return s([t])},a.testAllProps=i,a.testStyles=function(t,e,n,i){var a,o,r,s=c.createElement("div"),d=c.body,l=d||c.createElement("body");if(parseInt(n,10))for(;n--;)(o=c.createElement("div")).id=i?i[n]:p+(n+1),s.appendChild(o);return a=["&#173;",'<style id="s',p,'">',t,"</style>"].join(""),s.id=p,(d?s:l).innerHTML+=a,l.appendChild(s),d||(l.style.background="",l.style.overflow="hidden",r=u.style.overflow,u.style.overflow="hidden",u.appendChild(l)),t=e(s,t),d?s.parentNode.removeChild(s):(l.parentNode.removeChild(l),u.style.overflow=r),!!t},a.prefixed=function(t,e,n){return e?i(t,e,n):i(t,"pfx")},a}(ve),In={ok:!1,is:function(){return!1},request:function(){},cancel:function(){},event:"",prefix:""},t="webkit moz o ms khtml".split(" ");if(void 0!==ve.cancelFullScreen)In.ok=!0;else for(var e=0,n=t.length;e<n;e++)if(In.prefix=t[e],void 0!==ve[In.prefix+"CancelFullScreen"]){In.ok=!0;break}In.ok&&(In.event=In.prefix+"fullscreenchange",In.is=function(){switch(this.prefix){case"":return ve.fullScreen;case"webkit":return ve.webkitIsFullScreen;default:return ve[this.prefix+"FullScreen"]}},In.request=function(t){return""===this.prefix?t.requestFullScreen():t[this.prefix+"RequestFullScreen"]()},In.cancel=function(){return""===this.prefix?ve.cancelFullScreen():ve[this.prefix+"CancelFullScreen"]()});var An,Fn={lines:12,length:5,width:2,radius:7,corners:1,rotate:15,color:"rgba(128, 128, 128, .75)",hwaccel:!0},zn={top:"auto",left:"auto",className:""};An=function(){function h(t,e){var n,i=ve.createElement(t||"div");for(n in e)i[n]=e[n];return i}function c(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function r(t,e,n,i){var a=["opacity",e,~~(100*t),n,i].join("-"),o=.01+n/i*100,r=Math.max(1-(1-t)/e*(100-o),t),s=_.substring(0,_.indexOf("Animation")).toLowerCase(),d=s&&"-"+s+"-"||"";return l[a]||(p.insertRule("@"+d+"keyframes "+a+"{0%{opacity:"+r+"}"+o+"%{opacity:"+t+"}"+(o+.01)+"%{opacity:1}"+(o+e)%100+"%{opacity:"+t+"}100%{opacity:"+r+"}}",p.cssRules.length),l[a]=1),a}function i(t,e){var n,i,a=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<o.length;i++)if(n=o[i]+e,a[n]!==d)return n;return a[e]!==d?e:void 0}function m(t,e){for(var n in e)t.style[i(t,n)||n]=e[n];return t}function e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]===d&&(t[i]=n[i])}return t}function g(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function u(t,e){return"string"==typeof t?t:t[e%t.length]}function n(t){return"undefined"==typeof this?new n(t):void(this.opts=e(t||{},n.defaults,a))}function t(){function l(t,e){return h("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}p.addRule(".spin-vml","behavior:url(#default#VML)"),n.prototype.lines=function(t,i){function a(){return m(l("group",{coordsize:r+" "+r,coordorigin:-o+" "+-o}),{width:r,height:r})}function e(t,e,n){c(d,c(m(a(),{rotation:360/i.lines*t+"deg",left:~~e}),c(m(l("roundrect",{arcsize:i.corners}),{width:o,height:i.width,left:i.radius,top:-i.width>>1,filter:n}),l("fill",{color:u(i.color,t),opacity:i.opacity}),l("stroke",{opacity:0}))))}var n,o=i.length+i.width,r=2*o,s=2*-(i.width+i.length)+"px",d=m(a(),{position:"absolute",top:s,left:s});if(i.shadow)for(n=1;n<=i.lines;n++)e(n,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(n=1;n<=i.lines;n++)e(n);return c(t,d)},n.prototype.opacity=function(t,e,n,i){var a=t.firstChild;i=i.shadow&&i.lines||0,a&&e+i<a.childNodes.length&&(a=a.childNodes[e+i],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=n))}}var _,o=["webkit","Moz","ms","O"],l={},p=function(){var t=h("style",{type:"text/css"});return c(ve.getElementsByTagName("head")[0],t),t.sheet||t.styleSheet}(),a={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};n.defaults={},e(n.prototype,{spin:function(t){this.stop();var e,n,i=this,a=i.opts,o=i.el=m(h(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),r=a.radius+a.length+a.width;if(t&&(t.insertBefore(o,t.firstChild||null),n=g(t),e=g(o),m(o,{left:("auto"==a.left?n.x-e.x+(t.offsetWidth>>1):parseInt(a.left,10)+r)+"px",top:("auto"==a.top?n.y-e.y+(t.offsetHeight>>1):parseInt(a.top,10)+r)+"px"})),o.setAttribute("role","progressbar"),i.lines(o,i.opts),!_){var s,d=0,l=(a.lines-1)*(1-a.direction)/2,c=a.fps,u=c/a.speed,p=(1-a.opacity)/(u*a.trail/100),f=u/a.lines;!function t(){d++;for(var e=0;e<a.lines;e++)s=Math.max(1-(d+(a.lines-e)*f)%u*p,a.opacity),i.opacity(o,e*a.direction+l,s,a);i.timeout=i.el&&setTimeout(t,~~(1e3/c))}()}return i},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=d),this},lines:function(t,n){function e(t,e){return m(h(),{position:"absolute",width:n.length+n.width+"px",height:n.width+"px",background:t,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/n.lines*a+n.rotate)+"deg) translate("+n.radius+"px,0)",borderRadius:(n.corners*n.width>>1)+"px"})}for(var i,a=0,o=(n.lines-1)*(1-n.direction)/2;a<n.lines;a++)i=m(h(),{position:"absolute",top:1+~(n.width/2)+"px",transform:n.hwaccel?"translate3d(0,0,0)":"",opacity:n.opacity,animation:_&&r(n.opacity,n.trail,o+a*n.direction,n.lines)+" "+1/n.speed+"s linear infinite"}),n.shadow&&c(i,m(e("#000","0 0 4px #000"),{top:"2px"})),c(t,c(i,e(u(n.color,a),"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var s=m(h("group"),{behavior:"url(#default#VML)"});return!i(s,"transform")&&s.adj?t():_=i(s,"animation"),n}();var Bn,Dn,w,v,b,y,On=ye(o),jn=ye(ve),a="quirks"===be.hash.replace("#",""),Nn=(c=l.csstransforms3d)&&!a,Ln=c||"CSS1Compat"===ve.compatMode,Rn=In.ok,c=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),Vn=!Nn||c,qn=navigator.msPointerEnabled,f="onwheel"in ve.createElement("div")?"wheel":ve.onmousewheel!==d?"mousewheel":"DOMMouseScroll",Hn=250,Un=300,h=1400,Wn="$stageFrame",Yn="$navDotFrame",Qn="$navThumbFrame",m=function(o){var r,t="bez_"+ye.makeArray(arguments).join("_").replace(".","p");return"function"!=typeof ye.easing[t]&&(r=function(n,i){function o(t,e){return d[e]=3*n[e],s[e]=3*(i[e]-n[e])-d[e],r[e]=1-d[e]-s[e],t*(d[e]+t*(s[e]+t*r[e]))}function e(t){for(var e,n,i=t,a=0;++a<14&&(e=o(i,0)-t,!(Math.abs(e)<.001));)i-=e/(n=i,d[0]+n*(2*s[0]+3*r[0]*n));return i}var r=[null,null],s=[null,null],d=[null,null];return function(t){return o(e(t),1)}},ye.easing[t]=function(t,e,n,i,a){return i*r([o[0],o[1]],[o[2],o[3]])(e/a)+n}),t}([.1,0,.25,1]),g="50%",k={width:null,minwidth:null,maxwidth:"100%",height:null,minheight:null,maxheight:null,ratio:null,margin:2,glimpse:0,fit:"contain",position:g,thumbposition:g,nav:"dots",navposition:"bottom",navwidth:null,thumbwidth:64,thumbheight:64,thumbmargin:2,thumbborderwidth:2,thumbfit:"cover",allowfullscreen:!1,transition:"slide",clicktransition:null,transitionduration:Un,captions:!0,hash:!1,startindex:0,loop:!1,autoplay:!1,stopautoplayontouch:!0,keyboard:!1,arrows:!0,click:!0,swipe:!0,trackpad:!1,enableifsingleframe:!1,controlsonstart:!0,shuffle:!1,direction:"ltr",shadows:!0,spinner:null},Jn={left:!0,right:!0,down:!1,up:!1,space:!1,home:!1,end:!1};De.stop=function(t){De.ii[t]=!1},jQuery.Fotorama=function(a,y){function e(){ye.each(K,function(t,e){var n,i,a,o,r,s,d;e.i||(e.i=Rt++,(d=Fe(e.video,!0))&&(n={},e.video=d,e.img||e.thumb?e.thumbsReady=!0:(a=K,o=Ot,"youtube"===(d=(i=e).video).type?(r=(s=Ae()+"img.youtube.com/vi/"+d.id+"/default.jpg").replace(/\/default.jpg$/,"/hqdefault.jpg"),i.thumbsReady=!0):"vimeo"===d.type?ye.ajax({url:Ae()+"vimeo.com/api/v2/video/"+d.id+".json",dataType:"jsonp",success:function(t){i.thumbsReady=!0,ze(a,{img:t[0].thumbnail_large,thumb:t[0].thumbnail_small},i.i,o)}}):i.thumbsReady=!0,n={img:r,thumb:s}),ze(K,{img:n.img,thumb:n.thumb},e.i,Ot)))})}function o(t){return xt[t]||Ot.fullScreen}function r(t){var e,n,i;t!==r.f&&(t?(a.html("").addClass(on+" "+Nt).append(Ut).before(qt).before(Ht),i=Ot,ye.Fotorama.instances.push(i),an()):(Ut.detach(),qt.detach(),Ht.detach(),a.html(Vt.urtext).removeClass(Nt),n=Ot,ye.Fotorama.instances.splice(n.index,1),an()),e="keydown."+on,n="keydown."+(i=on+jt),i="resize."+i+" orientationchange."+i,t?(jn.on(n,function(t){var e,n;nt&&27===t.keyCode?R(nt,e=!0,!0):(Ot.fullScreen||y.keyboard&&!Ot.index)&&(27===t.keyCode?(e=!0,Ot.cancelFullScreen()):t.shiftKey&&32===t.keyCode&&o("space")||37===t.keyCode&&o("left")||38===t.keyCode&&o("up")?n="<":32===t.keyCode&&o("space")||39===t.keyCode&&o("right")||40===t.keyCode&&o("down")?n=">":36===t.keyCode&&o("home")?n="<<":35===t.keyCode&&o("end")&&(n=">>")),(e||n)&&Ge(t),n&&Ot.show({index:n,slow:t.altKey,user:!0})}),Ot.index||jn.off(e).on(e,"textarea, input, select",function(t){Dn.hasClass(rn)||t.stopPropagation()}),On.on(i,Ot.resize)):(jn.off(n),On.off(i)),r.f=t)}function s(){var t=X<2&&!y.enableifsingleframe||nt;ue.noMove=t||_t,ue.noSwipe=t||!y.swipe,yt||Yt.toggleClass(fn,!y.click&&!ue.noMove&&!ue.noSwipe),qn&&Ut.toggleClass("fotorama__wrap--pan-y",!ue.noSwipe)}function d(t){!0===t&&(t=""),y.autoplay=Math.max(+t||5e3,1.5*bt)}function k(t){return t<0?(X+t%X)%X:X<=t?t%X:t}function l(t){return Ce(t,0,X-1)}function c(t){return(ut?k:l)(t)}function u(t){return!!(0<t||ut)&&t-1}function p(t){return!!(t<X-1||ut)&&t+1}function n(t,o,r){var s;return"number"==typeof t&&(t=new Array(t),s=!0),ye.each(t,function(t,e){var n,i,a;"number"==typeof(e=s?t:e)&&(n=K[k(e)])&&(a=n[i="$"+o+"Frame"],r.call(this,t,e,n,a,i,a&&a.data()))})}function C(t,e,n,i){Mt&&("*"!==Mt||i!==ct)||(t=Ee(y.width)||Ee(t)||500,e=Ee(y.height)||Ee(e)||333,Ot.resize({width:t,ratio:y.ratio||n||t/e},0,i!==ct&&"*"))}function x(t,g,_,w,v,b){n(t,g,function(t,n,e,i,a,o){function r(t){var e=k(n);B(t,{index:e,src:h,frame:K[e]})}function s(){u.remove(),ye.Fotorama.cache[h]="error",e.html&&"stage"===g||!m||m===h?(!h||e.html||l?"stage"===g&&(i.trigger("f:load").removeClass(Mn+" "+xn).addClass($n),r("load"),C()):(i.trigger("f:error").removeClass(Mn).addClass(xn),r("error")),o.state="error",!(1<X&&K[n]===e)||e.html||e.deleted||e.video||l||(e.deleted=!0,Ot.splice(n,1))):(e[f]=h=m,x([n],g,_,w,v,!0))}function d(){var t=10;De(function(){return!At||!t--&&!Vn},function(){ye.Fotorama.measures[h]=p.measures=ye.Fotorama.measures[h]||{width:c.width,height:c.height,ratio:c.width/c.height},C(p.measures.width,p.measures.height,p.measures.ratio,n),u.off("load error").addClass(Sn+(l?" fotorama__img--full":"")).prependTo(i),Oe(u,(ye.isFunction(_)?_():_)||ce,w||e.fit||y.fit,v||e.position||y.position),ye.Fotorama.cache[h]=o.state="loaded",setTimeout(function(){i.trigger("f:load").removeClass(Mn+" "+xn).addClass($n+" "+(l?"fotorama__loaded--full":"fotorama__loaded--img")),"stage"===g?r("load"):"auto"!==e.thumbratio&&(e.thumbratio||"auto"!==y.thumbratio)||(e.thumbratio=p.measures.ratio,J())},0)})}var l,c,u,p,f,h,m;i&&(l=Ot.fullScreen&&e.full&&e.full!==e.img&&!o.$full&&"stage"===g,o.$img&&!b&&!l||(c=new Image,u=ye(c),p=u.data(),o[l?"$full":"$img"]=u,h=e[f="stage"===g?l?"full":"img":"thumb"],m=l?null:e["stage"===g?"thumb":"img"],"navThumb"===g&&(i=o.$wrap),h?(ye.Fotorama.cache[h]?function t(){"error"===ye.Fotorama.cache[h]?s():"loaded"===ye.Fotorama.cache[h]?setTimeout(d,0):setTimeout(t,100)}():(ye.Fotorama.cache[h]="*",u.on("load",d).on("error",s)),o.state="",c.src=h):s()))})}function f(){de.detach(),et&&et.stop()}function h(){var t,e=it[Wn];e&&!e.data().state&&(t=e,de.append(et.spin().el).appendTo(t),e.on("f:load f:error",function(){e.off("f:load f:error"),f()}))}function m(t){Qe(t,W),Je(t,function(){setTimeout(function(){qe(Xt)},0),P({time:bt,guessIndex:ye(this).data().eq,minMax:fe})})}function g(t,r){n(t,r,function(t,e,n,i,a,o){i||(i=n[a]=Ut[a].clone(),(o=i.data()).data=n,a=i[0],"stage"===r?(n.html&&ye('<div class="fotorama__html"></div>').append(n._html?ye(n.html).removeAttr("id").html(n._html):n.html).appendTo(i),n.caption&&ye(Le("fotorama__caption",Le("fotorama__caption__wrap",n.caption))).appendTo(i),n.video&&i.addClass("fotorama__stage__frame--video").append(re.clone()),Je(a,function(){setTimeout(function(){qe(Wt)},0),H({index:o.eq,user:!0})}),Qt=Qt.add(i)):"navDot"===r?(m(a),ee=ee.add(i)):"navThumb"===r&&(m(a),o.$wrap=i.children(":first"),ne=ne.add(i),n.video&&o.$wrap.append(re.clone())))})}function _(t,e,n,i){return t&&t.length&&Oe(t,e,n,i)}function w(t){n(t,"stage",function(t,e,n,i,a,o){var r,s,d;i&&(r=k(e),s=n.fit||y.fit,d=n.position||y.position,o.eq=r,ge[Wn][r]=i.css(ye.extend({left:_t?0:Te(e,ce.w,y.margin,ot)},_t&&Me(0))),e=i[0],ye.contains(ve.documentElement,e)||(i.appendTo(Yt),R(n.$video)),_(o.$img,ce,s,d),_(o.$full,ce,s,d))})}function v(t,r){var s,d;"thumbs"!==pt||isNaN(t)||(d=(s=-t)+ce.nw,ne.each(function(){function t(){return{h:vt,w:e.w}}var e=ye(this).data(),n=e.eq,i=t(),a=K[n]||{},o=a.thumbfit||y.thumbfit,a=a.thumbposition||y.thumbposition;i.w=e.w,e.l+e.w<s||e.l>d||_(e.$img,i,o,a)||r&&x([n],"navThumb",t,o,a)}))}function b(t,e,n){var i,a;b[n]||(i="nav"===n&&ft,a=0,e.append(t.filter(function(){for(var t,e=ye(this),n=e.data(),i=0,a=K.length;i<a;i++)if(n.data===K[i]){t=!0,n.eq=i;break}return t||e.remove()&&!1}).sort(function(t,e){return ye(t).data().eq-ye(e).data().eq}).each(function(){var t,e,n;i&&(e=(t=ye(this)).data(),n=Math.round(vt*e.data.thumbratio)||wt,e.l=a,e.w=n,t.css({width:n}),a+=n+y.thumbmargin)})),b[n]=!0)}function M(t){return t-_e>ce.w/3}function i(t){return!(ut||le+t&&le-X+t||nt)}function $(){var t=i(0),e=i(1);Jt.toggleClass(mn,t).attr(Ye(t)),Gt.toggleClass(mn,e).attr(Ye(e))}function S(){pe.ok&&(pe.prevent={"<":i(0),">":i(1)})}function E(t){var e,n=t.data(),t=ft?(e=n.l,n.w):(e=t.position().left,t.width());return{c:e+t/2,min:-e+10*y.thumbmargin,max:-e+ce.w-t-10*y.thumbmargin}}function T(t){var e=it[zt].data();Ke(ie,{time:1.2*t,pos:e.l,width:e.w-2*y.thumbborderwidth})}function P(t){var e,n,i,a=K[t.guessIndex][zt];a&&(e=fe.min!==fe.max,n=t.minMax||e&&E(it[zt]),n=e&&(t.keep&&P.l?P.l:Ce((t.coo||ce.nw/2)-E(a).c,n.min,n.max)),i=e&&Ce(n,fe.min,fe.max),t=1.1*t.time,Ke(te,{time:t,pos:i||0,onEnd:function(){v(i,!0)}}),L(Xt,je(i,fe.min,fe.max)),P.l=n)}function I(t){for(var e=me[t];e.length;)e.shift().removeClass(yn)}function A(t){var n=ge[t];ye.each(at,function(t,e){delete n[k(e)]}),ye.each(n,function(t,e){delete n[t],e.detach()})}function F(t){ot=rt=le;var e=it[Wn];e&&(I(Wn),me[Wn].push(e.addClass(yn)),t||Ot.show.onEnd(!0),Pe(Yt,0),A(Wn),w(at),ue.min=ut?-1/0:-Te(X-1,ce.w,y.margin,ot),ue.max=ut?1/0:-Te(0,ce.w,y.margin,ot),ue.snap=ce.w+y.margin,fe.min=Math.min(0,ce.nw-te.width()),fe.max=0,te.toggleClass(fn,!(fe.noMove=fe.min===fe.max)))}function z(n,t){n&&ye.each(t,function(t,e){e&&ye.extend(e,{width:n.width||e.width,height:n.height,minwidth:n.minwidth,maxwidth:n.maxwidth,minheight:n.minheight,maxheight:n.maxheight,ratio:Ue(n.ratio)})})}function B(t,e){a.trigger(on+":"+t,[Ot,e])}function D(){clearTimeout(O.t),At=1,y.stopautoplayontouch?Ot.stopAutoplay():Tt=!0}function O(){At&&(y.stopautoplayontouch||(j(),N()),O.t=setTimeout(function(){At=0},Un+Hn))}function j(){Tt=!(!nt&&!Pt)}function N(){var n,t;clearTimeout(N.t),De.stop(N.w),y.autoplay&&!Tt?(Ot.autoplay||(Ot.autoplay=!0,B("startautoplay")),n=le,t=it[Wn].data(),N.w=De(function(){return t.state||n!==le},function(){N.t=setTimeout(function(){var t,e;Tt||n!==le||(e=K[t=lt][Wn].data(),N.w=De(function(){return e.state||t!==lt},function(){Tt||t!==lt||Ot.show(ut?Ze(!Ct):lt)}))},y.autoplay)})):Ot.autoplay&&(Ot.autoplay=!1,B("stopautoplay"))}function t(){Ot.fullScreen&&(Ot.fullScreen=!1,Rn&&In.cancel(Lt),Dn.removeClass(rn),Bn.removeClass(rn),a.removeClass(Cn).insertAfter(Ht),ce=ye.extend({},It),R(nt,!0,!0),U("x",!1),Ot.resize(),x(at,"stage"),qe(On,St,$t),B("fullscreenexit"))}function L(t,e){kt&&(t.removeClass("fotorama__shadows--left fotorama__shadows--right"),e&&!nt&&t.addClass(e.replace(/^|\s/g," "+bn+"--")))}function R(t,e,n){e&&(Ut.removeClass(dn),nt=!1,s()),t&&t!==nt&&(t.remove(),B("unloadvideo")),n&&(j(),N())}function V(t){Ut.toggleClass(ln,t)}function q(t){var e;ue.flow||(t=(e=t?t.pageX:q.x)&&!i(M(e))&&y.click,q.p!==t&&Wt.toggleClass("fotorama__pointer",t)&&(q.p=t,q.x=e))}function H(e){clearTimeout(H.t),y.clicktransition&&y.clicktransition!==y.transition?setTimeout(function(){var t=y.transition;Ot.setOptions({transition:y.clicktransition}),yt=t,H.t=setTimeout(function(){Ot.show(e)},10)},0):Ot.show(e)}function U(t,e){ue[t]=fe[t]=e}function W(t){H({index:ye(this).data().eq,slow:t.altKey,user:!0,coo:t._x-Xt.offset().left})}function Y(t){H({index:Zt.index(this)?">":"<",slow:t.altKey,user:!0})}function Q(t){Je(t,function(){setTimeout(function(){qe(Wt)},0),V(!1)})}function J(){var t;K=Ot.data=K||Ve(y.data)||Be(a),X=Ot.size=K.length,!Z.ok&&y.shuffle&&Re(K),e(),le=l(le),X&&r(!0),function(){function t(t,e){a[t?"add":"remove"].push(e)}Ot.options=y=He(y),_t="crossfade"===y.transition||"dissolve"===y.transition,ut=y.loop&&(2<X||_t&&(!yt||"slide"!==yt)),bt=+y.transitionduration||Un,Ct="rtl"===y.direction,xt=ye.extend({},y.keyboard&&Jn,y.keyboard);var e,n,i,a={add:[],remove:[]};1<X||y.enableifsingleframe?(pt=y.nav,ht="top"===y.navposition,a.remove.push(kn),Zt.toggle(!!y.arrows)):(pt=!1,Zt.hide()),f(),et=new An(ye.extend(Fn,y.spinner,zn,{direction:Ct?-1:1})),$(),S(),y.autoplay&&d(y.autoplay),wt=$e(y.thumbwidth)||64,vt=$e(y.thumbheight)||64,pe.ok=he.ok=y.trackpad&&!Vn,s(),z(y,[ce]),(ft="thumbs"===pt)?(g(X,"navThumb"),tt=ne,zt=Qn,e=qt,n=ye.Fotorama.jst.style({w:wt,h:vt,b:y.thumbborderwidth,m:y.thumbmargin,s:jt,q:!Ln}),(i=e[0]).styleSheet?i.styleSheet.cssText=n:e.html(n),Xt.addClass(wn).removeClass(_n)):"dots"===pt?(g(X,"navDot"),tt=ee,zt=Yn,Xt.addClass(_n).removeClass(wn)):(pt=!1,Xt.removeClass(wn+" "+_n)),pt&&(ht?Kt.insertBefore(Wt):Kt.insertAfter(Wt),b.nav=!1,b(tt,te,"nav")),mt=y.allowfullscreen,gt=mt?(ae.prependTo(Wt),Rn&&"native"===mt):(ae.detach(),!1),t(_t,"fotorama__wrap--fade"),t(!_t,"fotorama__wrap--slide"),t(!y.captions,"fotorama__wrap--no-captions"),t(Ct,"fotorama__wrap--rtl"),t("always"!==y.arrows,"fotorama__wrap--toggle-arrows"),t(!(kt=y.shadows&&!Vn),"fotorama__wrap--no-shadows"),Ut.addClass(a.add.join(" ")).removeClass(a.remove.join(" ")),ye.extend({},y)}(),J.i||(J.i=!0,((t=y.startindex)||y.hash&&be.hash)&&(ct=Ne(t||be.hash.replace(/^#/,""),K,0===Ot.index||t,t)),le=ot=rt=st=ct=c(ct)||0),X?G()||(nt&&R(nt,!0),at=[],A(Wn),J.ok=!0,Ot.show({index:le,time:0}),Ot.resize()):Ot.destroy()}function G(){return!G.f===Ct?(G.f=Ct,le=X-1-le,Ot.reverse(),!0):void 0}function Z(){Z.ok||(Z.ok=!0,B("ready"))}Bn=ye("html"),Dn=ye("body");var K,X,tt,et,nt,it,at,ot,rt,st,dt,lt,ct,ut,pt,ft,ht,mt,gt,_t,wt,vt,bt,yt,kt,Ct,xt,Mt,$t,St,Et,Tt,Pt,It,At,Ft,zt,Bt,Dt,Ot=this,jt=ye.now(),Nt=on+jt,Lt=a[0],Rt=1,Vt=a.data(),qt=ye("<style></style>"),Ht=ye(Le("fotorama--hidden")),Ut=ye(Le(sn)),Wt=ye(Le(un)).appendTo(Ut),Yt=(Wt[0],ye(Le("fotorama__stage__shaft")).appendTo(Wt)),Qt=ye(),Jt=ye(Le(hn+" fotorama__arr--prev"+Pn)),Gt=ye(Le(hn+" fotorama__arr--next"+Pn)),Zt=Jt.add(Gt).appendTo(Wt),Kt=ye(Le("fotorama__nav-wrap")),Xt=ye(Le(gn)).appendTo(Kt),te=ye(Le("fotorama__nav__shaft")).appendTo(Xt),ee=ye(),ne=ye(),ie=(Yt.data(),te.data(),ye(Le("fotorama__thumb-border")).appendTo(te)),ae=ye(Le("fotorama__fullscreen-icon"+Pn)),oe=ae[0],re=ye(Le(Tn)),se=ye(Le("fotorama__video-close")).appendTo(Wt)[0],de=ye(Le("fotorama__spinner")),le=!1,ce={},ue={},pe={},fe={},he={},me={},ge={},_e=0,we=[];Ut[Wn]=ye(Le(pn)),Ut[Qn]=ye(Le(vn+" fotorama__nav__frame--thumb"+Pn,Le(En))),Ut[Yn]=ye(Le(vn+" fotorama__nav__frame--dot"+Pn,Le("fotorama__dot"))),me[Wn]=[],me[Qn]=[],me[Yn]=[],ge[Wn]={},Ut.addClass(Nn?"fotorama__wrap--css3":"fotorama__wrap--css2").toggleClass(ln,!y.controlsonstart),Vt.fotorama=this,Ot.startAutoplay=function(t){return Ot.autoplay||(Tt=Pt=!1,d(t||y.autoplay),N()),this},Ot.stopAutoplay=function(){return Ot.autoplay&&(Tt=Pt=!0,N()),this},Ot.show=function(e){"object"!=typeof e?(a=e,e={}):a=e.index,a=">"===a?rt+1:"<"===a?rt-1:"<<"===a?0:">>"===a?X-1:a,a=void 0===(a=isNaN(a)?Ne(a,K,!0):a)?le||0:a,Ot.activeIndex=le=c(a),dt=u(le),Et=p(le),lt=k(le+(Ct?-1:1)),at=[le,dt,Et],rt=ut?a:le;var t=Math.abs(st-rt),n=Ie(e.time,function(){return Math.min(bt*(1+(t-1)/12),2*bt)}),i=e.overPos;e.slow&&(n*=10);var a=it;Ot.activeFrame=it=K[le];var o=a===it&&!e.user;R(nt,it.i!==K[k(ot)].i),g(at,"stage"),w(Vn?[rt]:[rt,u(rt),p(rt)]),U("go",!0),o||B("show",{user:e.user,time:n}),Tt=!0;var r=Ot.show.onEnd=function(t){if(!r.ok){if(r.ok=!0,t||F(!0),o||B("showend",{user:e.user}),!t&&yt&&yt!==y.transition)return Ot.setOptions({transition:yt}),void(yt=!1);h(),x(at,"stage"),U("go",!1),S(),q(),j(),N()}};return _t?Xe(it[Wn],le!==st?K[st][Wn]:null,Qt,{time:n,method:y.transition,onEnd:r},we):Ke(Yt,{pos:-Te(rt,ce.w,y.margin,ot),overPos:i,time:n,onEnd:r}),$(),pt&&(I(zt),me[zt].push(it[zt].addClass(yn)),P({time:n,coo:(i=l(le+Ce(rt-st,-1,1)))!==le&&e.coo,guessIndex:void 0!==e.coo?i:le,keep:o}),ft&&T(n)),Et=void 0!==st&&st!==le,st=le,y.hash&&Et&&!Ot.eq&&(n=it.id||le+1,be.replace(be.protocol+"//"+be.host+be.pathname.replace(/^\/?/,"/")+be.search+"#"+n)),this},Ot.requestFullScreen=function(){return mt&&!Ot.fullScreen&&($t=On.scrollTop(),St=On.scrollLeft(),qe(On),U("x",!0),It=ye.extend({},ce),a.addClass(Cn).appendTo(Dn.addClass(rn)),Bn.addClass(rn),R(nt,!0,!0),Ot.fullScreen=!0,gt&&In.request(Lt),Ot.resize(),x(at,"stage"),h(),B("fullscreenenter")),this},Ot.cancelFullScreen=function(){return gt&&In.is()?In.cancel(ve):t(),this},Ot.toggleFullScreen=function(){return Ot[(Ot.fullScreen?"cancel":"request")+"FullScreen"]()},We(ve,In.event,function(){!K||In.is()||nt||t()}),Ot.resize=function(t){if(!K)return this;var e=arguments[1]||0,n=arguments[2];z(Ot.fullScreen?{width:"100%",maxwidth:null,minwidth:null,height:"100%",maxheight:null,minheight:null}:He(t),[ce,n||Ot.fullScreen||y]);var i=ce.width,a=ce.height,o=ce.ratio,t=On.height()-(pt?Xt.height():0);return Ee(i)&&(Ut.addClass(cn).css({width:i,minWidth:ce.minwidth||0,maxWidth:ce.maxwidth||99999}),i=ce.W=ce.w=Ut.width(),ce.nw=pt&&Se(y.navwidth,i)||i,y.glimpse&&(ce.w-=Math.round(2*(Se(y.glimpse,i)||0))),Yt.css({width:ce.w,marginLeft:(ce.W-ce.w)/2}),(a=Se(a,t)||o&&i/o)&&(i=Math.round(i),a=ce.h=Math.round(Ce(a,Se(ce.minheight,t),Se(ce.maxheight,t))),Wt.stop().animate({width:i,height:a},e,function(){Ut.removeClass(cn)}),F(),pt&&(Xt.stop().animate({width:ce.nw},e),P({guessIndex:le,time:e,keep:!0}),ft&&b.nav&&T(e)),Mt=n||!0,Z())),_e=Wt.offset().left,this},Ot.setOptions=function(t){return ye.extend(y,t),J(),this},Ot.shuffle=function(){return K&&Re(K)&&J(),this},Ot.destroy=function(){return Ot.cancelFullScreen(),Ot.stopAutoplay(),K=Ot.data=null,r(),at=[],A(Wn),J.ok=!1,this},Ot.playVideo=function(){var t=it,e=t.video,n=le;return"object"==typeof e&&t.videoReady&&(gt&&Ot.fullScreen&&Ot.cancelFullScreen(),De(function(){return!In.is()||n!==le},function(){n===le&&(t.$video=t.$video||ye(ye.Fotorama.jst.video(e)),t.$video.appendTo(t[Wn]),Ut.addClass(dn),nt=t.$video,s(),Zt.blur(),ae.blur(),B("loadvideo"))})),this},Ot.stopVideo=function(){return R(nt,!0,!0),this},Wt.on("mousemove",q),ue=en(Yt,{onStart:D,onMove:function(t,e){L(Wt,e.edge)},onTouchEnd:O,onEnd:function(t){L(Wt);var e,n,i,a,o=(qn&&!Ft||t.touch)&&y.arrows&&"always"!==y.arrows;t.moved||o&&t.pos!==t.newPos&&!t.control?(e=t.newPos,n=ce.w,i=y.margin,a=ot,a=-Math.round(e/(n+(i||0))-(a||0)),Ot.show({index:a,time:_t?bt:t.time,overPos:t.overPos,user:!0})):t.aborted||t.control||(a=t.startEvent,t=o,o=a.target,ye(o).hasClass(Tn)?Ot.playVideo():o===oe?Ot.toggleFullScreen():nt?o===se&&R(nt,!0,!0):t?V():y.click&&H({index:a.shiftKey||Ze(M(a._x)),slow:a.altKey,user:!0}))},timeLow:1,timeHigh:1,friction:2,select:"."+kn+", ."+kn+" *",$wrap:Wt}),fe=en(te,{onStart:D,onMove:function(t,e){L(Xt,e.edge)},onTouchEnd:O,onEnd:function(t){function e(){P.l=t.newPos,j(),N(),v(t.newPos,!0)}var n;t.moved?t.pos!==t.newPos?(Tt=!0,Ke(te,{time:t.time,pos:t.newPos,overPos:t.overPos,onEnd:e}),v(t.newPos),kt&&L(Xt,je(t.newPos,fe.min,fe.max))):e():(n=t.$target.closest("."+vn,te)[0])&&W.call(n,t.startEvent)},timeLow:.5,timeHigh:2,friction:5,$wrap:Xt}),pe=nn(Wt,{shift:!0,onEnd:function(t,e){D(),O(),Ot.show({index:e,slow:t.altKey})}}),he=nn(Xt,{onEnd:function(t,e){D(),O();var n=Pe(te)+.25*e;te.css(xe(Ce(n,fe.min,fe.max))),kt&&L(Xt,je(n,fe.min,fe.max)),he.prevent={"<":n>=fe.max,">":n<=fe.min},clearTimeout(he.t),he.t=setTimeout(function(){v(P.l=n,!0)},Hn),v(n)}}),Ut.hover(function(){setTimeout(function(){At||V(!(Ft=!0))},0)},function(){Ft&&V(!(Ft=!1))}),Bt=function(t){Ge(t),Y.call(this,t)},Dt=(Dt={onStart:function(){D(),ue.control=!0},onTouchEnd:O})||{},Zt.each(function(){var e,t=ye(this),n=t.data();n.clickOn||(n.clickOn=!0,ye.extend(tn(t,{onStart:function(t){e=t,(Dt.onStart||ke).call(this,t)},onMove:Dt.onMove||ke,onTouchEnd:Dt.onTouchEnd||ke,onEnd:function(t){t.moved||Bt.call(this,e)}}),{noMove:!0}))}),Zt.each(function(){Qe(this,function(t){Y.call(this,t)}),Q(this)}),Qe(oe,Ot.toggleFullScreen),Q(oe),ye.each("load push pop shift unshift reverse sort splice".split(" "),function(t,e){Ot[e]=function(){return K=K||[],"load"!==e?Array.prototype[e].apply(K,arguments):arguments[0]&&"object"==typeof arguments[0]&&arguments[0].length&&(K=Ve(arguments[0])),J(),Ot}}),J()},ye.fn.fotorama=function(a){return this.each(function(){var e=this,t=ye(this),n=t.data(),i=n.fotorama;i?i.setOptions(a,!0):De(function(){return!(0===(t=e).offsetWidth&&0===t.offsetHeight);var t},function(){n.urtext=t.html(),new ye.Fotorama(t,ye.extend({},k,o.fotoramaDefaults,a,n))})})},ye.Fotorama.instances=[],ye.Fotorama.cache={},ye.Fotorama.measures={},(ye=ye||{}).Fotorama=ye.Fotorama||{},ye.Fotorama.jst=ye.Fotorama.jst||{},ye.Fotorama.jst.style=function(t){var e;return""+(".fotorama"+(null==(e=t.s)?"":e)+" .fotorama__nav--thumbs .fotorama__nav__frame{\npadding:"+(null==(e=t.m)?"":e)+"px;\nheight:"+(null==(e=t.h)?"":e)+"px}\n.fotorama"+(null==(e=t.s)?"":e)+" .fotorama__thumb-border{\nheight:"+(null==(e=t.h-t.b*(t.q?0:2))?"":e)+"px;\nborder-width:"+(null==(e=t.b)?"":e)+"px;\nmargin-top:"+(null==(e=t.m)?"":e))+"px}"},ye.Fotorama.jst.video=function(t){var e="",n=Array.prototype.join;return e+='<div class="fotorama__video"><iframe src="',function(){e+=n.call(arguments,"")}(("youtube"==t.type?t.p+"youtube.com/embed/"+t.id+"?autoplay=1":"vimeo"==t.type?t.p+"player.vimeo.com/video/"+t.id+"?autoplay=1&badge=0":t.id)+(t.s&&"custom"!=t.type?"&"+t.s:"")),e+='" frameborder="0" allowfullscreen></iframe></div>\n'},ye(function(){ye("."+on+':not([data-auto="false"])').fotorama()})}(window,document,location,"undefined"!=typeof jQuery&&jQuery),function(){function t(){}t.prototype.ready=function(){consoleDbg("INIT: viewer man"),this.initIphone(),FE.runAndClr("viewerMan/ready")},t.prototype.initIphone=function(){var t=$("#fixed-sections,#sections_list").children(".is_iphone");if(0===t.length)return!1;var a=$(window).width(),o=screen.height,r=$(window).width()/2,s=screen.height/2,d={x:0,y:0};t.find(".section-image").css({backgroundSize:"cover"}),t.on("mousemove",function(t){var e,n=$(this).find(".section-image:first"),i=document.documentElement&&document.documentElement.scrollTop?(e=document.documentElement.scrollTop,document.documentElement.scrollLeft):(e=document.body.scrollTop,document.body.scrollLeft);d.x=(t.pageX-i-a+r)/(r/10),d.y=(t.pageY-e-o+s)/(s/10),n.css("transform","translate("+-.75*d.x+"px, "+-.75*d.y+"px)")})},FE.runOnReady(function(){window.viewerMan=new t,window.viewerMan.ready()})}(),function(){function t(){this.isEditor=$("body").hasClass("body_pages_edit"),this.autoNextQuizEventFired=!1}t.prototype.ready=function(){consoleDbg("INIT: quiz web handler"),this.initQuiz(null,!0),FE.runAndClr("quizWebHandler/ready")},t.prototype.initQuiz=function(t,e){var n=null;(n=!(n=t?t.find(".quiz-form"):n)||0===n.length?$(".quiz-form"):n)&&0!==n.length&&(e&&n.each(function(){quizWebHandler.initQuizForm($(this))}),n.find(".user_form").on("submit",function(){var t=$(this),e=t.find(".user_form_fields_list .field:last").attr("pos"),n=t.find(".field.active"),e=n.attr("pos")===e;return e?!(e&&!i(n))&&void 0:(t.find(".quiz__nav_next").trigger("click"),!1)}),this.enableQuizNav())},t.prototype.initQuizForm=function(t){t=quizWebHandler.quizForm(t);0!==t.totalSteps&&t.totalSteps<2?(t.$btn.next.addClass("quiz__disabled"),t.$btn.submit.removeClass("quiz__disabled")):(t.$btn.next.removeClass("quiz__disabled"),t.$btn.submit.addClass("quiz__disabled")),quizWebHandler.toQuizStep(t,0)},t.prototype.quizForm=function(t){var e=t.find(".quiz"),n=t.find(".quiz.active"),i=t.find(".quiz__progress_container"),a=t.closest(".quiz-form");return{$quiz:a,quizHasDesignUpdate:a.hasClass("quiz-form--v1"),$form:t,$steps:e,totalSteps:e.length,$activeStep:n,activeIndex:e.index(n),$progressContainer:i,$pSteps:{all:i.find(".quiz__progress_dot"),inactive:i.find(".quiz__progress_dot:not(.active)"),active:i.find(".quiz__progress_dot.active")},$indicator:{current:t.find("#steps_bar"),all:t.find("#all_steps")},$btn:{prev:t.find(".quiz__nav_prev"),next:t.find(".quiz__nav_next"),submit:t.find(".btn-new.btn-submit")},$regulation:t.find(".user_form_regulation")}};var i=function(e){function t(t){FE.run("quiz-validate-error",{quizHasDesignUpdate:l,step:e}),o.text(t),l?e.addClass("field--has-error"):o.removeClass("hidden")}var n=e.hasClass("is_required"),i=e.data("type"),a=e.find(["input[type=text]","input[type=tel]","input[type=radio]:checked","input[type=checkbox]:checked","option:not([hidden]):selected","textarea"].join(", ")),o=e.find(".ui_error"),r="Это поле нужно заполнить",s="Телефон содержит неверные символы",d="Введите корректный адрес электронной почты",l=e.closest(".quiz-form").hasClass("quiz-form--v1"),c=function(t){if(-1!==["fcheckbox","fradio","fselect"].indexOf(i))return 0===t.length;t=t.val().trim();return 0===t.length||!t};if(l?e.removeClass("field--has-error"):o.addClass("hidden"),n&&c(a))return t(r),!1;if("ftextbox"===i&&!c(a)){c=a.closest(".field").data("cls");if("femail"===c&&!function(t){t=t.val().trim();return/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test(t)}(a))return t(d),!1;if("fphone"===c&&!function(t){t=t.val().trim();return!(0<t.length)||5<t.length&&/^\+?[1-9]{1}[\d\s()-]*$/i.test(t)}(a))return t(s),!1}return!0};t.prototype.nextQuiz=function(t){var e=this.quizForm(t),t=e.activeIndex+1;if(!quizWebHandler.isEditor&&!0!==i(e.$activeStep))return!1;quizWebHandler.toQuizStep(e,t)},t.prototype.prevQuiz=function(t){var e=this.quizForm(t),t=e.activeIndex-1;t<0&&(t=0),quizWebHandler.toQuizStep(e,t)},t.prototype.adaptQuizContent=function(t){var e=t.$form.find(".wind-body .body_content"),t=t.$form.find(".wind-footer"),t=parseInt(t.outerHeight(!0));e.css("padding-bottom",t)},t.prototype.toQuizStep=function(t,e){var n=0===e,i=t.totalSteps-1===e,a=1===t.$form.data("is-regulation-enabled");t.$steps.removeClass("active"),t.$steps.eq(e).addClass("active"),n?t.$btn.prev.addClass("quiz__disabled"):t.$btn.prev.removeClass("quiz__disabled"),i?(t.$btn.submit.removeClass("quiz__disabled"),t.$btn.next.addClass("quiz__disabled"),a&&t.$regulation.removeClass("hidden")):(t.$btn.submit.addClass("quiz__disabled"),t.$btn.next.removeClass("quiz__disabled"),t.$regulation.addClass("hidden"));a=t.$progressContainer.attr("data-progress-color")||"aaa";t.$pSteps.active.removeClass("active"),t.$pSteps.all.removeAttr("style"),t.$pSteps.all.eq(e).addClass("active").css("background-color","#"+a),t.$indicator.all.text(t.totalSteps),t.$indicator.current.text(e+1);e=t.$steps.eq(e).find("input[type=text]:visible, textarea");-1!==t.activeIndex&&e.length&&e.trigger("focus"),i||($(".wrap-for-formPopover").animate({scrollTop:0},300),t.$form.find(".wind-body").animate({scrollTop:0},300)),this.adaptQuizContent(t)},t.prototype.enableQuizNav=function(t){var e=null,n=null;void 0!==t&&t.length&&(e=t.find(".quiz__nav_next"),n=t.find(".quiz__nav_prev")),e&&0!==e.length||(e=$(".quiz__nav_next")),n&&0!==n.length||(n=$(".quiz__nav_prev")),e&&0<e.length&&e.off("click").on("click",function(){var t=$(this).closest(".user_form");quizWebHandler.nextQuiz(t)}),n&&0<n.length&&n.off("click").on("click",function(){var t=$(this).closest(".user_form");quizWebHandler.prevQuiz(t)})},t.prototype.initAutoNextQuiz=function(t,e){e<1||void 0!==t&&t.length&&(t.find(".fradio").on("change click",".quiz-field__input",function(){quizWebHandler.autoNextQuiz($(this))}),t.find(".fselect").on("change","select",function(){quizWebHandler.autoNextQuiz($(this))}))},t.prototype.autoNextQuiz=function(t){var e;quizWebHandler.autoNextQuizEventFired||(e=t.closest(".user_form"),t=(t=this.quizForm(e)).totalSteps-1===t.activeIndex,quizWebHandler.autoNextQuizEventFired=!0,t?(e.find(".btn-submit").trigger("click"),quizWebHandler.autoNextQuizEventFired=!1):setTimeout(function(){quizWebHandler.nextQuiz(e),quizWebHandler.autoNextQuizEventFired=!1},150))},FE.runOnReady(function(){window.quizWebHandler=new t,window.quizWebHandler.ready()})}(),function(){"use strict";function t(){this.inited=!1,this.is_ready=!1,this.blocksForStartAnimation={},this.height_window=0}t.prototype.init=function(){var t=$(".blk--is_animated").length;this.height_window=window.innerHeight,this.inited||0===t||(this.initEvents(),this.onScroll(),this.inited=!0)},t.prototype.initEvents=function(){var e=!1;$(window).on("resize",function(t){!1===e&&(e=setTimeout(function(){e=!1,this.height_window=window.innerHeight,this.onScroll()}.bind(this),500))}.bind(this)),$(document).on("scroll",function(t){this.onScroll()}.bind(this)),$("#popup_list .section_popup").on("scroll",function(t){this.onScroll()}.bind(this)),FE.add("show_section_popup",function(){this.onScroll()}.bind(this))},t.prototype.getAnimatedObject=function(t){switch(t.attr("blk_class")){case"blk_image":return t.find("img:first");case"blk_form":return t.find(".blk_form_wrap:first");case"blk_text":return t.find(".blk-data:first");case"blk_video":return t.find(".video_container:first");case"blk_slider":return t.find(".fotorama:first");case"blk_button":return t.find("a:first");default:return t}},t.prototype.onScroll=function(){for(var t in this.blocksForStartAnimation){var e=this.blocksForStartAnimation[t],t=this.getAnimatedObject(e);this.animationIsDisabled(t)?this.showBlock(e):this.isVisibleOnDisplay(t)&&this.startAnimationDeferred(e,t)}},t.prototype.animationIsDisabled=function(t){return 0===t.length||0<t.closest(".blk_box_slider_self").length},t.prototype.isVisibleOnDisplay=function(t){var e=window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body&&document.body.scrollTop,n=e+this.height_window,i=t.offset().top,t=i+t.outerHeight();return i<=n&&e<=t},t.prototype.startAnimationDeferred=function(t,e){var n=t.data("animation-duration"),i=parseFloat(t.data("animation-delay"));this.setAnimationStyleProperties(e,n),0<i?setTimeout(function(){this.startAnimationNow(t,e)}.bind(this),1e3*i):this.startAnimationNow(t,e)},t.prototype.startAnimationNow=function(t,e){this.setAnimationClass(e,t.data("animation-class")),this.showBlock(t)},t.prototype.showBlock=function(t){t.removeClass("blk--is_animated");t=t.attr("id");this.blocksForStartAnimation[t]&&delete this.blocksForStartAnimation[t]},t.prototype.setAnimationClass=function(t,e){t.hasClass(e)||t.addClass(e)},t.prototype.setAnimationStyleProperties=function(t,e){var n=t[0],i=window.getComputedStyle(n),t="",t=i.getPropertyValue("-webkit-animation-delay")?"-webkit-animation-delay":i.getPropertyValue("-moz-animation-delay")?"-moz-animation-delay":i.getPropertyValue("-o-animation-delay")?"-o-animation-delay":"animation-delay";n.style.setProperty(t,"0s"),t=i.getPropertyValue("-webkit-animation-duration")?"-webkit-animation-duration":i.getPropertyValue("-moz-animation-duration")?"-moz-animation-duration":i.getPropertyValue("-o-animation-duration")?"-o-animation-duration":"animation-duration",n.style.setProperty(t,e+"s")},t.prototype.addBlockForStartAnimation=function(t){0<t.length&&(this.blocksForStartAnimation[t.attr("id")]=t)},t.prototype.initAnimationForSectionPopup=function(t){t.find(".blk--is_animated").each(function(){window.animManager.addBlockForStartAnimation($(this))}),this.inited||this.init()},t.prototype.isReady=function(){return this.is_ready},t.prototype.onReady=function(){0<window.location.href.indexOf("pages/page_preview/is_service_page:1")?$(".blk--is_animated").each(function(){window.animManager.showBlock($(this))}):($(".blk--is_animated").each(function(){window.animManager.addBlockForStartAnimation($(this))}),this.is_ready=!0,this.init(),FE.runAndClr("animManager/ready"))},window.animManager=new t,window.animManager.onReady()}(),function(){var f={},c=ge("bs_cont_wrap");f.setBlockData=function(t){if(null==t||null==t.id)return!1;var e={},n=$(ge(t.id));if(0===n.length)return!1;var i=f.getRelatedBlockData(n,!0);if(i.blk_height==t.blk_height&&i.blk_width==t.blk_width&&i.pos_left==t.pos_left&&i.pos_top==t.pos_top&&i.rotate==t.rotate&&i.parent_id==t.parent_id)return!0;null!=t.blk_height&&(e.height=t.blk_height),null!=t.blk_width&&(e.width=t.blk_width),null!=t.pos_left&&(e.left=t.pos_left),null!=t.pos_top&&(e.top=t.pos_top),null!=t.rotate&&(e.transform=0==t.rotate?"":"rotate("+t.rotate+"deg) perspective(0)");var a=0,o=ge(t.section_cell_id),r=hasClass(domPN(domPN(o)),"is_absolute");i.section_cell_id!=t.section_cell_id&&(null==t.parent_id&&$(o).append(n),a=t.section_cell_id);var s,d=t.parent_id;switch(i.parent_id!=t.parent_id&&(s=null==t.parent_id?t.section_cell_id:t.parent_id,o=ge(s),u=$(o),null!=t.parent_id&&hasClass(o,"slide")&&hasClass(o,"hidden-slide")&&pages_editor.setSlide(u.closest(".blk_box_slider"),s),u.append(n),d=t.parent_id),n.attr("blk_class")){case"blk_text":case"blk_image":null!=e.height&&delete e.height;break;case"blk_form":var l=n.find(".blk_form_wrap form:visible");l.length&&(e.height=l.first().get(0).offsetHeight)}n.css(e),FE.run("section/resized"),FE.run("hybrid/resized"),hybridBlockResizer.processingBlockAfterResize(n);var c,u=!1;return null==t.parent_id||0!==(c=n.parents(".slide.hidden-slide")).length&&(u=!0,c.removeClass("hidden-slide")),hybridManager.saveBlockData(n,a,d,i.section_cell_id),r||dndHelper.clearBlockStyles(n,!1,$(ge(t.section_cell_id)),!0),u&&c.addClass("hidden-slide"),hybridManager.updateBlockPcData(t),!0},f.getBlockData=function(t){var e,n={id:t.attr("id"),block_name:t.attr("blk_class"),rotate:0};switch("section"!==n.block_name&&(n.rotate=f.getRotateAngle(t)),n.block_name){case"blk_yandex_map":t=t.find(".yandex_map:first");break;case"blk_button_popup":t=t.find(".blk_button_data_wrap:first a:first");break;case"blk_html":t=t.find(".blk-data:first");break;case"blk_video":(t=t.find(".blk_video_data_wrap:first")).hasClass("empty")||(t=t.find("iframe,.user-video").first());break;case"blk_divider":t=t.find(".blk_divider_self:first");break;case"blk_text":t=t.find(".blk-data:first");break;case"blk_form":var i=t.find(".blk_form_wrap:first a.btn-form-popover:first");t=0<i.length?i:t.find(".blk_form_wrap:first form:first");break;case"blk_button":t=t.find(".blk_button_data_wrap:first a:first");break;case"blk_box_slider":t=t.find(".blk_box_slider_self:first");break;case"blk_image":case"blk_image_ext":(t=t.find(".blk_image_data_wrap")).hasClass("empty")||(t=t.find("div.img_container:first"))}return"section"==n.block_name?n.blk_height=Math.round(t.outerHeight()):(e=this.getPosition(t),n.pos_top=e.top,n.pos_left=e.left,n.blk_height=Math.round(t.outerHeight()),n.blk_width=Math.round(t.outerWidth())),n},f.getRelatedBlockData=function(t,e){var n=f.getBlockData(t),i=t.parent();return i.hasClass("slide cell")&&(t=f.getRelatedBlockData(i),null!=n.pos_left&&(n.pos_left-=t.pos_left,n.pos_top-=t.pos_top)),n.parent_id=null,n.section_cell_id=null,e&&(i.hasClass("section-cell")?n.section_cell_id=i.attr("id"):(n.parent_id=i.attr("id"),n.section_cell_id=i.closest(".section-cell").attr("id"))),n},f.getPosition=function(t){var e=t,n=0,i=0,a=!0,o=e=null==t.nodeType?t.get(0):e,r=hasClass(e,"is_hidden");r&&removeClass(e,"is_hidden");t=hasClass(e,"blk-hidden-adaptive");for(t&&removeClass(e,"blk-hidden-adaptive");null!=e&&!hasClass(e,"blk_section_inner")&&!hasClass(e,"blk_section");)!a&&"static"===getComputedStyle(e).getPropertyValue("position")||(n+=e.offsetTop,i+=e.offsetLeft,a=!1),e=domPN(e);return r&&addClass(o,"is_hidden"),t&&addClass(o,"blk-hidden-adaptive"),{top:Math.round(n),left:Math.round(i)}},f.getRotateAngle=function(t){t=(t=null==t.nodeType?t.get(0):t).style.transform;return null==t||""==t||null==(t=/rotate\s?\((-?\d*)deg\)/.exec(t))||t.length<2?t=0:(t=parseInt(t[1]),isNaN(t)&&(t=0)),t},f.getRotatedPosition=function(t,e,n){var i,a=0,o=0;return 0!=n?0!=(i=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)))&&(n=n-Math.atan2(e,t),a=i*Math.cos(n),o=-i*Math.sin(n)):(a=t,o=e),{x:a,y:o}},f.getRealOffset=function(t){for(var e=0,n=0,i=t,a=0;i&&"body"!==i.nodeName.toLowerCase()&&++a<=100;)e+=i.offsetTop-i.scrollTop,n+=i.offsetLeft-i.scrollLeft,i=i.offsetParent;return{top:e,left:n}},f.isPointInPolygon=function(t,e,n){for(var i=!1,a=t.length,o=a-1,r=0;r<a;o=r++)t[r][1]>n!=t[o][1]>n&&e<(t[o][0]-t[r][0])*(n-t[r][1])/(t[o][1]-t[r][1])+t[r][0]&&(i=!i);return i},f.isIntersectPolygons=function(t,e){for(var n=e.length,i=0;i<n;i++)if(f.isPointInPolygon(t,e[i][0],e[i][1]))return!0;for(var a=t.length,i=0;i<a;i++)if(f.isPointInPolygon(e,t[i][0],t[i][1]))return!0;for(i=0;i<a;i++){var o=i+1;a<=o&&(o=0);for(var r=0;r<n;r++){var s=r+1;if(n<=s&&(s=0),function(t,e,n,i,a,o,r,s){var d=(s-o)*(n-t)-(r-a)*(i-e);if(0==d)return!1;s=((r-a)*(e-o)-(s-o)*(t-a))/d,d=((n-t)*(e-o)-(i-e)*(t-a))/d;return 0<=s&&s<=1&&0<=d&&d<=1}(t[i][0],t[i][1],t[o][0],t[o][1],e[r][0],e[r][1],e[s][0],e[s][1]))return!0}}return!1},f.getBlockRelatedAngle=function(t){null==t.nodeType&&(t=t.get(0));for(var e=0;null!=t;)e+=f.getRotateAngle(t),t=closest(domPN(t),"blk_box_slider");return e},f.isRotatedBlock=function(t){for(;null!=t;){if(0!==f.getRotateAngle(t))return!0;t=closest(domPN(t),"blk_box_slider")}return!1},f.getBlockPolygon=function(t,e){var n=t.getBoundingClientRect(),i=f.getBlockRelatedAngle(t);if(0===i)return[[n.x,n.y],[n.x+n.width,n.y],[n.x+n.width,n.y+n.height],[n.x,n.y+n.height]];var a=0,o=0;(e=null==e?!1:e)&&(a=c.scrollTop,o=c.scrollLeft);var r=t.offsetWidth/2,s=t.offsetHeight/2,d=Math.PI*i/180,l=n.x+n.width/2,e=n.y+n.height/2,t=f.getRotatedPosition(-r,s,d),i=f.getRotatedPosition(r,s,d),n=f.getRotatedPosition(r,-s,d),d=f.getRotatedPosition(-r,-s,d);return[[l+t.x+o,e-t.y+a],[l+i.x+o,e-i.y+a],[l+n.x+o,e-n.y+a],[l+d.x+o,e-d.y+a]]},f.getPolygonFromRotatedRect=function(t,e,n,i,a){var o=t/2,r=e/2,s=Math.PI*n/180,t=i+o,e=a+r,n=f.getRotatedPosition(-o,r,s),i=f.getRotatedPosition(o,r,s),a=f.getRotatedPosition(o,-r,s),s=f.getRotatedPosition(-o,-r,s);return[[t+n.x,e-n.y],[t+i.x,e-i.y],[t+a.x,e-a.y],[t+s.x,e-s.y]]},f.getBoundingClientRotatedRect=function(t,e,n,i,a){for(var o=f.getPolygonFromRotatedRect(t,e,n,i,a),r=o.length,s=null,d=null,l=null,c=null,u=0;u<r;u++){var p=o[u];(null===s||s>p[1])&&(s=p[1]),(null===l||l<p[1])&&(l=p[1]),(null===d||d>p[0])&&(d=p[0]),(null===c||c<p[0])&&(c=p[0])}return{top:s,left:d,width:c-d,height:l-s}},FE.runOnReady(function(){window.hybridData=f})}(),function(){"use strict";var s={mapsData:[],mapInstances:{},init:function(){if(null!=window.ymaps)return s.mapScriptLoaded(),!1;setTimeout(function(){var t=ce("script",{src:"https://api-maps.yandex.ru/"+window.YANDEX_MAPS_API_VERSION+"/?lang=ru_RU&apikey="+window.YANDEX_MAPS_API_KEY,type:"text/javascript"});geByTag1("head").appendChild(t),t.onload=s.mapScriptLoaded},0)},loadMapsData:function(){for(var t=0;t<s.mapsData.length;t++){var e,n=s.mapsData[t];null!=ge(n.blockId)&&((e=s.mapInstances[n.blockId]=new ymaps.Map("map_"+n.blockId,{center:[n.lat,n.lon],zoom:17,behaviors:["default"],controls:["zoomControl"]})).behaviors.isEnabled("scrollZoom")&&e.behaviors.disable("scrollZoom"),n=new ymaps.Placemark([n.lat,n.lon]),e.geoObjects.add(n))}},mapScriptLoaded:function(){if(null==window.ymaps)throw new Error("#5410 Yandex Map not inited");ymaps.ready(s.loadMapsData)},reInitMap:function(t,e,n){if(null!=t&&null!=window.ymaps&&ymaps.Map){var i=s.mapInstances,a=$("#map_"+t),o=a.hasClass("map-bg"),r=a.closest(".blk_section");if(i[t]&&(i[t].destroy(),delete i[t],o&&r.addClass("empty_map")),a.empty(),ymaps&&n&&e){try{i[t]=new ymaps.Map("map_"+t,{center:[e,n],zoom:17,controls:["zoomControl"]}),i[t].geoObjects.add(new ymaps.Placemark([e,n]))}catch(t){consoleDbg(t)}o&&r.removeClass("empty_map")}}},addMap:function(t,e,n){s.mapsData.push({blockId:t,lat:e,lon:n})}};window.yandexMaps=s}(),FE.add("onready",function(){function e(){return o=0==o.length?$(".section_menu").filter(function(){return"none"!=$(this).css("display")}).first():o}function t(){i.show(),a.removeClass("menu-bar--full"),e().removeClass("section_menu--visible")}function n(){$(".wrap-for-shopCartModal:first:visible")&&$("#shopCartModal").wind("hide"),$(".wrap-for-formPopover:first:visible")&&$("#formPopover").wind("hide"),$(".wrap-for-btnPopupWnd:first:visible")&&$("#btnPopupWnd").wind("hide"),r.children(".blk_section.section_popup:visible").each(function(){hideSectionPopup($(this).attr("id"))}),a.hasClass("menu-bar--full")?t():(i.hide(),a.addClass("menu-bar--full"),e().addClass("section_menu--visible"))}var i=$("#aaa111"),a=$(".menu-bar:first"),o=$(),r=$("#popup_list:first");$(".js-menu-bar__button").click(n),$(".blk_button .btn-new[act=anchor], .blk_button .btn-new[act=link]").click(function(){a.hasClass("menu-bar--full")&&n()});FE.add(["popoverFormOpen","sectionPopupOpen","popupWndOpen","shopCartOpen"],t),FE.add(["adapter_manager/set_version"],function(t){adapterManager.ADAPTABILITY_TYPE_PC==t.type?e().unScrollable():e().scrollable()})}),function(){function t(){this.ADAPTABILITY_TYPE_PC="pc",this.ADAPTABILITY_TYPE_TABLET="tablet",this.ADAPTABILITY_TYPE_MOBILE="mobile370",this.view_port="editor",this.site_width=960,this.DEVICE_TABLET_CONTENT_MIN_WIDTH=800,this.DEVICE_TABLET_POPUP_MIN_WIDTH=400,this.DEVICE_MOBILE_CONTENT_MIN_WIDTH=370,this.DEVICE_MOBILE_POPUP_MIN_WIDTH=300,this.DEVICE_MOBILE_MAX_WIDTH=500,this.DEVICE_TABLET_MAX_WIDTH=800,this.MARGIN_VERSION_OLD=1,this.MARGIN_VERSION_NEW=2,this.processResizing=0,this.own_slider_editor=new e,this.types=[],this.nonPcClass="non-pc",this.data_empty={},this.states={},this.data={},this.hybridData={},this.$sections=[],this.$blocks=[],this.type=this.ADAPTABILITY_TYPE_PC,this.prev_type=this.ADAPTABILITY_TYPE_PC,this.blockTextPcContents={},this.resizeTimer=!1,this.selectors={$desktop:$(".responsive_menu .responsive_menu_item[version=pc]")},this.$defaultScopeRoot=null,this.$scopeRoot=null,this.$scopeBlocks=null,this.is_ready=!1,this.ready=function(){this.is_ready=!0,FE.runAndClr("adapterManager/ready")},this.isReady=function(){return this.is_ready},this.isEditor=function(){return"editor"==adapterManager.view_port},this.isPreview=function(){return"preview"==this.view_port},this.isView=function(){return"view"==adapterManager.view_port},this.isPC=function(){return adapterManager.ADAPTABILITY_TYPE_PC==adapterManager.type},this.getDefaultScopeRoot=function(){return this.$defaultScopeRoot||(this.$defaultScopeRoot=$("#site_wrapper1")),this.$defaultScopeRoot},this.getScopeRoot=function(){return this.$scopeRoot||this.getDefaultScopeRoot()},this.setScopeRoot=function(t){this.$scopeRoot=t},this.getDefaultScopeBlocks=function(){return this.getScopeRoot()},this.getScopeBlocks=function(){return this.$scopeBlocks||this.getDefaultScopeBlocks()},this.setScopeBlocks=function(t){this.$scopeBlocks=t},this.setData=function(t){for(var e in t)if(t.hasOwnProperty(e))if(this.data.hasOwnProperty(e))for(var n in t[e])t[e].hasOwnProperty(n)&&!this.data[e].hasOwnProperty(n)&&(this.data[e][n]=t[e][n]);else this.data[e]=t[e]},this.setHybridData=function(t){for(var e in t)if(t.hasOwnProperty(e))if(this.hybridData.hasOwnProperty(e))for(var n in t[e])t[e].hasOwnProperty(n)&&!this.hybridData[e].hasOwnProperty(n)&&(this.hybridData[e][n]=t[e][n]);else this.hybridData[e]=t[e]},this.setVersion=function(t,e){if(void 0===(e=void 0===e?{}:e).isEnableLockScreen?e.isEnableLockScreen=!0:e.isEnableLockScreen=!!e.isEnableLockScreen,e.isDisableCloseEditor=!!e.isDisableCloseEditor,e.skipProcessingItems=!!e.skipProcessingItems,void 0===e.$scopeRoot&&(e.$scopeRoot=adapterManager.getDefaultScopeRoot()),adapterManager.setScopeRoot(e.$scopeRoot),void 0===e.$scopeBlocks&&(e.$scopeBlocks=adapterManager.getDefaultScopeBlocks()),adapterManager.setScopeBlocks(e.$scopeBlocks),adapterManager.isEditor()&&!e.isDisableCloseEditor&&pages_editor.closeEditor(!0),adapterManager.prev_type=adapterManager.type,adapterManager.type=t,$.isEmptyObject(adapterManager.data)&&(adapterManager.data=adapterManager.data_empty),$.isEmptyObject(adapterManager.data[adapterManager.type])&&(adapterManager.data[adapterManager.type]={}),$.isEmptyObject(adapterManager.data[adapterManager.prev_type])&&(adapterManager.data[adapterManager.prev_type]={}),e.skipProcessingItems)adapterManager.setAdaptiveBodyClasses();else{if(e.isEnableLockScreen&&adapterManager.isEditor()){var n;switch(t){case adapterManager.ADAPTABILITY_TYPE_MOBILE:n="Переход в мобильный редактор";break;case adapterManager.ADAPTABILITY_TYPE_TABLET:n="Переход в редактор для планшета";break;case adapterManager.ADAPTABILITY_TYPE_PC:default:n="Переход в редактор для ПК"}var i=lockScreen(n,{css_class:"locker-white",show_animation:!0});$("body").addClass("editor-hidden"),setTimeout(function(){adapterManager.processingItems(),$("body").removeClass("editor-hidden"),FE.run("adapter_manager/set_version/editor",{type:t}),unlockScreen(i)},50)}else adapterManager.processingItems();FE.run("adapter_manager/set_version",{type:t})}},this.setAdaptiveBodyClasses=function(){var t=$("body");t.removeClass(adapterManager.types.join(" ")).removeClass(adapterManager.nonPcClass).addClass(adapterManager.type),adapterManager.type!==adapterManager.ADAPTABILITY_TYPE_PC&&t.addClass(adapterManager.nonPcClass)},this.initProcessingBlocks=function(t){void 0!==t?t==adapterManager.ADAPTABILITY_TYPE_PC?(adapterManager.$sections=adapterManager.getScopeRoot().find(".blk_section:visible[adapter_type="+t+"], .blk_section:visible:not([adapter_type])"),adapterManager.$blocks=adapterManager.getScopeBlocks().find(".blk:not(.skip-adapt):visible[adapter_type="+t+"], .blk:not(.skip-adapt):visible:not([adapter_type])"),adapterManager.$containers=adapterManager.getScopeBlocks().find(".blk_container:visible[adapter_type="+t+"], .blk_container:visible:not([adapter_type])")):(adapterManager.$sections=adapterManager.getScopeRoot().find(".blk_section:visible[adapter_type="+t+"]"),adapterManager.$blocks=adapterManager.getScopeBlocks().find(".blk:not(.skip-adapt):visible[adapter_type="+t+"]"),adapterManager.$containers=adapterManager.getScopeBlocks().find(".blk_container:visible[adapter_type="+t+"]")):(adapterManager.$sections=adapterManager.getScopeRoot().find(".blk_section:visible:not([adapter_type="+adapterManager.type+"])"),adapterManager.$blocks=adapterManager.getScopeBlocks().find(".blk:not(.skip-adapt):visible:not([adapter_type="+adapterManager.type+"])"),adapterManager.$containers=adapterManager.getScopeBlocks().find(".blk_container:visible:not([adapter_type="+adapterManager.type+"])"))},this.savePC=function(){adapterManager.initProcessingBlocks(adapterManager.ADAPTABILITY_TYPE_PC),adapterManager.processingBlocksBeforeResize(),adapterManager.processingContainersBeforeResize(),adapterManager.processingSectionBeforeResize()},this.setHiddenItemsVisibility=function(t){adapterManager.getScopeBlocks().find(".hidden-slide, .hidden-ms-item").toggleClass("vis",t)},this.processingItems=function(){this.processResizing=1;var t=adapterManager.getSettings(adapterManager.type);adapterManager.setHiddenItemsVisibility(!0),adapterManager.showHideSections(),adapterManager.savePC(),adapterManager.setAdaptiveBodyClasses(),FE.run("adapterManager/editor/processingAbsoluteSections"),adapterManager.initProcessingBlocks(),adapterManager.resizeContent(t),adapterManager.resizeWindowPopup(t),adapterManager.processingSectionAfterResize(t),adapterManager.processingContainersAfterResize(t),adapterManager.processingBlocksAfterResize(),adapterManager.processingMapSectionsAfterResize(),adapterManager.hasOwnProperty("slickOpt")&&adapterManager.reinitializeSlick(),adapterManager.isEditor()&&adaptiveSettingsEditor.initContainersCells(t),adapterManager.setHiddenItemsVisibility(!1),adapterManager.isEditor()&&edSidebarVue.isVisible&&edSidebarVue.setBlock(edSidebarVue.block),this.processResizing=0},this.addHybridDataItem=function(t,e,n){var i={};null==adapterManager.hybridData[t]&&(adapterManager.hybridData[t]={}),null!=n.blk_height&&(i.blk_height=parseInt(n.blk_height)),null!=n.blk_width&&(i.blk_width=parseInt(n.blk_width)),null!=n.pos_left&&(i.pos_left=parseInt(n.pos_left)),null!=n.pos_top&&(i.pos_top=parseInt(n.pos_top)),null!=n.rotate&&(i.rotate=parseInt(n.rotate)),null!=n.is_visible&&(i.is_visible=parseInt(n.is_visible)),adapterManager.hybridData[t][e]=i},this.setAdaptiveHybridDataFromObject=function(t){$.each(t,function(t,e){adapterManager.addHybridDataItem(t,e.id,e)})},this.addHybridData=function(t){for(var e in t)if(t.hasOwnProperty(e))for(var n in t[e])t[e].hasOwnProperty(n)&&adapterManager.addHybridDataItem(e,n,t[e][n])},this.removeHybridData=function(t,e){for(var n in null==e&&(e=[]),this.hybridData)-1===e.indexOf(n)&&null!==this.hybridData[n][t]&&delete this.hybridData[n][t]},this.showHideSections=function(){adapterManager.isEditor()&&adapterManager.getScopeRoot().find(".blk_section").each(function(){var t=$(this),e=t.attr("adapter_type"),n=t.attr("id"),i=void 0===adapterManager.data[adapterManager.type][n]?{}:adapterManager.data[adapterManager.type][n],a=!1;void 0!==e&&adapterManager.ADAPTABILITY_TYPE_PC!=e||((e=void 0===adapterManager.data[adapterManager.ADAPTABILITY_TYPE_PC][n]?{}:adapterManager.data[adapterManager.ADAPTABILITY_TYPE_PC][n]).is_hidden=t.hasClass("is_hidden_on_pc")?1:0,adapterManager.data[adapterManager.ADAPTABILITY_TYPE_PC][n]=e),(a=void 0!==i.is_hidden&&1==i.is_hidden?!0:a)?t.addClass("is_hidden"):t.removeClass("is_hidden")})},this.resizeContent=function(t){var e,n,i;adapterManager.isEditor()&&(e="#site_wrapper1",adapterManager.isView()&&(e+=",body"),$(e).css("min-width",t.min_width),n=!1!==t.popup_section_inner&&t.popup_section_inner,i=$(),adapterManager.$sections.each(function(){(i=$(this)).hasClass("section_popup")&&!1!==n?i.find(".blk_section_inner:first").css({width:n}):i.find(".blk_section_inner:first").css({width:t.width})}))},this.resizeWindowPopup=function(t){$("#btnPopupWnd").css("width",t.window_popover_width),$("#j_lead_confirm").css("width",t.window_popover_width)},this.processingContainersBeforeResize=function(){adapterManager.$containers.each(function(){var t=$(this),i=t.attr("adapter_type");void 0===i&&(i=adapterManager.ADAPTABILITY_TYPE_PC);var a,o=t.hasClass("v3"),e=o?".td_container_cell":".cell.container_cell",n=t.find(".blk_container_cells:first>"+e),r=t.find(".blk_container_cells:first").outerWidth(),s=i==adapterManager.ADAPTABILITY_TYPE_PC||void 0===t.attr("count-cell-in-row")?n.length:t.attr("count-cell-in-row");n.each(function(){var t=$(this),e=t.attr(o?"cell_id":"id"),n=t.css("padding");"undefined"!=typeof InstallTrigger&&(n=t.css("padding-top")+" "+t.css("padding-left")),a=number_format((100*t.outerWidth()/r).toFixed(3),3,"."),adapterManager.data[i][e]={},adapterManager.isEditor()&&(adapterManager.data[i][e]={width:a,padding:n,margin_left:parseInt(t.css("margin-left"))})});e=t.find(".blk_container_cells:first "+e+":not(:first):first");adapterManager.data[i][t.attr("id")]={cell_margin_horizontal:parseFloat(e.css("margin-left")),w_container_cells:r,count_cell_in_row:s}})},this.processingContainersAfterResize=function(a){adapterManager.$containers.each(function(){var t=$(this);t.attr("adapter_type",adapterManager.type);var e=void 0!==adapterManager.data[adapterManager.type][t.attr("id")]&&adapterManager.data[adapterManager.type][t.attr("id")],n=parseInt(0==e||void 0===e.count_cell_in_row?a.default_count_cell_in_row:e.count_cell_in_row),i=t.hasClass("v3");adapterManager.isPC()?(adapterManager.isEditor()&&i&&t.find(".blk_container_cells:first").css({display:"table"}),!adapterManager.isEditor()&&i||(adapterManager.processingCellsInBlockOnPC(t),adapterManager.isEditor()&&(e=i?".td_container_cell":".cell.container_cell",e=t.find(".blk_container_cells:first>"+e),adapterManager.setResizerPosition(e)))):!adapterManager.isEditor()&&i||(i&&t.find(".blk_container_cells:first").css({display:"flex","flex-flow":"row wrap"}),adapterManager.setCountColumn(t,n))}),adapterManager.hasOwnProperty("slickOpt")&&adapterManager.reinitializeSlick()},this.removeSlickClasses=function(t){t.length&&t.removeClass("initSlick")},this.rebuildSlick=function(t){t.length&&t.each(function(){var t=$(this),e=t.closest(".blk_box_slider"),t=t.children(".slider:first");null!=t.get(0).slick&&(t.slick("unslick"),t.slick(adapterManager.slickOpt[e.attr("id")]))})},this.reinitializeSlick=function(){var t=this.getScopeRoot();this.getScopeRoot().is("#popup_list")?this.removeSlickClasses(t.find(".initSlick")):this.removeSlickClasses(t.find("#popup_list .initSlick")),this.rebuildSlick(t.find(".blk_box_slider_self"))},this.processingCellsInBlockOnPC=function(t){var e,n=t.hasClass("v3");!adapterManager.isEditor()&&n||(e=n?".td_container_cell":".cell.container_cell",e=t.find(".blk_container_cells:first>"+e),t.find(".row-splitter").remove(),adapterManager.isEditor()&&e.each(function(){var t=$(this),e=t.attr(n?"cell_id":"id"),e=adapterManager.data[adapterManager.ADAPTABILITY_TYPE_PC][e];t.css({width:e.width+"%",padding:e.padding,"margin-left":e.margin_left})})),processingBlockInCells(e)},this.processingSectionBeforeResize=function(){adapterManager.$sections.each(function(){var t=$(this),e=t.attr("adapter_type");void 0===e&&(e=adapterManager.ADAPTABILITY_TYPE_PC);var n=t.find(".blk_section_inner:first"),i=void 0===adapterManager.data[e][t.attr("id")]?{}:adapterManager.data[e][t.attr("id")];i.pad_top=t.css("padding-top"),i.pad_bottom=t.css("padding-bottom"),i.width=n.css("width"),i["max-width"]=n.css("max-width"),adapterManager.data[e][t.attr("id")]=i})},this.processingMapSectionsAfterResize=function(){adapterManager.$sections.each(function(){var t=$(this);!t.hasClass("bg_type_map")&&"map"!=t.attr("bg_type")||yandexMaps.reInitMap(t.attr("id"),t.attr("data-map-latitude"),t.attr("data-map-longitude"))})},this.processingSectionAfterResize=function(){adapterManager.$sections.each(function(){var t=$(this);if(t.attr("adapter_type",adapterManager.type),!adapterManager.isEditor())return!0;var e=t.attr("id"),e=void 0===adapterManager.data[adapterManager.type][e]?{}:adapterManager.data[adapterManager.type][e];t.hasClass("blk-section--html")||t.hasClass("blk-section--ms")||(n={},void 0!==e.pad_top&&(n["padding-top"]=e.pad_top),void 0!==e.pad_bottom&&(n["padding-bottom"]=e.pad_bottom),t.css(n));var n={};void 0!==e.width&&(n.width=e.width),void 0!==e["max-width"]&&(n["max-width"]=e["max-width"]),t.find(".blk_section_inner:first").css(n)})},this.processingBlocksBeforeResize=function(){adapterManager.$blocks.each(function(){var t=$(this);if(0<t.closest(".slick-cloned").length)return!0;var e,n,i=t.attr("blk_class"),a=t.attr("adapter_type"),o=t.attr("id");void 0===a&&(a=adapterManager.ADAPTABILITY_TYPE_PC),"blk_image_ext"===i&&adapterManager.isEditor()&&(n=(e=t.find(".img-crop:first")).find("img:first, .svg_container"),i=t.find(".blk_image_data_wrap:first"),pages_editor.img_ext_list_w[o]={crop_start_w:e.width(),crop_start_h:e.height(),prod_start_w:n.width(),wrap_start_w:i.width(),img_position_start:0<n.length?n.position():{top:0,left:0},real_w:n.attr("real_w"),real_h:n.attr("real_h")}),adapterManager.data[a][o]=adapterManager.getAdaptiveDataOfBlock(t)})},this.processingBlocksAfterResize=function(){adapterManager.$blocks.each(function(){$(this).attr("adapter_type",adapterManager.type),adapterManager.processingBlockAfterResize($(this))})},this.getSrcImageMod=function(t,e,n){var i=t.split(".").pop(),a=t.substring(0,t.indexOf("/-/"));if("gif"==i)return t;var o=n?"/-/scale/x2":"";return void 0!==e.offset_top&&"undefined"!==e.offset_left&&"undefined"!==e.crop_w&&"undefined"!==e.crop_h&&"undefined"!==e.real_w&&"undefined"!==e.real_h&&"undefined"!==e.prod_w&&"undefined"!==e.prod_h&&(t=e.prod_h/e.real_h,n=e.prod_w/e.real_w,o+="/-/crop/"+Math.ceil(Math.abs(e.offset_left||0)/n)+"x"+Math.ceil(Math.abs(e.offset_top||0)/t)+"x"+Math.ceil((e.crop_w||0)/n)+"x"+Math.ceil((e.crop_h||0)/t)),e.crop_w&&(o+="/-/resize/"+e.crop_w),e.quality&&(o+="/-/quality/"+e.quality),o=a+(o+="/file."+i)},this.processingBlockAfterResize=function(t){var e=t.attr("id"),n=adapterManager.data[adapterManager.type][e],i={},a=adapterManager.isPC();null==n?null!=(n=adapterManager.data[adapterManager.ADAPTABILITY_TYPE_PC][e])&&(i=n,a=!0):i=n,adapterManager.setBlockData(t,i,a)},this.setBlockData=function(t,e,n){var i=t.attr("blk_class");switch(n=!!n,i=!adapterManager.isEditor()&&"blk_image_ext"==i?"blk_image":i){case"blk_image":if(t.find(".blk_image_data_wrap").hasClass("v2")){console.log("not using adapter manager for block_image.v2");break}var a=t.find(".img_container img:first:not(.magnify-icon), .svg_wrap"),o=a.attr("src"),r=!1;if((t.has(".blk_image_data_wrap.empty").length||null==o||""==o)&&(r=!0,null==(o=a.attr("data-src"))||""==o))break;void 0!==e.align&&t.find(".blk_image_data_wrap:first").removeClass("l_text").removeClass("c_text").removeClass("r_text").addClass(e.align),l=o.split(".").pop(),void 0!==e.prod_w&&adapterManager.isEditor()&&(a.css("width",e.prod_w).attr("prod_w",e.prod_w),a.css("height","auto")),adapterManager.isEditor()||null!=o&&"svg"!=l&&(d=o,adapterManager.isPC()?d=a.attr("pc-adapt"):1==e.has_crop_image&&(e.quality=a.attr("data-quality"),o=!1,a.attr("pc-adapt")&&(o=-1!=a.attr("pc-adapt").toString().indexOf("/scale/x2/")),d=this.getSrcImageMod(d,e,o)),a.attr(r?"data-src":"src",d));break;case"blk_slider":var s=t.find(".fotorama:first");(s.hasClass("fotorama--is-ready")||t.closest(".blk_section").hasClass("section_popup"))&&adapterManager.own_slider_editor.reinitFotorama(s);break;case"blk_form":void 0!==e.width&&adapterManager.isEditor()&&t.find(".blk_form_wrap:not(.is_popover) form").css("width",e.width),void 0!==e.align&&t.find(".blk_form_wrap:first").removeClass("l_text").removeClass("c_text").removeClass("r_text").addClass(e.align);break;case"blk_video":adapterManager.isEditor()&&blockManager.getBlock(t.attr("id"),!0).applyToHtmlAdaptiveData(e);break;case"blk_image_ext":var a=t.find(".img-crop:first"),r=a.find("img:first, .svg_container"),d=0<r.length?r.position():{top:0,left:0},s={crop_w:0,crop_h:0,offset_top:0,offset_left:0,prod_w:0,prod_h:0},l="";r.attr("src")&&(l=r.attr("src").split(".").pop()),adapterManager.isEditor()&&pages_editor.setZoomImgExt(t.attr("id"),r),void 0!==e.crop_w?s.crop_w=e.crop_w:s.crop_w=a.width(),void 0!==e.crop_h?s.crop_h=e.crop_h:s.crop_h=a.height(),void 0!==e.offset_top?s.offset_top=e.offset_top:s.offset_top=d.top,void 0!==e.offset_left?s.offset_left=e.offset_left:s.offset_left=d.left,void 0!==e.prod_w?s.prod_w=e.prod_w:s.prod_w=r.width(),void 0!==e.prod_h?s.prod_h=e.prod_h:s.prod_h=r.height(),a.attr("crop_w",s.crop_w).attr("crop_h",s.crop_h).css({width:s.crop_w,height:s.crop_h}),r.attr("prod_w",s.prod_w).attr("prod_h",s.prod_h),r.attr("offset_top",s.offset_top).attr("offset_left",s.offset_left),"svg"===l?r.css({width:"100%"}):r.css({width:s.prod_w,top:s.offset_top,left:s.offset_left}),void 0!==e.align&&t.find(".blk_image_data_wrap:first").removeClass("l_text").removeClass("c_text").removeClass("r_text").addClass(e.align);break;case"blk_yandex_map":var c=t.find(".yandex_map_wrap:first"),u=t.find(".blk_yandex_map_data_wrap:first"),p={};void 0!==e.width&&(p.width=e.width,u.attr("data-width",e.width)),void 0!==e.height&&(p.height=e.height,u.attr("data-height",e.height)),adapterManager.isEditor()&&c.css(p);var f=t.attr("id"),c=u.attr("data-map-latitude"),p=u.attr("data-map-longitude");yandexMaps.reInitMap(f,c,p);break;case"blk_text":if(!adapterManager.isEditor())break;u=t.children(".blk-data");1<u.length&&(u=u.filter("."+adapterManager.type+"--blk-data:first"));f={},c="",p="";isset(e.body)&&u.html(e.body),adapterManager.isPC()||(c=parseInt(u.css("font-size")),p=u.css("text-align")),hybridManager.isAbsoluteBlock(t)||(isset(e.padding_top)&&(f["padding-top"]=e.padding_top),isset(e.padding_bottom)&&(f["padding-bottom"]=e.padding_bottom)),f["text-align"]=p,isset(e.text_align)&&(f["text-align"]=e.text_align),f["font-size"]=c,isset(e.font_size)&&(f["font-size"]=e.font_size);p="normal";n&&(c=blockManager.getBlock(t.attr("id"),!0),c=parseInt(c.data.line_height),isNaN(c)||(p=c+"%")),f["line-height"]=p,u.css(f);break;case"blk_divider":void 0!==e.blc_height&&adapterManager.isEditor()&&t.find(".blk_divider_self:first").css("height",e.blc_height);break;case"blk_button":case"blk_button_popup":void 0!==e.align&&t.find(".blk_button_data_wrap:first").removeClass("l_text").removeClass("c_text").removeClass("r_text").addClass(e.align)}},this.updateCells=function(t,e){var n="";void 0!==e&&(n="[row="+e+"]");var i,a,o=t.hasClass("v3")?3:2,e=3==o?".td_container_cell":".cell.container_cell";0!=t.length&&(n=t.find(".blk_container_cells:first>"+e+n),i=$(),a=$(),n.each(function(){i=$(this),parseInt(i.attr("row"))}),n.each(function(){var t=(i=$(this)).attr(3==o?"cell_id":"id");0!=(a=$("#cell-resizer-"+t)).length&&(t=a.attr("margin_horizontal"),a.css({height:40,left:i.position().left+parseInt(i.css("width"))+Math.floor(t/2)+parseInt(t)}))}))},this.getSettings=function(t){var e={};switch(t){case adapterManager.ADAPTABILITY_TYPE_PC:e={min_width:adapterManager.site_width,width:adapterManager.site_width,popup_section_inner:!1,form_popover_width:400,window_popover_width:500,cell_margin_horizontal:!1,default_count_cell_in_row:1};break;case adapterManager.ADAPTABILITY_TYPE_TABLET:e={min_width:adapterManager.DEVICE_TABLET_CONTENT_MIN_WIDTH,width:adapterManager.DEVICE_TABLET_CONTENT_MIN_WIDTH,popup_section_inner:adapterManager.DEVICE_TABLET_POPUP_MIN_WIDTH,form_popover_width:adapterManager.DEVICE_TABLET_POPUP_MIN_WIDTH,window_popover_width:450,cell_margin_horizontal:3,default_count_cell_in_row:2};break;case adapterManager.ADAPTABILITY_TYPE_MOBILE:e={min_width:adapterManager.DEVICE_MOBILE_CONTENT_MIN_WIDTH,width:adapterManager.DEVICE_MOBILE_CONTENT_MIN_WIDTH,popup_section_inner:adapterManager.DEVICE_MOBILE_POPUP_MIN_WIDTH,form_popover_width:adapterManager.DEVICE_MOBILE_POPUP_MIN_WIDTH,window_popover_width:340,cell_margin_horizontal:3,default_count_cell_in_row:2,new_default_count_cell_in_row:1}}return e},this.setCountColumn=function(s,d,t){if(0<s.closest(".slick-cloned").length)return!0;s.attr("count-cell-in-row",d);var e,l,c,u,p,f,h,m,g,_,w,v,b,y,n,k,C,x,M,i=s.attr("id"),a=adapterManager.data[adapterManager.ADAPTABILITY_TYPE_PC][i];adapterManager.isEditor()&&(blockManager.getBlock(i).data.countCellInRow=d),void 0!==a&&(n=adapterManager.data[adapterManager.type][i],e=adapterManager.getSettings(adapterManager.type),l=!1,c={},i=(u=s.hasClass("v3"))?".td_container_cell":".cell.container_cell",p=s.find(".blk_container_cells:first"),f=p.children(i),h=s.width(),a=a.w_container_cells,m=(void 0===n||void 0===n.cell_margin_horizontal?e:n).cell_margin_horizontal,adapterManager.MARGIN_VERSION_NEW===window.marginVersion&&(m=0),b=!(w=[]),y=1,n=(v=_=g=0)<s.closest(".slide").length,k=100/h,C=(100/a).toFixed(3),x=0,M=n&&!t?2.8:0,s.find(".row-splitter").remove(),f.each(function(){var t=$(this);adapterManager.isEditor()&&t.css({"padding-left":0,"padding-right":0});t=t.attr(u?"cell_id":"id");if(++g,c=adapterManager.data[adapterManager.ADAPTABILITY_TYPE_PC][t],_+=parseFloat(c.width),w.push(t),g%d==0||g==f.length){v=h-m*(w.length+1);var e,n=Math.floor(_/C),i="";for(e in adapterManager.isPC()||((t=$('<div class="row-splitter clearfix" style="height: '+x+'px"></div>')).attr("owner-row",y),b=u?p.children(".td_container_cell[cell_id="+w[0]+"]"):$("#"+w[0]),u&&t.css("display","table-row"),b.before(t)),w){b=u?p.children(".td_container_cell[cell_id="+w[e]+"]"):$("#"+w[e]);var a=0,o=0!=(l=void 0!==adapterManager.data[adapterManager.type][w[e]]&&adapterManager.data[adapterManager.type][w[e]])&&void 0!==l.width&&l.width;c=adapterManager.data[adapterManager.ADAPTABILITY_TYPE_PC][w[e]];var r=0;i=0==o?(r=100*Math.floor(c.width/C)/n,a=Math.round((r-M)/(100/v).toFixed(3)),number_format((k*a).toFixed(3),3,".")):o,adapterManager.isEditor()&&(b.css({width:i+"%","margin-left":m}),adapterManager.MARGIN_VERSION_NEW===window.marginVersion&&b.css({padding:"0px 10px"})),adapterManager.resetSizeImageExt(b),processingBlockInCells(b),b.attr("row",y)}adapterManager.updateCells(s,y),w=[],_=0,++y,x=11,adapterManager.MARGIN_VERSION_NEW===window.marginVersion&&(x=20)}}),adapterManager.setResizerPosition(f,m))},this.setResizerPosition=function(t,e){e=e||0;var n=t.find(".blk-container__resize-inner").removeAttr("style");adapterManager.isPC()||(t=parseInt(n.css("left"),10),n.css("left",t-(e/2).toFixed(0)))},this.resetSizeImageExt=function(t){t=t.hasClass("blk_image_ext")?t:t.find(".blk.blk_image_ext:not(.skip-adapt)");void 0!==adapterManager.data[adapterManager.ADAPTABILITY_TYPE_PC]&&t.each(function(){var t=$(this),e=t.attr("id"),e=void 0===adapterManager.data[adapterManager.ADAPTABILITY_TYPE_PC][e]?{}:adapterManager.data[adapterManager.ADAPTABILITY_TYPE_PC][e];adapterManager.setBlockData(t,e)})},this.initView=function(){adapterManager.initFotorama()},this.initResize=function(o){function n(t){t=t||{};var e,n=$(window).width(),i=adapterManager.ADAPTABILITY_TYPE_PC;for(e in o){var a=o[e];n>=a.min&&n<=a.max&&(i=a.name)}adapterManager.type!=i&&adapterManager.setVersion(i,t)}$(window).resize(function(){clearTimeout(adapterManager.resizeTimer),adapterManager.resizeTimer=setTimeout(n,100)}),FE.add("show_section_popup",function(t){var e={};isset(t.section_id)&&(e.$scopeBlocks=$("#"+t.section_id),e.$scopeRoot=$("#popup_list")),n(e),adapterManager.setScopeRoot(adapterManager.getDefaultScopeRoot()),adapterManager.setScopeBlocks(adapterManager.getDefaultScopeBlocks())}),n()},this.getAdaptiveDataOfBlock=function(t){if(adapterManager.isEditor())return blockManager.getBlock(t.attr("id"),!0).getAdaptiveDataFromHtml();var e={},n=t.attr("blk_class");switch(n="blk_image_ext"===n?"blk_image":n){case"blk_text":var i=t.find(".blk-data:first");e.body=i.html(),e.text_align=i.css("text-align"),e.font_size=parseInt(i.css("font-size")),e.padding_top=parseInt(i.css("padding-top")),e.padding_bottom=parseInt(i.css("padding-bottom")),e.padding_left=parseInt(i.css("padding-left")),e.padding_right=parseInt(i.css("padding-right")),e.is_padding_split=1,e.padding_top===e.padding_bottom&&e.padding_top===e.padding_left&&e.padding_left===e.padding_right&&(e.is_padding_split=0);break;case"blk_image":e.prod_w=t.find(".img_container img").css("width"),e.prod_h=t.find(".img_container img").css("height");var a=t.find(".blk_image_data_wrap:first");a.hasClass("l_text")?e.align="l_text":a.hasClass("r_text")?e.align="r_text":a.hasClass("c_text")&&(e.align="c_text");break;case"blk_image_ext":var o=t.find(".img-crop:first"),r=o.find("img:first, .svg_container"),i=0<r.length?r.position():{top:0,left:0},a=t.find(".blk_image_data_wrap:first"),e={crop_w:o.width(),crop_h:o.height(),offset_top:i.top,offset_left:i.left,prod_w:r.width(),prod_h:r.height()};a.hasClass("l_text")?e.align="l_text":a.hasClass("r_text")?e.align="r_text":a.hasClass("c_text")&&(e.align="c_text");break;case"blk_button":case"blk_button_popup":var s=t.find(".blk_button_data_wrap:first");s.hasClass("l_text")?e.align="l_text":s.hasClass("r_text")?e.align="r_text":s.hasClass("c_text")&&(e.align="c_text");break;case"blk_form":s=t.find(".blk_form_wrap:first");s.hasClass("l_text")?e.align="l_text":s.hasClass("r_text")?e.align="r_text":s.hasClass("c_text")&&(e.align="c_text");s=s.children("form:first").css("width");e.width="100%"===s?null:parseInt(s);break;case"blk_video":var d=t.find("iframe:first");e.width=d.width(),e.height=d.height();break;case"blk_yandex_map":d=t.find(".yandex_map_wrap:first");e.width=d.width(),e.height=d.height();break;case"blk_divider":e.blc_height=t.find(".blk_divider_self:first").height()}return e},this.initFotorama=function(){function o(t){t.on("fotorama:load",function(){$(this).addClass("fotorama--is-ready")}).fotorama()}adapterManager.getScopeBlocks().find(".blk_slider_data_wrap > .fotorama, .blk-data > .fotorama").each(function(){var t,e,n,i,a=$(this);0==a.find(".fotorama__wrap").length?(e=(t=a.closest(".blk_section")).index(),n=t.hasClass("section_popup"),t.hasClass("is_absolute")&&(i=a.closest(".blk.blk_slider").height(),a.attr("data-height",i)),i=!0,(i=(n||2<=e)&&"complete"!==document.readyState&&!adapterManager.isEditor()?!1:i)?o(a):FE.add("onload",function(){o(a)})):a.addClass("fotorama--is-ready")})},this.initInPreview=function(){adapterManager.initFotorama(),FE.add("show_section_popup",function(t){var e={};t.section_id&&(e.$scopeBlocks=$("#"+t.section_id),e.$scopeRoot=$("#popup_list")),adapterManager.setVersion(adapterManager.type,e)})},this.initStates=function(t){for(var e in t)t.hasOwnProperty(e)&&(adapterManager.states[e]=t[e]?1:0,adapterManager.types.push(e),adapterManager.data_empty[e]={})}}function e(){this.$wnd_slider_empty=null,this.$wnd_slider=null,this.$wnd_slider_images=null,this.$block_fotorama=null,this.$block_data_encoded=null,this.$block_wrap=null,this.$block_loading=null,this.smart_block=null}sliderEditorExtend(e),FE.runOnReady(function(){window.adapterManager=new t,window.adapterManager.ready()})}(),function(){function t(){this.integration_id="yandex_money",this.form_root=$(),this.submitFormSettings=function(){var t={},e=!0;ymis_manager.form_root.find("input").each(function(){"checkbox"===$(this).attr("type")||"radio"===$(this).attr("type")?t[$(this).attr("name")]=$(this).prop("checked")?1:0:t[$(this).attr("name")]=$(this).val().trim()});var n,i,a=ymis_manager.validateFormSettings(t);for(n in a)ymis_manager.form_root.find("div[parent-name="+n+"]:first").html(a[n].join("<br/>")),0<a[n].length&&(e=!1,"successURL"==n&&ymis_manager.form_root.find(".js_yamoney_settings_extra").addClass("in").css({height:"auto"}));return e&&((i={settings:t}).form_id=pages_editor.activeSmartObject.id,i.integration_id=ymis_manager.integration_id,saveMan.add("save_ymis_settings",i)),e},this.onSaveSettings=function(t){formEditor.setPaymentSettings(ymis_manager.integration_id,t.settings,t.form_id)},this.clearFormSettings=function(t){sitesIntMan.isIntegrationEnabledForSite(ymis_manager.integration_id)?ymis_manager.form_root.find(".lock-ind-settings:first").hide():ymis_manager.form_root.find(".lock-ind-settings:first").show(),t.find("input").each(function(){ymis_manager.form_root.find("div[parent-name="+$(this).attr("name")+"]:first").html(""),"checkbox"===$(this).attr("type")||"radio"===$(this).attr("type")?$(this).prop("checked",!1):$(this).val("")})},this.getDefaultSettings=function(){return{wallet_number:"",targets:"",amount:"",formcomment:"",after_pay_action:"back",successURL:""}},this.validateFormSettings=function(t){var e,n={};for(e in t)switch(n[e]=[],0<=$.inArray(e,["wallet_number","targets","amount"])&&0==t[e].length&&n[e].push("Поле обязательно для заполнения"),e){case"wallet_number":/[^[0-9]/.test(t[e])&&n[e].push("Неверный формат. Допустимы только цифры");break;case"amount":t[e]=t[e].split(",").join("."),/^\.|\d+\..*\.|[^\d\.{1}]/.test(t[e])&&n[e].push("Неверный формат. Допустимы только цифры"),""!==t[e]&&t[e].split(".")[0]<2&&n[e].push("Сумма должна быть не менее 2 рублей");break;case"successURL":0<t[e].length&&!checkProtocolInUrl(t[e])&&n[e].push("Неверный формат URL");break;case"targets":150<t[e].length&&n[e].push("максимальное значение поля 150 символов");break;case"formcomment":50<t[e].length&&n[e].push("максимальное значение поля 50 символов")}return n},this.loadFormSettings=function(t){var e=$(),n=ymis_manager.form_root;if(0!=n.length&&(ymis_manager.clearFormSettings(n),void 0!==t&&void 0!==t.settings))for(var i in t.settings)"checkbox"===(e=n.find("input[name="+i+"]")).attr("type")||"radio"===e.attr("type")?e.prop("checked",1==t.settings[i]):e.val(t.settings[i])},this.submitLeadForm=function(t,e,n,i){var a=LpmBase64.encode(JSON.stringify({lead_id:e,key:n})),o=$("#ymis_"+t);"undefined"!==t&&!$.isNumeric(t)||slackDebug("Error 6556, y_money invalid lead id: "+e);n=o.find("input[name=successURL]"),t=n.data("url");n.val(t+e),o.find("input[name=paymentType]").val(i),o.find("input[name=label]").val(a),o.submit()},this.enabledModule=function(){var t=lockScreen("Подключаем интеграцию!",{show_animation:!0});saveMan.add("enabled_ymis_module",{integration_id:ymis_manager.integration_id,lock_id:t})},this.afterEnabledModule=function(t){ymis_manager.form_root.find("#ymis-enabled-text:first").hide(),ymis_manager.form_root.find("#ymis-msg:first").show(),setTimeout(function(){ymis_manager.form_root.find(".lock-ind-settings:first").hide()},2e3),sitesIntMan.onIntegrationEnabledForSite(ymis_manager.integration_id),unlockScreen(t)},this.getAfterPaymentUrlInput=function(){return ymis_manager.form_root.find("input[name=successURL]")},this.getAfterPaymentActionInput=function(){return ymis_manager.form_root.find(".after-pay-action__input-radio")}}FE.runOnReady(function(){window.ymis_manager=new t,ymis_manager.form_root=$("#yandex-money-ind-settings"),ymis_manager.getAfterPaymentUrlInput().on("keyup change",function(){formEditor.onChangePaymentUrl(this,window.ymis_manager)}),ymis_manager.getAfterPaymentActionInput().on("click",function(){formEditor.onSelectAfterPaymentAction(this,window.ymis_manager)}),FE.add("formEditor/loaded",function(){ymis_manager.getAfterPaymentUrlInput().trigger("change")})})}(),ModuleButtonUp.prototype.drawButton=function(){this.$btn_wrap.addClass(this.settings_arr.join(" "))},ModuleButtonUp.prototype.bindEvent=function(){var t=this;$(window).scroll(function(){100<$(this).scrollTop()?t.$btn_wrap.fadeIn():t.$btn_wrap.fadeOut()}),this.$btn_wrap.click(function(){return $("html, body").animate({scrollTop:0},600),!1})},function(){"use strict";isIos()&&FE.add("onload",function(){$(".btn-new").on("touchstart",function(){})})}(),window.MsBaseJsObject={$isDeleted:!1,$isReady:!1,$ready:null,$load:null,$beforeUpdate:null,$afterUpdate:null,$afterDataUpdate:null};var MsJsObject=function(t){return this.jsObject=clone(window.MsBaseJsObject),this.objectData={data:{},methods:{},modules:{}},this.initObjectsData(t),this.initSystemEvents(),this.addJsObjectProperties(this.objectData.data),this.addJsObjectProperties(this.objectData.modules),this.initMethods(),this.jsObject};MsJsObject.prototype.initObjectsData=function(t){const e=["data","methods","modules"];for(var n=0;n<t.length;n++){var i=t[n];if("object"==typeof i)for(var a in i)-1!==e.indexOf(a)?"object"==typeof i[a]&&extend(this.objectData[a],i[a]):this.objectData[a]=i[a]}},MsJsObject.prototype.initSystemEvents=function(){for(var t=["ready","load","beforeUpdate","afterUpdate","afterDataUpdate"],e=0;e<t.length;e++){var n=t[e];isset(this.objectData[n])&&"function"==typeof this.objectData[n]&&(this.jsObject["$"+n]=this.getMethod(this.objectData[n]))}},MsJsObject.prototype.addJsObjectProperties=function(t){if("object"==typeof t)for(var e in t)isset(this.jsObject[e])||(this.jsObject[e]=t[e])},MsJsObject.prototype.initMethods=function(){var t=this.objectData.methods;if("object"==typeof t)for(var e in t)isset(this.jsObject[e])||"function"!=typeof t[e]||(this.jsObject[e]=this.getMethod(t[e]))},MsJsObject.prototype.getMethod=function(t){var e=this.jsObject;return function(){return!0===e.$isDeleted?null:t.apply(e,arguments)}},window.MsJsObject=MsJsObject,window.MsJsPublishedManager={storage:{},jsData:{}},MsJsPublishedManager.initMsJsScripts=function(t){for(var e=0;e<t.length;e++)if(!(t[e].length<2)){for(var n,i=t[e].pop(),a=t[e],o=[],r={},s=0;s<a.length;s++){var d=this.getObjectDataFromHash(a[s],r);null!=d&&o.push(d)}0!==o.length&&(o.unshift(this.getLocalVarsObject(i)),o.unshift(this.getGlobalVarsObject(i)),n=new MsJsObject(o),this.initMsJsObject(i,n))}},MsJsPublishedManager.addJsData=function(t){extend(this.jsData,t)},MsJsPublishedManager.getObjectDataFromHash=function(t,e){var n="ms"+t;if(!isset(window[n]))return null;if("function"!=typeof window[n])return null;try{var i=window[n](e)}catch(t){return"test"!==getEnvironment()&&console.error(t),null}return i&&"object"==typeof i?clone(i):null},MsJsPublishedManager.initMsJsObject=function(t,e){null!==e.$ready&&FE.runOnReady(function(){e.$ready(),e.$isReady=!0}),null!==e.$load&&FE.runOnLoad(e.$load),this.storage[t]=e},MsJsPublishedManager.getGlobalVarsObject=function(t){return{data:{itemId:t,item:ge(t),pageId:window.siteId,isEditor:!1,pcSiteWidth:window.siteWidth}}},MsJsPublishedManager.getLocalVarsObject=function(t){return isset(this.jsData[t])?{data:this.jsData[t]}:{}},window.msJsWrapper=function(t,e,n){e=(e=MsJsPublishedManager.storage[e])||{};return msEventsEval(e,t,n)},window.setMsJsData=function(t,e,n){t=MsJsPublishedManager.storage[t];t&&(t[e]=n,null!=t.$afterDataUpdate&&t.$afterDataUpdate())},eval.call(window,"window.msEval=function(data,exp){with(data)return eval(exp)}"),window.msEventsEval=function(t,e,n){return e=e||window.event,n=isset(t[n])&&"function"==typeof t[n]?"("+n+").call(data,arguments[2])":"(function(){"+n+"})()",msEval(t,n,e)},function(){"use strict";function e(t){return t instanceof jQuery?t:$(t)}function n(t){(t=e(t)).removeClass(a),o(t)}function i(t){e(t).addClass(a)}var a="hidden-ms-item",o=function(t){e(t).find(".slick-initialized").each(function(){var t=$(this).slick("getSlick");t.checkResponsive(),t.unslicked||t.setPosition()})};window.slotHelper={initHiddenSlot:o,showSlot:n,hideSlot:i,toggleSlot:function(t){t=e(t);(t.hasClass(a)?n:i)(t)}}}(window),window.userVideo={userVideoLazyLoader:null},userVideo.getUserVideoLazyLoader=function(){return null!==this.userVideoLazyLoader||(this.userVideoLazyLoader=new IntersectionObserver(function(t,e){t.forEach(function(t){t.isIntersecting&&(userVideo.enableUserVideo(t.target),userVideo.userVideoLazyLoader.unobserve(t.target))})})),this.userVideoLazyLoader},userVideo.enableUserVideo=function(t){for(var e in t.children){e=t.children[e];"SOURCE"===e.tagName&&isset(e.dataset.src)&&(e.src=e.dataset.src)}attr(t,"autoplay","autoplay"),t.load()},userVideo.autoplayUserVideo=function(t){setTimeout(function(){isset(window.IntersectionObserver)?userVideo.getUserVideoLazyLoader().observe(t):userVideo.enableUserVideo(t)})},userVideo.initNotAutoplayVideo=function(t){setTimeout(function(){t.readyState!==t.HAVE_NOTHING||t.poster||(t.preload="auto")},100)},userVideo.initAfVideo=function(t){var e;window._isEditor||(e=$(t)).one("play",function(){var t=null!=e.attr("autoplay")&&null!=e.attr("muted");window.afItemsObserver&&afItemsObserver.blockVideoInAf(e)&&afItemsObserver.triggerStartedVideo(e,t)})},userVideo.init=function(t){$("#"+t+" .blk_video video").each(function(){null!=this.dataset.autoplay?userVideo.autoplayUserVideo(this):userVideo.initNotAutoplayVideo(this),null!=this.dataset.afVideoItemId&&userVideo.initAfVideo(this)})},userVideo.stopVideosInPopup=function(t){$("#"+t+" .blk_video video").each(function(){this.pause()})},userVideo.initOnLoad=function(){userVideo.init("sections_list"),userVideo.init("fixed-sections")},userVideo.initVideosInPopup=function(t){userVideo.init(t)},FE.add("onload",userVideo.initOnLoad),FE.add("onready",function(){window._isEditor||($(document).on("click",".video__overlay",function(){window.playVideo($(this).closest(".blk").find("iframe:first"),!1)}),$("#sections_list,#fixed-sections").find(".blk.blk_video:visible .video.autoplay iframe:first").each(function(){window.playVideo($(this),!0)}))}),function(d){"use strict";function cBlockFormSubmit(){this.redirectUrl=null,this.pendingAjaxCount=0}cBlockFormSubmit.prototype.constructor=cBlockFormSubmit,cBlockFormSubmit.prototype.submit=function(l){var c,u=(u=$(this).attr("id"))||$(this).attr("frm-id"),p=$(this),f=$(p),h=f.parent().hasClass("quiz-form");h&&(c=quizWebHandler.quizForm(p));var m=parseInt(p.attr("can-split-data"));p.find("input.is_split_form_with_files").length||$('<input type="hidden" class="is_split_form_with_files" name="is_split_form_with_files" value="'+m+'"/>').appendTo(p),formSubmit.setUtm(p);var g=parseInt(p.attr("data-mes-url"));formSubmit.setLoadingState(f);var _=f.find(".btn-submit");toggleBtnLocker(_);var w=[],t={frm:f,type:"POST",cache:!1,timeout:4e4,url:formSubmit.getAjaxUrl(p,u),success:function(t){if(FE.run("form-submitted-successfully",{id:f.closest(".blk").attr("id"),data:t}),p.find(".ui_has_error").removeClass("ui_has_error"),p.find(".ui_error").hide().html(""),p.find("input.ui_btn, input.btn-submit").button("def"),toggleBtnLocker(_),"function"==typeof t.split&&(t=JSON.parse(t)),formSubmit.checkErrors(t,p,h,c),formSubmit.evaluatesJS(t),isset(t.res))if(1==t.res){formSubmit.ajaxForUploadFileToLead(w,t,u),reachGoalByAttr(p,"goal-submitted");var e=1===g?!0:!1;if(!t.osd)switch(g){case 2:var n,i=p.attr("data-goto-url");if(i.length)return-1!==(i=-1!==(i=-1!==(i=-1!==(i=!0!==/^http(|s):\/\//.test(i)?"http://"+i:i).indexOf("{name}")&&(n=p.find(".field.fname:first input.inp")).length?i.replace("{name}",encodeURIComponent(n.val())):i).indexOf("{email}")&&(n=p.find(".field.femail:first input.inp")).length?i.replace("{email}",encodeURIComponent(n.val())):i).indexOf("{phone}")&&(n=p.find(".field.fphone:first input.inp")).length?i.replace("{phone}",encodeURIComponent(n.val())):i).indexOf("{order_id}")&&t.id_lead&&(i=i.replace("{order_id}",t.id_lead)),formSubmit.redirectUrl=i,void $("#formPopover").wind("hide");break;case 3:var a=p.attr("frm-id"),o=t.id_lead,r=t.key;0<$("#ymis_"+a).length?(jConfirm("Выберите способ оплаты",{id:"j_lead_confirm",html:!0,width:null,okText:"ЮMoney",cancelText:"Банковская карта",btnWidth:120,okClass:"n-btn n-btn-success btn-round",cancelClass:"n-btn n-btn-success btn-round",onOk:function(){ymis_manager.submitLeadForm(a,o,r,"PC")},onCancel:function(){ymis_manager.submitLeadForm(a,o,r,"AC")},headerText:!1,showClose:!0},!0),$("#j_lead_confirm").find("#jConfirmOk").removeClass("ibtn wind-btn-apply")):e=!0;break;case 4:i=$("#robokassa_"+p.attr("frm-id"));0<i.length?(i.find("input[name=InvId]").val(t.id_lead),i.find("input[name=SignatureValue]").val(t.signature),i.submit()):(consoleDbg(t),e=!0);break;case 5:e=formSubmit.processingPayment(t,"ya_kassa_res","confirmation_url");break;case 6:e=formSubmit.processingPayment(t,"pay_pal_res","approval_link");break;case 7:t.cloud_payments_int&&t.cloud_payments_int.widget_options_encoded?showCloudPaymentsWidget(t.cloud_payments_int.widget_options_encoded):(consoleDbg(t.cloud_payments_int),e=!0);break;case 8:e=formSubmit.processingPayment(t,"tinkoff_int","pay_link");break;case 9:e=formSubmit.processingPayment(t,"sberbank_int","pay_link");break;default:console.log("FORM has action type = "+g+" (it is not defined)")}h&&c&&quizWebHandler.toQuizStep(c,0),p.find("input.inp,textarea.inp").val(""),p.find("input[type=checkbox]").prop("checked",!1),p.find(".fradio input:first").prop("checked",!0),p.find(".fselect option:first").prop("selected","selected"),p.find("input[type=file]").val(null).trigger("change",l);var s=p.closest(".wind");s.length&&s.wind("hide"),e&&(d=s.hasClass("quiz-form--v1"),s=formSubmit.getSuccessMessage(p,t,m,w),formSubmit.showSuccessMessage(s,h,d))}else{var d;t.show_alert?(d="Error: "+t.show_alert,"empty_data"===t.show_alert&&(d="Нужно заполнить хотя бы одно поле"),alert(d)):1==t.is_site_demo&&showSiteDemoWarning()}window.dbgMode&&console.log(t)},error:function(t,e,n){switch(toggleBtnLocker(_),console.log(e),e){case"timeout":alert("Ошибка! Нет связи с сервером. Проверьте подключение к интернету и попробуйте снова.");break;case"error":case"parsererror":alert("Извините, на сервере возникла ошибка!\n\nПожалуйста, напишите нам в тех-поддержку support@lpmotor.ru"),window.dbgMode&&(console.log(t),console.log(n))}p.find("input.ui_btn, input.btn-submit").button("def")}},e=p.find("input[type=file]"),n=!0;if(0<e.length){if(!window.FormData)return alert("Ошибка № 2876 Ваш браузер не поддерживает объект FormData, попробуйте воспользоваться современной версией браузера"),!1;var n=formSubmit.checkRequiredFieldsContainFiles(p,e),i=new FormData(this);1<e.length&&m&&n&&formSubmit.splitRequestByFile(p,e,i,w),t.data=i,t.processData=!1,t.contentType=!1}else t.dataType="json",t.data=$(this).serialize();return n?(6==g&&lockScreen("Сейчас произойдет переход к оплате",{show_animation:!0}),$.ajax(t).then(function(){u=null,formSubmit.doRedirect()})):toggleBtnLocker(_),!1},cBlockFormSubmit.prototype.getAjaxUrl=function(t,e){var n="";return!window.isPagePreview&&null===window.baseUrl.match(/lpmotor.ru\/admin\/$/)||(n=window.baseUrl.replace(/^http(|s):/,window.location.protocol).replace(/\/$/,"")),n+=t.attr("action")+"/frm:"+e},cBlockFormSubmit.prototype.evaluatesJS=function(data){if(isset(data.script))try{eval(data.script)}catch(ex){window.console&&window.dbgMode&&(console.log(ex),console.log("[_Ошибка JS_] "+ex.stack))}},cBlockFormSubmit.prototype.setLoadingState=function(t){var e=t.find("input.ui_btn, input.btn-submit");e.css({width:e.outerWidth()}),e.data("button")||(t=e.attr("lang"),e.button({loadingText:t&&"en"==t?"Loading...":"Загрузка...",defText:e.val()}),t=null),e.button("loading")},cBlockFormSubmit.prototype.processingPayment=function(t,e,n){var i=!1;return t&&t[e]&&t[e][n]?formSubmit.redirectUrl=t[e][n]:(consoleDbg(t[e]),i=!0),i},cBlockFormSubmit.prototype.hasInFileList=function(t,e){for(var n,i,a=0;a<t.length;a++)for(i=(n=t[a].entries()).next();!i.done;){if(i.value[0].includes(e))return i.value[1].name;i=n.next()}return null},cBlockFormSubmit.prototype.doRedirect=function(){this.redirectUrl&&this.pendingAjaxCount<1&&(window.location.href=this.redirectUrl)},cBlockFormSubmit.prototype.ajaxForUploadFileToLead=function(t,e,n){if(t.length&&!isset(e.lead_preview)&&!e.osd&&e.id_lead){formSubmit.pendingAjaxCount=t.length;for(var i=0;i<t.length;i++)$.ajax({data:t[i],dataType:"json",method:"post",cache:!1,processData:!1,contentType:!1,url:baseUrl+window.siteId+"/leads/save_files_to_lead/frm:"+n+"/lead_id:"+e.id_lead,success:function(t){1!=t.saved&&alert("Возникла ошибка при сохранении файлов"),formSubmit.pendingAjaxCount--,formSubmit.doRedirect()}})}},cBlockFormSubmit.prototype.splitRequestByFile=function(t,e,n,i){for(var a=new FormData,o=0,r=0,s=0;e.length>s;s++)e[s].files[0]&&(o+=e[s].files[0].size,window.maxPostSize>o||(o-=e[s].files[0].size,r+=e[s].files[0].size,window.maxPostSize<r&&(i.push(a),a=new FormData,r=e[s].files[0].size),a.append(e[s].name,e[s].files[0],e[s].files[0].name),n.delete(e[s].name)));r&&i.push(a)},cBlockFormSubmit.prototype.checkRequiredFieldsContainFiles=function(t,e){for(var n,i,a=!0,o=!0,r=0;e.length>r;r++)0<e[r].files.length||(n=e[r].id.indexOf("field")+5,i=e[r].id.substr(n),t.find("[field-id="+i+"]").hasClass("is_required")&&(n=t.find("#"+t.attr("id")+"__field"+i),i=t.find(".ui_error[for="+t.attr("id")+"__field"+i+"]"),n.length&&(n.addClass("ui_has_error"),o&&(n.focus(),o=!1)),i.length&&(i.show(),i.html("<div>Нужно выбрать файл</div>")),a=!1));return a},cBlockFormSubmit.prototype.setUtm=function(t){var e=t.find("input.inp_track");if(e.length||(e=$('<input type="hidden" class="inp_track" name="inp_track" value=""/>')).appendTo(t),e.val(encodeURI(getCookie("bm360track"))),!t.find("input.inp_utm").length){$('<input type="hidden" class="inp_utm" name="has_utm" value="1"/>').appendTo(t);var n,i=getUrlVars();for(n in i)$('<input type="hidden" class="inp_utm" name="'+n+'" value="'+i[n]+'"/>').appendTo(t)}},cBlockFormSubmit.prototype.checkErrors=function(t,e,n,i){if(isset(t.error)){var a,o=!1;for(a in t.error){var r,s=e.find("#"+e.attr("id")+"__"+a),d=e.find(".ui_error[for="+e.attr("id")+"__"+a+"]");s.length&&(s.addClass("ui_has_error"),!1===o&&(s.focus(),o=!0,n&&i&&(s=(r=e.find(".quiz")).index(s.closest(".quiz")),quizWebHandler.toQuizStep(i,s),FE.run("quiz-validate-error",{step:r.eq(s)})))),t.error.hasOwnProperty(a)&&d.length&&(d.show(),d.html("<div>"+t.error[a].join("</div><div>")+"</div>"))}}isset(t.exception)&&window.dbgMode&&alert(t.exception)},cBlockFormSubmit.prototype.getSuccessMessage=function(t,e,n,i,a){var o=t.attr("success-message");if(o.length||(o=a?"Спасибо!\\nВ ближайшее время мы с вами свяжемся!":"Спасибо!\\nВаша заявка принята.\\nВ ближайшее время мы с вами свяжемся!"),isset(e.lead_preview)){o+='<div class="lead_preview"><div class="c_text">--------[ ВНИМАНИЕ ]--------</div><div class="c_text">(В предпросмотре заявка не создается)</div><div class="l_text mt1">Данные, принятые с формы:</div><ul class="l_text mb0">';var r,s=null;for(r in e.lead_preview)o+=(s=n?e.lead_preview[r].id?formSubmit.hasInFileList(i,e.lead_preview[r].id):null:s)?"<li><b>"+e.lead_preview[r].name+"</b>: "+s+"</li>":"<li><b>"+e.lead_preview[r].name+"</b>: "+(null===e.lead_preview[r].val?"":e.lead_preview[r].val)+"</li>";o+="</ul></div>"}return o},cBlockFormSubmit.prototype.showSuccessMessage=function(t,e,n){var i,a,o;window.jAlert?(i=400,a=n?" quiz--v1":"",o=$("#wind_container"),isset(adapterManager)&&!adapterManager.isPC()?i=340:n&&(i=388),o.addClass("j_alert"+a),n||o.removeClass("quiz--v1"),jAlert(t.replace(/\\n/g,"<br/>"),{id:"j_lead_alert",showCloseBtn:!0,btnCls:"btn",width:i,btnWidth:"auto",hideOnBlackoutClick:!0,html:!0,mobileAdapt:e&&!quizMobileView.isMobileInPreview(),okText:!!n&&"Хорошо",onOk:function(){$("#wind_container").removeClass("j_alert"+a)}})):alert(t.replace(/\\n/g,"\n"))},cBlockFormSubmit.prototype.init=function(){$(document).on("submit","form.frm_lead",this.submit),$(document).on("click","form.frm_lead",function(t){t.stopPropagation()})},window.formSubmit=new cBlockFormSubmit,formSubmit.init()}(document),function(t){function e(){}e.prototype.init=function(){consoleDbg("INIT: public shop cart"),0===$("#shopCartModal").length&&0<t.getCookie("cart")&&this.loadShopCart()},e.prototype.loadShopCart=function(){var e=this;$.get(t.baseUrl+"admin/"+t.siteId+"/cart/get_cart_data",function(t){1==t.res&&isset(t.content)&&e.appendShopCart(t.content)})},e.prototype.appendShopCart=function(t){var e,n;isset(t.jsCode)&&isset(t.cartTemplate)&&isset(t.cartIconTemplate)&&isset(t.vue)&&isset(t.jsRaw)&&((e=document.createElement("script")).type="text/javascript",e.src=t.vue,document.body.append(e),n=this,e.onload=function(){n.appendAfterVueLoad(t)})},e.prototype.appendAfterVueLoad=function(t){var e=$("#wind_container");e.append(t.cartTemplate),e.after(t.cartIconTemplate);var n='<script type="text/javascript">'+t.jsCode+"<\/script>";t.jsRaw.forEach(function(t){n+='<script src="'+t+'" type="text/javascript" async="false"><\/script>'}),$("body").append(n)},FE.runOnReady(function(){window.publicShopCartInitializer=new e,window.publicShopCartInitializer.init()})}(window);